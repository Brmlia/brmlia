(this.webpackJsonpbrmlia=this.webpackJsonpbrmlia||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},164:function(e,t,n){e.exports=n(378)},169:function(e,t){e.exports="data:image/jpeg;base64,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"},177:function(e,t){},178:function(e,t){},179:function(e,t){},183:function(e,t,n){},378:function(e,t,n){"use strict";n.r(t);n(100),n(165);var a=n(0),i=n.n(a),r=n(41),l=n.n(r),s=n(5),c=n(7),o=n(9),u=n(10),h={overflowY:"scroll",overflowX:"scroll",height:"100%",width:"100%",position:"relative"},p={flex:1,position:"relative"},f={flex:.1,position:"relative"},m={size:"sm",vertical:!1,flex:1,padding:15},d={fluid:!0,maxWidth:"100%"},v={justify:"center",alignContent:"center",alignItems:"center",textAlign:"center",width:"100%",fluid:!0,fontSize:"12px"},b={width:"85%",height:"100%"},g="100%",y={position:"absolute",height:"100%",width:"100%",zIndex:"3",marginLeft:"0px",opacity:"1.0"},x={position:"absolute",height:"100%",width:"100%",zIndex:"3",opacity:"0.5"},j={position:"absolute",height:"100%",width:"100%",zIndex:"5",opacity:"0.5"},E={position:"absolute",height:"100%",width:"100%",zIndex:"7",opacity:"0.5"},A={position:"center",height:"100px",width:"88px",zIndex:"3"},S={display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:50,height:50,padding:4,boxSizing:"border-box"},w={display:"flex",minWidth:0,overflow:"hidden"},O=n(3),k=n(8),C=n(16),z={channels:[{selected:!1},{selected:!1},{selected:!1}],lastSelected:1,dev:0},M=Object(C.a)((function(e){return Object(O.a)({},z)})),N=Object(k.a)(M,2),L=(N[0],N[1]);function W(e){L.setState((function(t){return{channels:t.channels.map((function(n,a){if(a===e-1){var i=n;return i.selected=!t.channels[a].selected,i}return n}))}}))}function B(e){L.setState((function(t){return Object(O.a)({},t,{lastSelected:e})}))}var I={file:[],size:0,selected:0},V={file:[{name:"brom.jpeg",image:n(169),style:{display:"block",width:"auto",height:"100%"},type:"image/png"}],size:1,selected:0},D=Object(C.a)((function(e){return Object(O.a)({},L.getState().dev?V:I)})),Z=Object(k.a)(D,2),U=(Z[0],Z[1]),T=n(14),F=function(e){return(new T.TextureLoader).load(e)},Y=function(e){return(new T.TextureLoader).load(e)},R={channels:[{uniforms:{brightness:{value:"0.0"},contrast:{value:"0.0"},whitepoint:{value:"255.0"},blackpoint:{value:"0.0"},opacity:{value:"0.0"},color:{value:""},image:{value:""}},texture:null,name:"",type:""},{uniforms:{brightness:{value:"0.0"},contrast:{value:"0.0"},whitepoint:{value:"235.0"},blackpoint:{value:"16.0"},opacity:{value:"0.0"},color:{value:""},image:{value:""}},texture:null,name:"",type:""},{uniforms:{brightness:{value:"0.0"},contrast:{value:"0.0"},whitepoint:{value:"235.0"},blackpoint:{value:"16.0"},opacity:{value:"0.0"},color:{value:""},image:{value:""}},texture:null,name:"",type:""},{uniforms:{brightness:{value:"0.0"},contrast:{value:"0.0"},whitepoint:{value:"235.0"},blackpoint:{value:"16.0"},opacity:{value:"0.0"},color:{value:""},image:{value:""}},texture:null,name:"",type:""}]},K=Object(C.a)((function(e){return Object(O.a)({},R,{update:function(t,n,a,i,r,l,s){return e((function(e){return Object(O.a)({},e,{uniforms:Object(O.a)({},e.uniforms,{brightness:Object(O.a)({},e.uniforms.brightness,{value:t}),contrast:Object(O.a)({},e.uniforms.contrast,{value:n}),whitepoint:Object(O.a)({},e.uniforms.whitepoint,{value:a}),blackpoint:Object(O.a)({},e.uniforms.blackpoint,{value:i}),opacity:Object(O.a)({},e.uniforms.opacity,{value:r}),color:Object(O.a)({},e.uniforms.color,{value:l}),image:Object(O.a)({},e.uniforms.image)}),texture:s,brightness:t})}))}})})),P=Object(k.a)(K,2),Q=(P[0],P[1]),G=U,J=Q,H=n(163),X=n(95),q={views:[{name:"main",zoomPct:"1",zoomZppPct:"1",reset:"0"},{name:"xy",zoomPct:"1",zoomZppPct:"1",reset:"0"},{name:"yz",zoomPct:"1",zoomZppPct:"1",reset:"0"},{name:"xz",zoomPct:"1",zoomZppPct:"1",reset:"0"}],last:"0"},_=Object(C.a)((function(e){return Object(O.a)({},q)})),$=Object(k.a)(_,2),ee=($[0],$[1]),te={zpp:{type:!0,limitToBounds:!0,panningEnabled:!0,transformEnabled:!0,pinchEnabled:!1,limitToWrapper:!1,disabled:!1,dbClickEnabled:!0,lockAxisX:!1,lockAxisY:!1,velocityEqualToMove:!0,enableWheel:!0,enableTouchPadPinch:!1,enableVelocity:!0,limitsOnWheel:!1,minScale:.5,maxScale:8,step:10,updated:!1,scale:1,x:0,y:0},zoomPct:100};var ne=function(e){var t=te.zpp,n=t.limitToBounds,a=t.panningEnabled,r=t.transformEnabled,l=t.pinchEnabled,s=t.limitToWrapper,c=t.disabled,o=t.dbClickEnabled,u=t.lockAxisX,h=t.lockAxisY,p=t.velocityEqualToMove,f=t.enableWheel,m=t.enableTouchPadPinch,d=t.enableVelocity,v=t.limitsOnWheel,b=t.minScale,g=t.maxScale,y=t.step,x=t.x,j=t.y;return ee.subscribe((function(t){var n;t&&t.views&&e.type>=0&&e.type<t.views.length&&(n=t.views[e.type].zoomPct,e.type,te.zoomPct!==n&&(te.zoomPct=n)),t.views[e.type].reset&&(te.zpp.x=0,te.zpp.y=0)})),i.a.createElement("div",{className:"transform-wrapper"},i.a.createElement(X.b,{defaultScale:1,defaultPositionX:0,defaultPositionY:0,positionX:x,positionY:j,scale:te.zoomPct/100,options:{limitToBounds:n,transformEnabled:r,disabled:c,limitToWrapper:s,minScale:b,maxScale:g},pan:{disabled:!a,lockAxisX:u,lockAxisY:h,velocityEqualToMove:p,velocity:d},pinch:{disabled:!l},doubleClick:{disabled:!o},wheel:{wheelEnabled:f,touchPadEnabled:m,limitsOnWheel:v,step:y}},(function(t){t.zoomIn,t.zoomOut,t.resetTransform,t.setDefaultState;var n,a=t.positionX,r=t.positionY,l=t.scale,s=(t.previousScale,t.options);s.limitToBounds,s.transformEnabled,s.disabled,Object(H.a)(t,["zoomIn","zoomOut","resetTransform","setDefaultState","positionX","positionY","scale","previousScale","options"]);return i.a.createElement("div",null,(n=100*l,e.type,void(te.zoomPct!==n&&(te.zoomPct=n))),function(e,t){te.zpp.x!==e&&(te.zpp.x=e),te.zpp.y!==t&&(te.zpp.y=t)}(a,r),i.a.createElement(i.a.Fragment,null,i.a.createElement(X.a,null,function(e,t){if(""!==e)return i.a.createElement("img",{src:e,alt:"viewer",width:t})}(e.img,e.imageWidth)),i.a.createElement("span",{className:"badge badge-primary"},"x : ",Number(a).toFixed(0),"px"),i.a.createElement("span",{className:"badge badge-primary"},"y : ",Number(r).toFixed(0),"px"),i.a.createElement("span",{className:"badge badge-primary"},"Scale : ",Number(100*l).toFixed(0),"%")))})))},ae=(n(101),function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).initSlider={initial:0,min:0,max:0,step:0,value:0},a.handleSliderChange=function(e){e.persist();var t=a.state.slider;t.value=e.target.value,a.setState({slider:t}),a.updateStatus(!0),a.notifyValue()},a.state={updated:!1,slider:a.initSlider,setSlider:null,sync:!0},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(){return!!this.state.updated}},{key:"updateStatus",value:function(e){this.setState({updated:!0})}},{key:"notifyValue",value:function(){var e=this.props.sliderValue,t=this.props.type;e(this.state.slider.value,t)}},{key:"displayValue",value:function(){return"1"===this.props.raw?i.a.createElement("span",null," ",Math.round(this.state.slider.value*this.props.multiplier)):i.a.createElement("span",null," ",Math.round(this.state.slider.value*this.props.multiplier),"%")}},{key:"render",value:function(){var e=this;ee.subscribe((function(t){if(e.props.type>=0&&e.props.type<t.views.length){var n=e.state.slider;n.value=t.views[e.props.type].zoomPct,e.setState({slider:n})}}));var t=this.state.slider,n=this.props,a=n.label,r=n.min,l=n.max,s=n.initial,c=n.step;return i.a.createElement("div",{className:"slider-settings"},i.a.createElement("span",null,a)," ",i.a.createElement("br",null),i.a.createElement("span",null,r," "),i.a.createElement("input",{type:"range",className:"slider",value:t.value||s,id:"customRange1",initial:s,min:r,max:l,step:c,onChange:function(t){return e.handleSliderChange(t)}}),i.a.createElement("span",null," ",l),i.a.createElement("span",null," ",this.displayValue()))}}]),n}(a.Component));function ie(e,t,n){(ee.getState().views[t].zoomPct!==e||n)&&(ee.setState((function(a){return{views:a.views.map((function(a,i){if(i===parseInt(t)){var r=a,l=0;return n&&(l=1),r.zoomPct=e,r.reset=l,r}return a}))}})),ee.setState((function(e){return Object(O.a)({},e,{last:t})})))}var re=100;var le,se=function(e){return ee.subscribe((function(t){t&&t.views&&e.type>=0&&e.type<t.views.length&&(e.type,t.views[e.type].zoomZppPct)})),i.a.createElement("div",{className:"viewer-wrapper"},i.a.createElement(ae,{label:"Zoom",width:"40%",min:"50",max:"800",step:"10",initial:re,multiplier:"1",sliderValue:ie.bind(this),type:e.type}),i.a.createElement("button",{id:"resetZoomBtn",onClick:function(){ie("100",e.type,!0)}},"Reset Zoom"))},ce=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={image:"",zoom:0},e}return Object(c.a)(n,[{key:"init",value:function(){""===this.state.image&&this.props.api.getState().file.length>0&&this.setState({image:this.props.api.getState().file[this.props.api.getState().selected].image})}},{key:"render",value:function(){var e=this;return this.init(),this.props.api.subscribe((function(t){if(t){var n=t.file[t.selected].image;n&&(e.setState({image:n}),e.forceUpdate())}})),ee.subscribe((function(t){var n=t.views[e.props.type].zoomPct,a=t.views[e.props.type].zoomZppPct;e.state.zoom===n&&e.state.zoom===a||e.props.type!==t.last||e.setState((function(e){return{zoom:n}}))})),i.a.createElement("div",{className:"viewer-wrapper"},i.a.createElement(ne,{type:this.props.type,img:this.state.image,imageWidth:this.props.imageWidth}),i.a.createElement(se,{type:this.props.type}))}}]),n}(a.Component),oe=(le=ce,function(e){return i.a.createElement(le,Object.assign({api:G},e))}),ue=n(380),he=n(381),pe=n(382),fe=n(43);var me=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useMemo)((function(){return J.getState().channels[e.channel-1].uniforms}),[e]);return Object(fe.b)((function(t){n.current.uniforms.brightness.value=J.getState().channels[e.channel-1].uniforms.brightness.value,n.current.uniforms.contrast.value=J.getState().channels[e.channel-1].uniforms.contrast.value,n.current.uniforms.whitepoint.value=J.getState().channels[e.channel-1].uniforms.whitepoint.value,n.current.uniforms.blackpoint.value=J.getState().channels[e.channel-1].uniforms.blackpoint.value,n.current.uniforms.opacity.value=J.getState().channels[e.channel-1].uniforms.opacity.value,n.current.uniforms.image.value=J.getState().channels[e.channel-1].uniforms.image.value,n.current.uniforms.color.value=J.getState().channels[e.channel-1].uniforms.color.value})),i.a.createElement("mesh",{ref:t,scale:[1,1,1]},i.a.createElement("planeBufferGeometry",{attach:"geometry",args:[5,5]}),i.a.createElement("shaderMaterial",{attach:"material",ref:n,fragmentShader:"\n  uniform sampler2D image;\n\n  uniform float brightness;\n  uniform float contrast;\n\n  uniform float blackpoint;\n  uniform float whitepoint;\n  uniform float opacity;\n  uniform vec3 color;\n\n  varying vec2 vUv;\n\n  vec4 setBrightness(in vec4 clr, in float br) {\n    clr.rgb += br;\n    return clr;\n  }\n\n  vec4 setContrast(in vec4 clr, in float ct) {\n    if (ct > 0.0) {\n      clr.rgb = (clr.rgb - 0.5) / (1.0 - ct) + 0.5;\n    } else {\n      clr.rgb = (clr.rgb - 0.5) * (1.0 + ct) + 0.5;\n    }\n    return clr;\n  }\n\n  vec4 setWpBp(in vec4 clr, in float bp, in float wp) {\n    float _blackpoint = bp / 255.0;\n    float _whitepoint = bp == wp ? (255.0 / 0.00025) : (255.0 / (wp - bp));\n    clr.rgb = clr.rgb * _whitepoint - (_whitepoint * _blackpoint);\n    return clr;\n  }\n\n  vec4 setOpacity(in vec3 clr, in float opc) {\n    vec4 _color = vec4(clr, opc);\n    return _color;\n  }\n\n  vec4 sampleColor() {\n    // red with 50% opacity\n    return vec4(1.0, 0.0, 0.0, 0.5);\n  }\n\n  vec4 toGrayscale(in vec4 color)\n  {\n    float average = (color.r + color.g + color.b) / 3.0;\n    return vec4(average, average, average, 1.0);\n  }\n\n  vec4 colorize(in vec4 grayscale, in vec4 color)\n  {\n    return (grayscale * color);\n  }\n\n  vec4 applyColorize(in vec4 color, in vec4 overlay) {\n    vec4 grayscale = toGrayscale(color);\n    vec4 colorizedOutput = colorize(grayscale, overlay);\n    return colorizedOutput;\n  }\n\n  vec4 applyOverlay(in vec4 color, in vec4 overlay) {\n    return (vec4(mix(color.rgb, overlay.rgb, overlay.a), color.a));\n  }\n\n  void main() {\n    vec4 tColor = texture2D(image, vUv);\n    tColor = setBrightness(tColor, brightness);\n    tColor = setContrast(tColor, contrast);\n    tColor = setWpBp(tColor, blackpoint, whitepoint);\n\n    vec4 oColor = setOpacity(color, opacity);\n\n    // tColor = applyColorize(tColor, oColor);\n    tColor = applyOverlay(tColor, oColor);\n    gl_FragColor = tColor;\n  }\n",vertexShader:"\n  varying vec2 vUv;\n\n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }\n",uniforms:r}))},de={mesh:[i.a.createElement(me,{channel:"1"}),i.a.createElement(me,{channel:"2"}),i.a.createElement(me,{channel:"3"}),i.a.createElement(me,{channel:"4"})]},ve=Object(C.a)((function(e){return Object(O.a)({},de)})),be=Object(k.a)(ve,2),ge=(be[0],be[1],{canvas:[i.a.createElement(fe.a,{className:"image-canvas-1"},de.mesh[0]),i.a.createElement(fe.a,{className:"image-canvas-2"},de.mesh[1]),i.a.createElement(fe.a,{className:"image-canvas-3"},de.mesh[2]),i.a.createElement(fe.a,{className:"main-image-canvas"},de.mesh[3])]}),ye=Object(C.a)((function(e){return Object(O.a)({},ge)})),xe=Object(k.a)(ye,2),je=(xe[0],xe[1]),Ee=n(22),Ae=n(31),Se=n(18),we={annotations:[]},Oe={cachedAnnots:[]},ke=Object(C.a)((function(e){return Object(O.a)({},we)})),Ce=Object(k.a)(ke,2),ze=(Ce[0],Ce[1]),Me=Object(C.a)((function(e){return Object(O.a)({},Oe)})),Ne=Object(k.a)(Me,2),Le=(Ne[0],Ne[1]);function We(e,t,n){ze.setState((function(a){return Object(O.a)({},a,{annotations:[].concat(Object(Se.a)(a.annotations),[{group:e,label:t,class:n||"class1"}])})}))}function Be(){var e,t,n,a=ze.getState().annotations.length-1,i=ze.getState().annotations[a];!function(e){ze.setState((function(t){return t.annotations.splice(e,1)}))}(a),e=i.group,t=i.label,n=i.class,Le.setState((function(a){return Object(O.a)({},a,{cachedAnnots:[].concat(Object(Se.a)(a.cachedAnnots),[{group:e,label:t,class:n}])})}))}function Ie(){return ze.getState().annotations.length-1}function Ve(e,t){ze.setState((function(n){return{annotations:n.annotations.map((function(n,a){if(n.label===e){var i=n;return i.label=t,i}return n}))}}))}function De(e,t){ze.setState((function(n){return{annotations:n.annotations.map((function(n,a){if(n.class===e){var i=n;return i.class=t,i}return n}))}}))}function Ze(e){var t=Qe();t&&t._objects.length>0&&(!function(e,t){var n="";if(e&&t&&(lt(e),e)){var a=e._objects;if(a&&a.length>0)for(var i=0;a.length;i++){if(!a[i])return;if(1===i&&a[i].text)return n=a[i].text,a[i].text=t,Ve(n,t),Ke().renderAll(),void st(e)}}}(t,e),Ge(0))}function Ue(e){var t=Qe();t&&t._objects.length>0&&(!function(e,t){var n="";if(e&&t&&(lt(e),e)){var a=e._objects;if(a&&a.length>0)for(var i=0;a.length;i++){if(!a[i])return;if(2===i&&a[i].text)return n=a[i].text,a[i].text=t,De(n,t),Ke().renderAll(),void st(e)}}}(t,e),Ge(0))}var Te={menu:{displayon:!1,coords:{x:0,y:0},items:[{label:"Edit Annotation",callback:function(e,t){Pe(!1),Ge(1)}},{label:"Edit Class",callback:function(){Pe(!1),Ge(2)}}],objects:[],select:0,canvas:null}},Fe=Object(C.a)((function(e){return Object(O.a)({},Te)})),Ye=Object(k.a)(Fe,2),Re=(Ye[0],Ye[1]);function Ke(){return Re.getState().canvas}function Pe(e){Re.setState((function(t){return Object(O.a)({},t,{menu:Object(O.a)({},t.menu,{displayon:e})})}))}function Qe(){return Re.getState().menu.objects}function Ge(e){Re.setState((function(t){return Object(O.a)({},t,{menu:Object(O.a)({},t.menu,{select:e})})}))}var Je={classes:[{name:"Annotation Class 1",enabled:!1},{name:"Annotation Class 2",enabled:!1},{name:"Annotation Class 3",enabled:!1},{name:"Annotation Class 4",enabled:!1}]};function He(e){_e.setState((function(t){return Object(O.a)({},t,{classes:[].concat(Object(Se.a)(t.classes),[{name:e||"class1",enabled:!1}])})}))}var Xe=Object(C.a)((function(e){return Object(O.a)({},Je)})),qe=Object(k.a)(Xe,2),_e=(qe[0],qe[1]);function $e(){for(var e=function(){for(var e=[],t=ze.getState().annotations,n=0;n<t.length;n++)e.push(t[n].class);return e}(),t=0;t<e.length;t++){var n=e[t];tt(n)||(He(n),et(n))}}function et(e){_e.setState((function(t){return{classes:t.classes.map((function(t,n){if(t.name===e){var a=t;return a.enabled=!0,a}return t}))}}))}function tt(e){var t=_e.getState().classes;if(t&&0!==t.filter((function(t){return t.name===e})).length)return!0;return!1}function nt(){return _e.getState().classes}var at=["rgb(221, 153, 153, 0.7)","rgb(153, 221, 153, 0.7)","rgb(153, 153, 221, 0.7)","rgb(215, 215, 215, 0.7)"];function it(e){window.canvas=e,e.isMouseDown=!1,e.isDrawingMode=!0,e.freeDrawingBrush.color=at.purple,e.freeDrawingBrush.opacity=.1,e.freeDrawingBrush.width=10}function rt(e,t,n,a){var i=new Ae.fabric.Rect({left:t.left,top:t.top,width:t.width,height:t.height,fill:"rgb(255,255,255,.01)",stroke:t.color,strokeLineJoin:"round",strokeWidth:2,objectCaching:!1}),r=new Ae.fabric.Group([i]);r.on({moving:function(t){var n=t.target,a=n._objects[0];n.left<0?(n.set("left",a.strokeWidth/2),n.setCoords()):n.left+n.width>e.width&&(n.set("left",e.width-n.width-a.strokeWidth/2),n.setCoords()),n.top<0?(n.set("top",a.strokeWidth/2),n.setCoords()):n.top+n.height>e.height&&(n.set("top",e.height-n.height-a.strokeWidth/2),n.setCoords())}});var l="label"===n?n+=Ie()+1:n,s=new Ae.fabric.IText(l,{fontSize:16,originX:"left",originY:"top",fontFamily:"Arial",fontWeight:"bold",fill:"white",textBackgroundColor:t.color,top:r.top,left:r.left}),c=new Ae.fabric.IText(a,{fontSize:16,originX:"left",originY:"bottom",fontFamily:"Arial",fontWeight:"bold",fill:"white",textBackgroundColor:t.color,top:r.top+r.height,left:r.left});e&&(i.perPixelTargetFind=!0,e.add(r),e.setActiveObject(r),r.addWithUpdate(s),r.addWithUpdate(c),We(r,l,a))}function lt(e){var t=Ke(),n=e._objects;if(n.length>=2){e._restoreObjectsState(),t.remove(e);for(var a=0;a<n.length;a++)t.add(n[a]),t.item(t.size()-1).hasControls=!0;t.renderAll()}}function st(e){if(e&&3===e._objects.length){var t=e._objects,n=t[0],a=t[1],i=t[2],r=new Ae.fabric.Group([n,a,i]),l=Ke();l&&(l.add(r),l.remove(n),l.remove(a),l.remove(i),l.setActiveObject(r))}}function ct(e,t){for(var n=Ke(),a=n.getObjects(),i=0;i<a.length;i++){var r=a[i];if(r)if(r._objects){var l=r._objects[2];l&&l.text&&l.text===e&&(t?ot(r):(ut(r),n.discardActiveObject()))}}n.renderAll()}function ot(e){lt(e);for(var t=e._objects,n=0;n<t.length;n++){ht(t[n],!0)}st(e)}function ut(e){lt(e);for(var t=e._objects,n=0;n<t.length;n++){ht(t[n],!1)}st(e)}function ht(e,t){e.visible=t,e.dirty=!0,Ke().renderAll()}function pt(){var e,t=Ke(),n=Le.getState().cachedAnnots.length-1;if(n>=0){var a=Le.getState().cachedAnnots[Le.getState().cachedAnnots.length-1];rt(t,a.group,a.label,a.class),e=n,Le.setState((function(t){return t.cachedAnnots.splice(e,1)}))}}var ft,mt=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(Ee.a)(a)),a.changeLabel=a.changeLabel.bind(Object(Ee.a)(a)),a.changeClassLabel=a.changeClassLabel.bind(Object(Ee.a)(a)),a.state={text:{style:{position:"absolute",top:"0px",left:"0px"}},label:{text:"",style:{position:"absolute",top:"0px",left:"0px"}},button:{style:{position:"absolute",top:"0px",left:"0px"}}},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.style.top.match(/\d+/g))-40+"px",t=parseInt(this.props.style.left.match(/\d+/g))+105+"px";this.setState({text:{style:{position:this.props.style.position,top:this.props.style.top,left:this.props.style.left,width:"100px"}},label:{style:{position:this.props.style.position,top:e,left:this.props.style.left,width:"100px"},text:""},button:{style:{position:this.props.style.position,top:this.props.style.top,left:t}}})}},{key:"handleChange",value:function(e){if(e&&e.target&&e.target.value){var t=e.target.value;this.setState((function(e){return Object(O.a)({},e,{label:Object(O.a)({},e.label,{text:t})})}))}}},{key:"changeLabel",value:function(e){Ze(this.state.label.text)}},{key:"changeClassLabel",value:function(e){Ue(this.state.label.text)}},{key:"display",value:function(){return 1===this.props.select?i.a.createElement("div",null,i.a.createElement("div",{style:this.state.label.style}," ",i.a.createElement("p",null," Label: ")," "),i.a.createElement("input",{type:"text",value:this.state.label.text,style:this.state.text.style,onChange:this.handleChange}),i.a.createElement("button",{style:this.state.button.style,onClick:this.changeLabel}," Change Label ")):2===this.props.select?i.a.createElement("div",null,i.a.createElement("div",{style:this.state.label.style}," ",i.a.createElement("p",null," Class Name: ")," "),i.a.createElement("input",{type:"text",value:this.state.label.text,style:this.state.text.style,onChange:this.handleChange}),i.a.createElement("button",{style:this.state.button.style,onClick:this.changeClassLabel}," Change Class Name ")):void 0}},{key:"render",value:function(){return i.a.createElement("div",null,this.display())}}]),n}(i.a.Component),dt=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).contextRef=i.a.createRef(),a.returnMenu=a.returnMenu.bind(Object(Ee.a)(a)),a.state={items:[],coords:{x:0,y:0},style:{position:"absolute",top:"0px",left:"0px"},on:!1,select:0},a}return Object(c.a)(n,[{key:"updateCoords",value:function(e,t){this.state.coords.x!==e&&this.state.coords.y!==t&&this.setState((function(n){return Object(O.a)({},n,{coords:{x:e,y:t},style:Object(O.a)({},n.style,{top:"".concat(t,"px"),left:"".concat(e+5,"px")})})}))}},{key:"updateItems",value:function(e){this.state.items!==e&&this.setState((function(t){return Object(O.a)({},t,{items:e})}))}},{key:"updateDisplay",value:function(e){this.state.on!==e&&this.setState((function(t){return Object(O.a)({},t,{on:e})}))}},{key:"updateSelect",value:function(e){this.state.select!==e&&this.setState((function(t){return Object(O.a)({},t,{select:e})}))}},{key:"returnMenu",value:function(){var e=this;return Re.subscribe((function(t){e.updateItems(t.menu.items),e.updateCoords(t.menu.coords.x,t.menu.coords.y),e.updateDisplay(t.menu.displayon),e.updateSelect(t.menu.select)})),this.state.on?i.a.createElement("div",{className:"custom-context",id:"customcontext",style:this.state.style,ref:this.contextRef},Re.getState().menu.items.map((function(e,t,n){if(n.length>0){var a=e.label+"-button-wrapper";return i.a.createElement("div",{key:a},i.a.createElement("button",{onClick:e.callback}," ",e.label," "))}return null}))):1===this.state.select||2===this.state.select?i.a.createElement(mt,{style:this.state.style,select:this.state.select}):null}},{key:"render",value:function(){return i.a.createElement("div",{id:"cmenu"},this.returnMenu())}}]),n}(i.a.Component),vt="rectangle",bt="free draw",gt="select",yt={mouse:{x:0,y:0,down:!1},origin:{x:0,y:0},drawMode:vt,canvas:null},xt=Object(C.a)((function(e){return Object(O.a)({},yt)})),jt=Object(k.a)(xt,2),Et=(jt[0],jt[1]);function At(e){Et.setState((function(t){return Object(O.a)({},t,{drawMode:e})})),Et.getState().canvas.isDrawingMode=e===bt}function St(){At(gt)}function wt(e,t){Et.getState().canvas.isDrawingMode?it(Et.getState().canvas):function(e,t){!function(e,t){Et.setState((function(n){return Object(O.a)({},n,{origin:{x:e-Et.getState().canvas._offset.left,y:t-Et.getState().canvas._offset.top}})}))}(e,t)}(e,t)}function Ot(e,t,n){Et.getState().drawMode===gt?At(vt):Et.getState().drawMode===vt&&kt(e,t,n)}function kt(e,t,n){Ct(e,t);var a,i=Et.getState();if(i.origin.x&&i.origin.y&&e&&t){var r=i.mouse.x-i.origin.x;if(Math.abs(r)>=10){var l={width:r,height:i.mouse.y-i.origin.y,top:i.origin.y,left:i.origin.x,color:n};rt(Et.getState().canvas,l,"label","class1")}a=Et.getState().canvas.getActiveObjects()[0],Re.setState((function(e){return Object(O.a)({},e,{menu:Object(O.a)({},e.menu,{objects:a})})}))}}function Ct(e,t){var n=Et.getState().canvas._offset.left,a=Et.getState().canvas._offset.left+Et.getState().canvas.width,i=Et.getState().canvas._offset.top,r=Et.getState().canvas._offset.top+Et.getState().canvas.height,l=e<n?n:e>a?a:e-n,s=t<i?i:t>r?r:t-i;Et.setState((function(e){return{mouse:{x:l,y:s}}}))}function zt(e,t){if(!Re.getState().menu.displayon){Pe(!0);var n=Et.getState().canvas;!function(e,t){Re.setState((function(n){return Object(O.a)({},n,{menu:Object(O.a)({},n.menu,{coords:{x:e,y:t}})})}))}(e-n._offset.left,t-n._offset.top)}}var Mt=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).canvasRef=i.a.createRef(),a.handleMouseDown=a.handleMouseDown.bind(Object(Ee.a)(a)),a.handleMouseUp=a.handleMouseUp.bind(Object(Ee.a)(a)),a.handleMouseDoubleClick=a.handleMouseDoubleClick.bind(Object(Ee.a)(a)),a.handleDrag=a.handleDrag.bind(Object(Ee.a)(a)),a.selectClass1=a.selectClass1.bind(Object(Ee.a)(a)),a.showAll=a.showAllClasses.bind(Object(Ee.a)(a)),a.handleMoveAnnotation=a.handleMoveAnnotation.bind(Object(Ee.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e;(ft=new Ae.fabric.Canvas(this.canvasRef.current,{fireRightClick:!0})).on({"mouse:down":this.handleMouseDown,"mouse:up":this.handleMouseUp,"mouse:dblclick":this.handleMouseDoubleClick,"object:moving":this.handleMoveAnnotation,"object:rotating":this.handleDrag,"object:scaling":this.handleDrag}),e=ft,Re.setState((function(t){return Object(O.a)({},t,{canvas:e})})),function(e){Et.setState((function(t){return{canvas:e}}))}(ft)}},{key:"handleDrag",value:function(e){St()}},{key:"handleMoveAnnotation",value:function(e){At(gt)}},{key:"handleLeftMouseDown",value:function(e){var t=Et.getState().drawMode;t===vt?wt(e.e.clientX,e.e.clientY):t===bt&&it(ft)}},{key:"handleRightMouseDown",value:function(e){zt(e.e.clientX,e.e.clientY)}},{key:"handleLeftMouseUp",value:function(e){Ot(e.e.clientX,e.e.clientY,at[this.props.channel])}},{key:"handleRightMouseUp",value:function(e){}},{key:"handleMouseDown",value:function(e){3===e.button?this.handleRightMouseDown(e):this.handleLeftMouseDown(e)}},{key:"handleMouseUp",value:function(e){3===e.button?this.handleRightMouseUp(e):this.handleLeftMouseUp(e)}},{key:"handleObjectSelect",value:function(e){}},{key:"handleObjectResize",value:function(e){}},{key:"handleMouseDoubleClick",value:function(e){St()}},{key:"displayMenu",value:function(){if(ft&&ft.getActiveObjects().length>0)return i.a.createElement(dt,null)}},{key:"selectClass1",value:function(){ct("class1"),this.forceUpdate()}},{key:"showAllClasses",value:function(){!function(){for(var e=Ke().getObjects(),t=0;t<e.length;t++){var n=e[t];n&&ot(n)}}(),this.forceUpdate()}},{key:"render",value:function(){var e=this;return ze.subscribe((function(e){e&&function(){var e=Et.getState().annotations;if(e.length>Et.getState().canvas.getObjects().length){var t=e[e.length-1],n={left:parseInt(t.rect.left),top:parseInt(t.rect.top),width:parseInt(t.rect.width),height:parseInt(t.rect.height)};rt(Et.getState().canvas,n,t.label,t.class)}}()})),Re.subscribe((function(t){e.forceUpdate()})),i.a.createElement("div",{className:"annotationLayer",onContextMenu:function(e){return e.preventDefault()},style:{borderColor:at[this.props.channel],borderWidth:2,borderStyle:"solid",opacity:this.props.opacity,zIndex:this.props.zIndex}},i.a.createElement("canvas",{ref:this.canvasRef,width:500,height:500}),this.displayMenu())}}]),n}(i.a.Component),Nt=n(15),Lt=n.n(Nt),Wt=n(24),Bt=function(){function e(t){Object(s.a)(this,e),this.channel=t.channel,this.segmentation=t.segmentation,this.segments={},this.requests=[]}return Object(c.a)(e,[{key:"renderChannelSlice",value:function(){var e=Object(Wt.a)(Lt.a.mark((function e(t,n,a){var i,r,l,s;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,e.next=3,i.channel.grayImageSlice(n,a,!1,!1);case 3:return r=e.sent,e.next=6,new Uint32Array(r.data.buffer);case 6:for(l=e.sent,s=l.length-1;s>=0;s--)l[s]=16776960&l[s]&&l[s];return e.next=10,t.putImageData(r,0,0);case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(Wt.a)(Lt.a.mark((function e(t,n,a){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadVolume(this.channel,t,n,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"loadVolume",value:function(){var e=Object(Wt.a)(Lt.a.mark((function e(t,n,a,i){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.insertImageData(n,a,0,0,i);case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}()}]),e}(),It=n(379),Vt={loaded:0},Dt=Object(C.a)((function(e){return Object(O.a)({},Vt)})),Zt=Object(k.a)(Dt,2),Ut=(Zt[0],Zt[1]);function Tt(e,t,n,a,i,r){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(Wt.a)(Lt.a.mark((function e(t,n,a,i,r,l){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==l){e.next=5;break}return e.next=3,Qt(t,n,a,i,r[0]);case 3:e.next=6;break;case 5:Jt(t,n,a,i,r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e,t,n,a,i){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(Wt.a)(Lt.a.mark((function e(t,n,a,i,r){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&n&&i)){e.next=3;break}return e.next=3,n.renderChannelSlice(t,i[r],a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e,t,n){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(Wt.a)(Lt.a.mark((function e(t,n,a){var i,r,l;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<n.length)){e.next=11;break}return r=n[i],(l=Math.round(i/n.length*100))%10===0&&Ut.setState({loaded:l}),console.log("loading ",i,"/",n.length),e.next=8,t.load(r,a,i);case 8:i++,e.next=1;break;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qt(e,t,n,a,i){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(Wt.a)(Lt.a.mark((function e(t,n,a,i,r){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&r.pages&&r.pages.length>0)){e.next=3;break}return e.next=3,Kt(n,r.pages,r.image.width);case 3:Yt(t,n,0,a,i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e,t,n,a,i){for(var r=0;r<i.length;r++){var l=i[r];if(l&&l.pages&&l.pages.length>0){for(var s=l.pages,c=0;c<s.length;c++){var o=s[c];t.load(this.state.cntxt,o,l.image.width,r)}Yt(e,t,0,n,a)}}}var Ht=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={loaded:0},e}return Object(c.a)(n,[{key:"display",value:function(){return 100!==this.state.loaded?i.a.createElement(It.a,{striped:!0,bar:!0,value:this.state.loaded}," ",this.state.loaded,"% "):i.a.createElement("div",null," ")}},{key:"render",value:function(){var e=this;return Ut.subscribe((function(t){e.state.loaded=t.loaded})),this.display()}}]),n}(a.Component),Xt=function(){function e(t){Object(s.a)(this,e),this.context=t,this.cache=null}return Object(c.a)(e,[{key:"getImageData",value:function(e,t){return this.cache&&this.cache.width===e&&this.cache.height===t||(this.cache=this.context.createImageData(e,t)),this.cache}}]),e}(),qt=function(){function e(t){Object(s.a)(this,e),this.bytes=t.bytes||1,this.size=t.size||{x:256,y:256,z:256},this.canvas_context=t.context,this.cube=this.materialize(),this.cached_imgdata=new Xt(this.canvas_context),this.clean=!0,this.loaded=!1,this.faces={x:["y","z"],y:["x","z"],z:["x","y"]}}return Object(c.a)(e,[{key:"faceDimensions",value:function(e){var t=this.faces[e];return[this.size[t[0]],this.size[t[1]]]}},{key:"materialize",value:function(){var e=this.arrayType(),t=this.size;return new e(t.x*t.y*t.z)}},{key:"insertImageData",value:function(e,t,n,a,i){var r=new Uint32Array(e.buffer),l={true:{1:255,2:65535,4:4294967295},false:{1:4278190080,2:4294901760,4:4294967295}}[this.isLittleEndian()][this.bytes],s=0,c=0,o=0|this.size.x,u=i*this.size.x*this.size.y|0;for(c=t-1;c>=0;c--)for(s=t-1;s>=0;s--)this.cube[n+s+o*(a+c)+u]=r[s+c*t]&l;return this.clean=!1,this}},{key:"slice",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this;if(t<0||t>=this.size[e])throw new Error(t+" is out of bounds.");var i=a.size.x,r=a.size.y,l=a.size.z,s=i*r,c=this.faces[e],o=this.arrayType();if("z"===e){var u=t*s*this.bytes;if(n){var h=a.cube.buffer.slice(u,u+s*this.bytes);return new o(h)}return new o(a.cube.buffer,u,s)}var p=new o(this.size[c[0]]*this.size[c[1]]),f=p.length-1;if("x"===e)for(var m=l-1;m>=0;--m)for(var d=r-1;d>=0;--d)p[f]=a.cube[t+i*d+s*m],--f;else if("y"===e)for(var v=i*t,b=l-1;b>=0;--b)for(var g=i-1;g>=0;--g)p[f]=a.cube[g+v+s*b],--f;return p}},{key:"grayImageSlice",value:function(){var e=Object(Wt.a)(Lt.a.mark((function e(t,n){var a,i,r,l,s,c,o,u,h=arguments;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>2&&void 0!==h[2]&&h[2],i=!(h.length>3&&void 0!==h[3])||h[3],e.next=4,this.slice(t,n,!1);case 4:return r=e.sent,e.next=7,this.faceDimensions(t);case 7:if(l=e.sent,!i){e.next=14;break}return e.next=11,this.canvas_context.createImageData(l[0],l[1]);case 11:e.t0=e.sent,e.next=17;break;case 14:return e.next=16,this.cached_imgdata.getImageData(l[0],l[1]);case 16:e.t0=e.sent;case 17:if(s=e.t0,c=new Uint32Array(s.data.buffer),o=this.isLittleEndian()?4278190080:255,u=0,a)for(u=r.length-1;u>=0;u--)c[u]=r[u]|r[u]<<8|r[u]<<16|(r[u]&&o);else for(u=r.length-1;u>=0;u--)c[u]=r[u]|r[u]<<8|r[u]<<16|o;return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isLittleEndian",value:function(){var e=new Uint32Array(1),t=new Uint8Array(e.buffer);e[0]=255;var n=255===t[0];return this.isLittleEndian=function(){return n},n}},{key:"getRenderMaskSet",value:function(){return{true:{r:255,g:65280,b:16711680,a:4278190080},false:{r:4278190080,g:16711680,b:65280,a:255}}[this.isLittleEndian()]}},{key:"arrayType",value:function(){var e={1:Uint8ClampedArray,2:Uint16Array,4:Uint32Array}[this.bytes];if(void 0===e)throw new Error(this.bytes+" is not a valid typed array byte count.");return e}}]),e}(),_t=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).canvas=i.a.createRef(),a.state={axes:["x","y","z"],axisIdx:e.axis,sliceIdx:0,cntxt:null},a.fileLength=0,a.length=0,a.type=1,a.cube={x:256,y:256,z:256},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(t){return{cntxt:e.canvas.current.getContext("2d")}}))}},{key:"updateForFile",value:function(){var e=Object(Wt.a)(Lt.a.mark((function e(t){var n;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.file){e.next=8;break}if(n=t.file.length-1,!(t.file.length>0&&t.file[n].pages&&t.file[n].pages.length>0&&t.file.length!==this.fileLength)){e.next=8;break}return 0===this.type?this.fileLength=this.length=t.file.length:1===this.type&&(this.fileLength=t.file.length,this.length=t.file[n].pages.length),this.cube.x=this.cube.y=this.cube.z=Math.max(256,this.length),this.volume=new Bt({channel:new qt({bytes:1,size:this.cube,context:this.state.cntxt})}),e.next=8,Tt(this.state.cntxt,this.volume,this.state.axes,2,t.file,this.type);case 8:this.forceUpdate();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"render",value:function(){var e=this;return G.subscribe((function(t){e.updateForFile(t)})),i.a.createElement("div",{width:"500px",height:"500px"},i.a.createElement("canvas",{id:"canvas-1",ref:this.canvas,width:"500px",height:"500px"}),i.a.createElement(Ht,null))}}]),n}(a.Component),$t=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"altView",value:function(){return i.a.createElement(ue.a,{style:v},i.a.createElement(he.a,null,i.a.createElement(pe.a,null," Image View "),i.a.createElement(oe,{imageWidth:g,type:"0"})),i.a.createElement("br",null))}},{key:"canvasView",value:function(){var e=i.a.createElement(_t,{axis:"2",className:"annot-view",alt:"main-canvas",width:"500px",height:"500px",channel:"4"});return i.a.createElement(ue.a,{style:v},i.a.createElement(he.a,null,i.a.createElement(pe.a,null," Image View "),i.a.createElement("div",{id:"canvasContainer"},i.a.createElement("div",{id:"main-canvas-view",style:y},e),i.a.createElement(Mt,{zIndex:5,channel:3}))),i.a.createElement("br",null))}},{key:"channelViews",value:function(){var e,t,n,a,r,l,s,c,o=L.getState().lastSelected;return L.getState().channels[0].selected&&(console.log("displaying 1"),e=je.getState().canvas[0],s="1"===o?10:4,c="1"===o?1:.5,a=i.a.createElement(Mt,{zIndex:s,opacity:c,channel:0})),L.getState().channels[1].selected&&(console.log("displaying 2"),t=je.getState().canvas[1],s="2"===o?10:6,c="2"===o?1:.5,r=i.a.createElement(Mt,{zIndex:s,opacity:c,channel:1})),L.getState().channels[2].selected&&(console.log("displaying 3"),n=je.getState().canvas[2],s="3"===o?10:8,c="3"===o?1:.5,l=i.a.createElement(Mt,{zIndex:s,opacity:c,channel:2})),i.a.createElement(ue.a,{style:v},i.a.createElement(he.a,null,i.a.createElement(pe.a,null," Image View "),i.a.createElement("div",{id:"canvasContainer"},i.a.createElement("div",{style:x},e),a,i.a.createElement("div",{style:j},t),r,i.a.createElement("div",{style:E},n," "),l)),i.a.createElement("br",null))}},{key:"display",value:function(){return L.getState().channels[0].selected||L.getState().channels[1].selected||L.getState().channels[2].selected?this.channelViews():this.canvasView()}},{key:"render",value:function(){var e=this;return L.subscribe((function(t){e.forceUpdate()})),i.a.createElement("div",{className:"main-view",style:f},this.display())}}]),n}(i.a.Component),en=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).canvas=i.a.createRef(),a.state={axes:["x","y","z"],axisIdx:e.axis,sliceIdx:0,cntxt:null},a.fileLength=0,a.length=0,a.type=1,a.cube={x:256,y:256,z:256},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(t){return{cntxt:e.canvas.current.getContext("2d")}}))}},{key:"updateForFile",value:function(){var e=Object(Wt.a)(Lt.a.mark((function e(t){var n;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.file){e.next=8;break}if(n=t.file.length-1,!(t.file.length>0&&t.file[n].pages&&t.file[n].pages.length>0&&t.file.length!==this.fileLength)){e.next=8;break}return 0===this.type?this.fileLength=this.length=t.file.length:1===this.type&&(this.fileLength=t.file.length,this.length=t.file[n].pages.length),this.cube.x=this.cube.y=this.cube.z=Math.max(256,this.length),this.volume=new Bt({channel:new qt({bytes:1,size:this.cube,context:this.state.cntxt})}),e.next=8,Tt(this.state.cntxt,this.volume,this.state.axes,this.state.axisIdx,t.file,this.type);case 8:this.forceUpdate();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"slice",value:function(e){this.setState((function(t){return Object(O.a)({},t,{sliceIdx:e})})),Yt(this.state.cntxt,this.volume,e,this.state.axes,this.state.axisIdx),this.forceUpdate()}},{key:"nextSlice",value:function(e){var t;t=e?this.clamp(this.state.sliceIdx-1,0,Math.max(0,this.length-1)):this.clamp(this.state.sliceIdx+1,0,Math.max(0,this.length-1)),this.slice(t)}},{key:"sliderValueSlice",value:function(e){this.slice(e)}},{key:"nextAxis",value:function(e){var t;t=e?(this.state.axisIdx+2)%this.state.axes.length:(this.state.axisIdx+1)%this.state.axes.length,this.setState((function(e){return Object(O.a)({},e,{axisIdx:t})})),Yt(this.state.cntxt,this.volume,this.state.sliceIdx,this.state.axes,t),this.forceUpdate()}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"render",value:function(){var e=this;return G.subscribe((function(t){e.updateForFile(t)})),i.a.createElement("div",null,i.a.createElement("canvas",{id:"canvas-1",ref:this.canvas,width:"100%",height:"100%"}),i.a.createElement(Ht,null),i.a.createElement("div",{className:"slice-slider-container"},i.a.createElement(ae,{label:"",width:"40%",min:"0",max:Math.max(this.length-1,0),step:"1",initial:"0",multiplier:"1",raw:"1",sliderValue:this.sliderValueSlice.bind(this)}),i.a.createElement("button",{id:"resetSliceBtn",onClick:function(){e.nextSlice(!0)}},"<<"),i.a.createElement("button",{id:"resetSliceBtn",onClick:function(){e.slice(0)}},"Go to Slice 0"),i.a.createElement("button",{id:"resetSliceBtn",onClick:function(){e.nextSlice(!1)}},">>"),i.a.createElement("div",null," Slice: ",this.state.sliceIdx," ")))}}]),n}(a.Component),tn=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).view1=i.a.createElement(en,{axis:"2"}),e.view2=i.a.createElement(en,{axis:"0"}),e.view3=i.a.createElement(en,{axis:"1"}),e}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"card-axis-xy",style:f},i.a.createElement(ue.a,{style:v},i.a.createElement(he.a,null,i.a.createElement(pe.a,null," Axis XY "),this.view1))),i.a.createElement("br",null),i.a.createElement("div",{className:"card-axis-yz",style:f},i.a.createElement(ue.a,{style:v},i.a.createElement(he.a,null,i.a.createElement(pe.a,null," Axis YZ "),this.view2))),i.a.createElement("br",null),i.a.createElement("div",{className:"card-axis-xz",style:f},i.a.createElement(ue.a,{style:v},i.a.createElement(he.a,null,i.a.createElement(pe.a,null," Axis XZ "),this.view3))))}}]),n}(i.a.Component),nn=(n(183),n(156)),an=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).futureClass=[],a.futureAnnotClass=[],a.state={classes:[],annotClasses:[],enables:[]},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e){for(var t=0;t<e.classes;t++){var n=e.classes[t];if(n&&this.state.classes[t]!==n.name&&this.state.enables[t]!==n.enabled)return!0}for(t=0;t<e.annotClasses;t++){var a=e.annotClasses[t];if(a&&this.state.annotClasses[t]!==a)return!0}return!1}},{key:"filter",value:function(e,t){var n,a,i=nt();n=e,_e.setState((function(e){return{classes:e.classes.map((function(e,t){if(t===n){var a=e;return a.enabled=!e.enabled,a}return e}))}})),ct((a=i[e]).name,a.enabled)}},{key:"updateAnnotClasses",value:function(e){for(var t=this,n=function(){var n=e[a];t.state.annotClasses.includes(n.class)||t.futureAnnotClass.includes(n.class)||(t.futureAnnotClass.push(n.class),t.setState((function(e){return Object(O.a)({},e,{annotClasses:[].concat(Object(Se.a)(e.annotClasses),[n.class])})})))},a=0;a<e.length;a++)n()}},{key:"updateClasses",value:function(e){for(var t=this,n=function(){var n=a,i=e[n];t.state.classes.includes(i.name)||t.futureClass.includes(i.name)||(t.futureClass.push(i.name),t.setState((function(e){return Object(O.a)({},e,{classes:[].concat(Object(Se.a)(e.classes),[i.name])})}))),t.setState((function(e){return{enables:e.enables.map((function(e,t){return t===n?i.enabled:e}))}}))},a=0;a<e.length;a++)n()}},{key:"display",value:function(){for(var e=this,t=nt(),n=[],a=function(){var a=r,l=t[a].enabled;n.push(i.a.createElement(nn.a,{outline:!0,color:"primary",id:"annot1Btn",onClick:function(){e.filter(a,!l)},active:l},t[a].name))},r=0;r<t.length;r++)a();return i.a.createElement("div",null,i.a.createElement("div",{className:"annotations-class",style:f},i.a.createElement(ue.a,{style:v},i.a.createElement(he.a,null,i.a.createElement(pe.a,null," Annotated Class Selection ")),n)),i.a.createElement("br",null))}},{key:"render",value:function(){var e=this;return ze.subscribe((function(t){t&&($e(),e.updateAnnotClasses(t.annotations))})),_e.subscribe((function(t){t&&e.updateClasses(t.classes)})),i.a.createElement("div",null,this.display())}}]),n}(i.a.Component),rn=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).classicImage=function(e,t){return i.a.createElement("div",{style:S,key:e.name},i.a.createElement("div",{style:w},i.a.createElement("img",{src:e.image,style:e.style,alt:e.name,onClick:function(){return a.setSelected(t)}})))},a.allThumbs=function(){var e=[];return G.getState().file&&G.getState().file.map((function(t,n){return"image/png"===t.type&&e.push(a.classicImage(t,n)),null})),i.a.createElement("div",null,e)},a.allTiffsCanvas=function(){return a.canvas&&a.loadTiff(a.canvas.getContext("2d")),i.a.createElement("div",null,i.a.createElement("canvas",{ref:a.canvasRef,width:"1000px",height:"1000px",margin:"0px",id:"tiff-canvas"}))},a.selected=0,a.files=[],a.canvasRef=i.a.createRef(),a.canvas=null,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.canvas=new Ae.fabric.Canvas(this.canvasRef.current)}},{key:"setSelected",value:function(e){this.selected!==e&&(G.setState((function(t){return Object(O.a)({},t,{selected:e})})),this.selected=e)}},{key:"updateForFile",value:function(e){if(e&&e.file.length>0&&e.file.length!==this.files.length){for(var t=e.file.filter((function(e){return"image/tiff"===e.type})),n=this.files.length;n<t.length;n++){var a=t[t.length-1],i={rgba:a.rgba,width:a.image.width,height:a.image.height,page:a.pages[0],name:a.name,type:a.type};this.files.push(i)}this.forceUpdate()}}},{key:"shrinkTiff",value:function(e,t,n){var a=t.width,i=t.height,r=document.createElement("canvas");r.width=a,r.height=i,r.getContext("2d").putImageData(t,0,0);var l=60*n;e.drawImage(r,l,0,50,50)}},{key:"loadTiff",value:function(e){for(var t=0;t<this.files.length;t++){var n=this.files[t],a=null;if(n&&(a=n.page),a&&n.width>0&&n.height>0){for(var i=e.createImageData(n.width,n.height),r=0;r<a.length;r++)i.data[r]=a[r];this.shrinkTiff(e,i,t)}}}},{key:"display",value:function(){return i.a.createElement("div",null,this.allThumbs(),this.allTiffsCanvas())}},{key:"render",value:function(){var e=this;return G.subscribe((function(t){e.updateForFile(t),e.forceUpdate()})),i.a.createElement("div",{id:"thumbsContainer"},this.display())}}]),n}(i.a.Component),ln=n(383),sn=n(388),cn=n(389),on=n(390),un=n(384),hn=n(162),pn={img_name:"",annotations:[]},fn={},mn=Object(C.a)((function(e){return Object(O.a)({},L.getState().dev?fn:pn)})),dn=Object(k.a)(mn,2),vn=(dn[0],dn[1]),bn=n(158),gn=n.n(bn),yn=n(72),xn=n.n(yn);function jn(e){var t=new FileReader;t.onload=function(){var e=t.result;gn()({noheader:!0,output:"json"}).fromString(e).then((function(e){var t=[];e.forEach((function(n,a){if(0!==a){var i={};Object.keys(n).forEach((function(t){var a=n[t],r=e[0][t];i[r]=a})),t.push(i)}})),kn(t)}))},t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.readAsText(e,"ISO-8859-1")}function En(e){var t=new FileReader;t.onload=function(){kn(JSON.parse(t.result).annotations)},t.readAsText(e)}function An(e){var t=new FileReader;e&&(t.onload=function(){"image/tiff"===e.type&&console.debug("importer::importTiff() - Loading TIFF image...",e.name)},t.onloadend=function(t){console.debug("importer::importTiff() - Parsing TIFF image...",e.name),function(e,t){for(var n=[],a=xn.a.decode(t),i=0;i<a.length;i++){var r=i;xn.a.decodeImage(t,a[r]);var l=xn.a.toRGBA8(a[r]);n.push(l)}var s=new Image(a[0].width,a[0].height);!function(e,t,n){U.setState((function(a){return{file:a.file.map((function(a,i){if(a.name===e){var r=a;return r.pages=t,r.image=n,r}return a}))}}))}(e,n,s)}(e.name,t.target.result)},t.onprogress=function(){console.log("importer::importTiff()","Still Loading...",e.name)},t.readAsArrayBuffer(e))}var Sn={display:"block",width:"auto",height:"100%"},wn=0;function On(e){return e&&e.rect.left>0&&e.rect.left<1e3&&e.rect.top>0&&e.rect.top<1e3&&e.rect.width>0&&e.rect.width<1e3&&e.rect.height>0&&e.rect.height<1e3&&e.label.length>0}function kn(e){U.setState((function(t){return t.file.map((function(t,n){if(n===wn){var a=t;return t.json=e,a}return t}))})),function(e){vn.setState((function(t){return{img_name:U.getState().file[wn].name,annotations:t.annotations.concat(e)}}));for(var t=0;t<e.length;t++)On(e[t])&&We(e[t].rect,e[t].label)}(e)}function Cn(e){"image/png"===e.type?function(e){U.setState((function(t){return Object(O.a)({},t,{file:[].concat(Object(Se.a)(t.file),[{name:e.name,image:e.preview,style:Sn,type:e.type,texture:F(e.preview)}]),size:t.size+1})})),wn=U.getState().size-1}(e):"image/tiff"===e.type?function(e){U.setState((function(t){return Object(O.a)({},t,{file:[].concat(Object(Se.a)(t.file),[{name:e.name,image:e.preview,style:Sn,type:e.type}]),size:t.size+1})})),An(e),wn=U.getState().size-1}(e):"text/csv"===e.type?function(e){U.setState((function(t){return Object(O.a)({},t,{file:[].concat(Object(Se.a)(t.file),[{name:e.name,type:e.type,json:jn(e)}]),size:t.size+1})})),wn=U.getState().size-1}(e):"application/json"===e.type&&function(e){U.setState((function(t){return Object(O.a)({},t,{file:[].concat(Object(Se.a)(t.file),[{name:e.name,type:e.type,json:En(e)}]),size:t.size+1})})),wn=U.getState().size-1}(e)}function zn(e){"image/png"===e.type?function(e){U.setState((function(t){return Object(O.a)({},t,{file:[{name:e.name,image:e.preview,style:Sn,type:e.type,texture:F(e.preview)}],size:t.size+1})})),wn=U.getState().size-1}(e):"image/tiff"===e.type?function(e){U.setState((function(t){return Object(O.a)({},t,{file:[].concat(Object(Se.a)(t.file),[{name:e.name,image:e.preview,style:Sn,type:e.type}]),size:t.size+1})})),An(e),wn=U.getState().size-1}(e):"text/csv"===e.type?function(e){U.setState((function(t){return Object(O.a)({},t,{file:[{name:e.name,type:e.type,json:jn(e)}],size:t.size+1})})),wn=U.getState().size-1}(e):"application/json"===e.type&&function(e){U.setState((function(t){return Object(O.a)({},t,{file:[{name:e.name,type:e.type,json:En(e)}],size:t.size+1})})),wn=U.getState().size-1}(e)}function Mn(e){var t=Object(a.useState)([]),n=Object(k.a)(t,2),r=n[0],l=n[1],s=Object(hn.a)({accept:"image/png, image/tiff, .csv, .json",onDrop:function(e){l(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),c=s.getRootProps,o=s.getInputProps,u=r.map((function(e){return function(e){var t=!1;return U.setState((function(n){n.file&&(0===n.file.filter((function(t){return t.name===e})).length&&(t=!0))})),t}(e.name)&&(0===U.getState().size?zn(e):Cn(e)),null}));return Object(a.useEffect)((function(){return function(){r.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[r]),i.a.createElement("section",{className:"container"},i.a.createElement("div",c({className:"dropzone"}),i.a.createElement("input",o()),i.a.createElement("p",null," ",e.name," "),u))}function Nn(){var e=document.createElement("a"),t=new Blob([JSON.stringify(ze.getState())],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="annotations.txt",document.body.appendChild(e),e.click()}var Ln=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement(ln.a,{size:m.size,vertical:m.vertical,style:m},i.a.createElement(sn.a,null,i.a.createElement(cn.a,{caret:!0,color:"primary"},"File"),i.a.createElement(on.a,null,i.a.createElement(un.a,null,i.a.createElement(nn.a,{outline:!0,color:"primary",className:"export-btn",onClick:Nn}," ","Export Annotations"," ")))),i.a.createElement(sn.a,null,i.a.createElement(cn.a,{caret:!0,color:"primary"},"Draw"),i.a.createElement(on.a,null,i.a.createElement(nn.a,{outline:!0,color:"primary",className:"draw-rectangle-btn",onClick:function(e){return At(vt)}},"Rectangle"),i.a.createElement(nn.a,{outline:!0,color:"primary",className:"draw-rectangle-btn",onClick:function(e){return At(bt)}},"Freehand"))),i.a.createElement(sn.a,null,i.a.createElement(cn.a,{caret:!0,color:"primary"},"Edit"),i.a.createElement(on.a,null,i.a.createElement(nn.a,{outline:!0,color:"primary",className:"draw-rectangle-btn",onClick:function(e){return function(){var e=Ke(),t=Ie();return t>=0&&(e.getObjects().map((function(n,a){return a===t&&e.remove(n),null})),Be()),null}()}},"Undo"),i.a.createElement(nn.a,{outline:!0,color:"primary",className:"draw-rectangle-btn",onClick:function(e){return pt()}},"Redo"))),i.a.createElement(nn.a,{outline:!0,color:"primary",className:"import-btn"}," ",i.a.createElement(Mn,{name:"Import File"})," "))}}]),n}(i.a.Component),Wn=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).file_size=0,e.annotations={},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return U.subscribe((function(t){e.file_size!==t.size&&(e.file_size=t.size,console.log("fileApi - files: ",t.file))})),vn.subscribe((function(t){e.annotations!==t.annotations&&(e.annotations=t.annotations,console.log("annotApi - annotations: ",t.annotations))})),i.a.createElement("div",{id:"annotator-div"})}}]),n}(i.a.Component),Bn=n(391);function In(e){return J.getState()&&J.getState().channels.length>0&&e>=1&&J.getState().channels[e-1]&&J.getState().channels[e-1].uniforms.contrast&&J.getState().channels[e-1].uniforms.brightness&&J.getState().channels[e-1].uniforms.color}function Vn(e,t){var n=e.name,a=e.image,i=e.texture;""===i&&(i="image/tiff"===e.type?Y(a):F(a));var r=J.getState().channels[t-1];r.name===n&&r.imagepath===a&&r.uniforms.image.value===i||function(e,t,n,a){J.setState((function(i){return{channels:i.channels.map((function(i,r){if(r===a-1){var l=i;return l.name=t,l.imagepath=n,l.uniforms.image.value=e,l}return i}))}}))}(i,n,a,t)}function Dn(e,t){return In(t)?(e!==J.getState().channels[t-1].uniforms.brightness.value&&function(e,t){J.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.brightness.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::UpdateBrighness() - null state",J.getState()," channel: ",t," value: ",e),!1)}function Zn(e,t){return In(t)?(e!==J.getState().channels[t-1].uniforms.contrast.value&&function(e,t){J.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.contrast.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::updateContrast() - null state",J.getState()," channel: ",t," value: ",e),!1)}function Un(e,t){return In(t)?(e!==J.getState().channels[t-1].uniforms.whitepoint.value&&function(e,t){J.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.whitepoint.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::updateWhitepoint() - null state",J.getState()," channel: ",t," value: ",e),!1)}function Tn(e,t){return In(t)?(e!==J.getState().channels[t-1].uniforms.blackpoint.value&&function(e,t){J.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.blackpoint.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::updateBlackpoint() - null state",J.getState()," channel: ",t," value: ",e),!1)}function Fn(e,t){return In(t)?(e!==J.getState().channels[t-1].uniforms.opacity.value&&function(e,t){J.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.opacity.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::updateOpacity() - null state",J.getState()," channel: ",t," value: ",e),!1)}function Yn(e,t){var n=new T.Color(e.color);return In(t)?(e!==J.getState().channels[t-1].uniforms.color.value&&(console.log("CanvasControl::updateColor() - value",e,n),function(e,t){J.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return console.log("updateColorUniform: ",e),i.uniforms.color.value=e,i}return n}))}}))}(n,t)),!0):(console.log("CanvasControl::updateColor() - null state",J.getState()," channel: ",t," value: ",e),!1)}var Rn=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"updateForFile",value:function(e){e&&Vn(e.file[e.selected],this.props.channel),this.forceUpdate()}},{key:"updateForControls",value:function(e){this.forceUpdate()}},{key:"render",value:function(){var e=this;return G.subscribe((function(t){e.updateForFile(t)})),J.subscribe((function(t){e.updateForControls(t)})),je.getState().canvas[this.props.channel-1]}}]),n}(i.a.Component),Kn=n(161),Pn=n(6),Qn=n.n(Pn),Gn=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={displayColorPicker:!1,color:{r:"241",g:"112",b:"19",a:"1"}},e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(t){e.setState({color:t.rgb})},e.handleChangeComplete=function(t){e.setState({color:t.rgb}),e.props.onClick({color:t.hex})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=Qn()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(this.state.color.r,", ").concat(this.state.color.g,", ").concat(this.state.color.b,", ").concat(this.state.color.a,")")},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return i.a.createElement("div",null,i.a.createElement("div",{style:e.swatch,onClick:this.handleClick},i.a.createElement("div",{style:e.color})),this.state.displayColorPicker?i.a.createElement("div",{style:e.popover},i.a.createElement("div",{style:e.cover,onClick:this.handleClose}),i.a.createElement(Kn.SketchPicker,{color:this.state.color,onChange:this.handleChange,onChangeComplete:this.handleChangeComplete})):null)}}]),n}(i.a.Component),Jn=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).updateSelection=function(){W(e.props.ch),B(e.props.ch),e.forceUpdate()},e}return Object(c.a)(n,[{key:"sliderValueBr",value:function(e){Dn(e,this.props.ch)}},{key:"sliderValueCt",value:function(e){Zn(e,this.props.ch)}},{key:"sliderValueWp",value:function(e){Un(e,this.props.ch)}},{key:"sliderValueBp",value:function(e){Tn(e,this.props.ch)}},{key:"sliderValueOpc",value:function(e){Fn(e,this.props.ch)}},{key:"colorValue",value:function(e){Yn(e,this.props.ch)}},{key:"resetBrightness",value:function(){Dn("0.0",this.props.ch)}},{key:"resetContrast",value:function(){Zn("0.0",this.props.ch)}},{key:"resetWhitepoint",value:function(){Un("255.0",this.props.ch)}},{key:"resetBlackpoint",value:function(){Tn("0.0",this.props.ch)}},{key:"resetOpacity",value:function(){Fn("0.0",this.props.ch)}},{key:"render",value:function(){var e=this,t=this.sliderValueBr,n=this.sliderValueCt,a=this.sliderValueWp,r=this.sliderValueBp,l=this.sliderValueOpc,s=this.colorValue,c="Ch"+this.props.ch+" Histogram",o=i.a.createElement(Rn,{className:"annot-view",alt:c,height:"100px",channel:this.props.ch}),u=L.getState().channels[this.props.ch-1].selected;return console.log("Channel "+this.props.ch+" : "+u),i.a.createElement("div",null,i.a.createElement(nn.a,{className:"channelBtn",outline:!0,color:"primary",id:"channel-btn",onClick:function(){e.updateSelection()},active:u},"Channel ","".concat(this.props.ch)),i.a.createElement(nn.a,{className:"viewBtn",outline:!0,color:"secondary",id:"view".concat(this.props.ch)},"View"),i.a.createElement(Bn.a,{toggler:"#view".concat(this.props.ch)},i.a.createElement(ue.a,{style:v},i.a.createElement(he.a,{style:b},i.a.createElement("div",{style:A},o),i.a.createElement("div",null,"Channel Color"),i.a.createElement(Gn,{color:s.bind(this),onClick:s.bind(this)}),i.a.createElement("br",null),i.a.createElement("div",{className:"opacity-slider-container"},i.a.createElement(ae,{label:"Opacity",width:"40%",min:"0.0",max:"1.0",step:"0.1",initial:"0",multiplier:"100",raw:"0",sliderValue:l.bind(this)}),i.a.createElement("button",{id:"resetOpcBtn",onClick:function(){e.resetOpacity()}},"Reset Channel Opacity")),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",{className:"brightness-slider-container"},i.a.createElement(ae,{label:"Brightness",width:"40%",min:"0",max:"1",step:"0.1",initial:"0",multiplier:"100",raw:"0",sliderValue:t.bind(this)}),i.a.createElement("button",{id:"resetBrBtn",onClick:function(){e.resetBrightness()}},"Reset Brightness")),i.a.createElement("div",{className:"contrast-slider-container"},i.a.createElement(ae,{label:"Contrast",width:"40%",min:"0",max:"10",step:"1",initial:"0",multiplier:"10",raw:"0",sliderValue:n.bind(this)}),i.a.createElement("button",{id:"resetCtBtn",onClick:function(){e.resetContrast()}},"Reset Contrast")),i.a.createElement("div",{className:"whitepoint-slider-container"},i.a.createElement(ae,{label:"Whitepoint",width:"40%",min:"0",max:"255",step:"1",initial:"255",multiplier:"1",raw:"1",sliderValue:a.bind(this)}),i.a.createElement("button",{id:"resetWpBtn",onClick:function(){e.resetWhitepoint()}},"Reset Whitepoint")),i.a.createElement("div",{className:"blackpoint-slider-container"},i.a.createElement(ae,{label:"Blackpoint",width:"40%",min:"0",max:"255",step:"1",initial:"0",multiplier:"1",raw:"1",sliderValue:r.bind(this)}),i.a.createElement("button",{id:"resetBpBtn",onClick:function(){e.resetBlackpoint()}},"Reset Blackpoint"))))))}}]),n}(i.a.Component),Hn=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"annotations-channel",style:f},i.a.createElement(ue.a,{style:v},i.a.createElement(he.a,null,i.a.createElement(pe.a,null," Channel Selection "),i.a.createElement(Jn,{ch:"1"}),i.a.createElement(Jn,{ch:"2"}),i.a.createElement(Jn,{ch:"3"}))))}}]),n}(i.a.Component),Xn=n(385),qn=n(386),_n=n(387),$n=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"main",style:h},i.a.createElement(Ln,null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(Xn.a,{style:d},i.a.createElement(qn.a,{style:p},i.a.createElement(_n.a,{xs:"2"},i.a.createElement(tn,null)),i.a.createElement(_n.a,{xs:"8"},i.a.createElement($t,null)),i.a.createElement(_n.a,{xs:"2"},i.a.createElement(an,null),i.a.createElement(Hn,null),i.a.createElement(rn,null)))),i.a.createElement(Wn,null))}}]),n}(i.a.Component);function ea(){return i.a.createElement(i.a.Fragment,null,i.a.createElement($n,null))}var ta=document.getElementById("root");l.a.render(i.a.createElement(ea,null),ta)}},[[164,1,2]]]);
//# sourceMappingURL=main.a5015433.chunk.js.map