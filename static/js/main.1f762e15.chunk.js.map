{"version":3,"sources":["ui/style.js","mainSettings.js","fileuploader/fileStore.js","imagecanvas/ImageStore.js","utils/index.js","ui/components/zoom/zoomSettings.js","ui/components/zoom/zpp.js","ui/components/slider.js","ui/components/zoom/zoomControl.js","ui/components/zoom/zoom.js","viewer/index.js","imagecanvas/Mesh.js","imagecanvas/canvasStore.js","annotator/annotationStore.js","annotator/annotationControl.js","annotator/annotationMenuOptions.js","annotator/editControl.js","annotator/annotationSettings.js","annotator/annotationClass.js","ui/components/FabricLayer.js","annotator/annotationSubMenu.js","annotator/annotationMenu.js","fabric/fabricControl.js","datacube/volume.js","datacube/datacubeControls.js","datacube/cachedImageData.js","datacube/datacube.js","ui/components/mainTiffViewer.js","ui/components/mainViewer.js","ui/components/axisTiffViewer.js","ui/components/axesViewer.js","ui/components/annotatorViewer.js","ui/components/thumbnails.js","annotator/annotStore.js","annotator/importer.js","fileuploader/fileControl.js","fileuploader/index.js","annotator/exporter.js","ui/components/menus.js","annotator/index.js","imagecanvas/CanvasControl.js","imagecanvas/ImageCanvas.js","ui/components/channel.js","ui/components/channelViewer.js","ui/index.js","index.js","ui/assets/images/brom.jpeg"],"names":["mainStyle","overflowY","overflowX","height","width","position","rowStyle","flex","cardStyle","buttonGroup","size","vertical","padding","container","fluid","maxWidth","card","justify","alignContent","alignItems","textAlign","fontSize","cardBody","mainImg","mainCanvasStyle","zIndex","marginLeft","opacity","canvasStyle1","canvasStyle2","canvasStyle3","canvasThumbnail","thumb","display","borderRadius","border","marginBottom","marginRight","boxSizing","thumbInner","minWidth","overflow","initState","channels","selected","lastSelected","dev","create","set","Object","objectSpread","settingsApi","prodState","file","devState","name","image","require","style","type","getState","fileApi","createTexture","THREE","load","createTextureFromTiff","uniforms","brightness","value","contrast","whitepoint","blackpoint","texture","update","state","uniApi","fApi","uApi","zoomState","views","zoomPct","zoomZppPct","reset","last","useZoomApi","zpp","limitToBounds","panningEnabled","transformEnabled","pinchEnabled","limitToWrapper","disabled","dbClickEnabled","lockAxisX","lockAxisY","velocityEqualToMove","enableWheel","enableTouchPadPinch","enableVelocity","limitsOnWheel","minScale","maxScale","step","updated","scale","x","y","Zpp","props","_state$zpp","subscribe","length","react_default","a","createElement","className","index_es","defaultScale","defaultPositionX","defaultPositionY","positionX","positionY","options","pan","velocity","pinch","doubleClick","wheel","wheelEnabled","touchPadEnabled","_ref","zoomIn","zoomOut","resetTransform","setDefaultState","_ref$options","previousScale","objectWithoutProperties","Fragment","imageWidth","src","alt","view","img","Number","toFixed","Slider","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","initSlider","initial","min","max","handleSliderChange","e","persist","slider","target","setState","updateStatus","notifyValue","setSlider","sync","status","sliderValue","raw","Math","round","multiplier","_this2","_this$props","label","id","onChange","displayValue","Component","updateZoom","idx","prevState","map","vw","j","parseInt","newView","newReset","Zoom","components_slider","bind","onClick","Viewer","zoom","api","init","forceUpdate","zppZoom","withFileStore","assign","fragmentShader","vertexShader","Mesh","ref","useRef","material","console","log","channel","useMemo","useFrame","current","attach","args","meshState","mesh","imagecanvas_Mesh","canvasState","canvas","web","canvasApi","annotations","cachedState","cachedAnnots","annotApi","cachedAnnotApi","addAnnotation","group","classLabel","concat","toConsumableArray","class","undoAnnotation","index","annotation","splice","deleteAnnotation","getLastAnnotIdx","updateAnnotationLabel","oldLabel","annot","newAnnot","updateAnnotClassLabel","editAnnotationLabel","obj","getSelectedObjects","_objects","object","ungroup","objs","i","text","getCanvas","renderAll","regroup","updateLabel","updateSelect","editAnnotationClass","updateClassLabel","menu","displayon","coords","items","callback","setDisplay","objects","select","AnnotationMenuApi","sel","classes","enabled","addClass","annotClassApi","updateClasses","push","getAnnotationClasses","cls","isDuplicateClass","enableClass","newCls","filter","getClasses","colors","drawFreeStyle","window","isMouseDown","isDrawingMode","freeDrawingBrush","color","purple","drawRect","rect","fRect","fabric","Rect","left","top","fill","stroke","strokeLineJoin","strokeWidth","objectCaching","Group","on","moving","o","setCoords","newLabel","IText","originX","originY","fontFamily","fontWeight","textBackgroundColor","classText","perPixelTargetFind","add","setActiveObject","addWithUpdate","_restoreObjectsState","remove","item","hasControls","filterAnnotations","getObjects","class_element","markGroupVisible","markGroupInvisible","discardActiveObject","markVisible","visible","dirty","redo","cachedAnnot","AnnotationSubMenu","handleChange","assertThisInitialized","changeLabel","changeClassLabel","button","labelTop","match","buttonLeft","event","newStr","React","AnnotationMenu","contextRef","createRef","returnMenu","updateItems","updateCoords","updateDisplay","arr","key","annotationSubMenu","modes","RECT","FREE","SELECT","NONE","mouse","down","origin","drawMode","fabricApi","setMode","newMode","startSelecting","startDrawing","_offset","setOrigin","startDrawingRect","finish","finishDrawingRect","setFabricCoords","abs","getActiveObjects","canvasLeft","canvasRight","canvasTop","canvasBottom","relX","relY","openMenu","setMenuCoords","FabricLayer","canvasRef","handleMouseDown","handleMouseUp","handleMouseDoubleClick","handleDrag","selectClass1","showAll","showAllClasses","handleMoveAnnotation","Canvas","fireRightClick","mouse:down","mouse:up","mouse:dblclick","object:moving","object:rotating","object:scaling","setFabricCanvas","mode","clientX","clientY","handleRightMouseDown","handleLeftMouseDown","handleRightMouseUp","handleLeftMouseUp","annotationMenu","annots","addToFabric","onContextMenu","preventDefault","borderColor","borderWidth","borderStyle","displayMenu","Volume","segmentation","segments","requests","createClass","_renderChannelSlice","asyncToGenerator","regenerator_default","mark","_callee","ctx","axis","slice","pixels","slice32","wrap","_context","prev","next","grayImageSlice","sent","Uint32Array","data","buffer","putImageData","abrupt","stop","_x","_x2","_x3","apply","arguments","_load","_callee2","_context2","loadVolume","_x4","_x5","_x6","_loadVolume","_callee3","cube","_context3","insertImageData","_x7","_x8","_x9","_x10","loaded","stateApi","loadSlices","_loadSlices","cntxt","volume","axes","files","_loadSlicesFromMultipageFile","_loadSlicesFromMultipleFiles","updateChannelSlice","_x11","_updateChannelSlice","renderChannelSlice","_loadVolumes","pages","pIdx","page","pct","_callee4","_context4","fIdx","ProgressBar","Progress","striped","bar","CachedImageData","context","cache","createImageData","DataCube","bytes","z","canvas_context","materialize","cached_imgdata","clean","faces","face","ArrayType","arrayType","imgdata","offsetx","offsety","offsetz","data32","mask","true","1","2","4","false","isLittleEndian","sizex","zadj","copy","undefined","Error","xsize","ysize","zsize","xysize","byteoffset","square","yoffset","transparency","faceDimensions","sizes","getImageData","alpha","arr32","arr8","Uint8Array","islittle","r","g","b","Uint8ClampedArray","Uint16Array","mainTiffViewer","axisIdx","sliceIdx","fileLength","getContext","val","_this3","updateForFile","datacubeControls","mainViewer","Card","CardBody","CardTitle","viewer","components_mainTiffViewer","components_FabricLayer","view1","view2","view3","fabricCanvas1","fabricCanvas2","fabricCanvas3","canvasZIndex","channelViews","canvasView","TiffViewer","dec","clamp","sliderValueSlice","nextSlice","AxesViewer","axisTiffViewer","AnnotatorViewer","futureClass","futureAnnotClass","annotClasses","enables","annotCls","num","_loop","includes","_loop2","en","_this4","divs","_loop3","Button","outline","active","_this5","updateAnnotClasses","Thumbnails","classicImage","setSelected","allThumbs","elements","allTiffsCanvas","loadTiff","margin","tiffFiles","newFile","rgba","imageData","imgW","imgH","newC","document","drawImage","f","shrinkTiff","img_name","importCsv","reader","FileReader","onload","fileAsBinaryString","result","csv","noheader","output","fromString","then","csvRows","toJson","forEach","aCsvRow","builtObject","keys","aKey","valueToAddInBuiltObject","keyToAddInBuiltObject","saveJson","onabort","onerror","readAsText","importJson","JSON","parse","importTiff","debug","onloadend","ifds","UTIF","decode","decodeImage","toRGBA8","Image","updateTiffPages","parseMultiTiff","onprogress","readAsArrayBuffer","isAnnotValid","json","addJsonAnnot","addFile","preview","addPng","addTiff","addCsv","addJson","initFile","initPng","initTiff","initCsv","initJson","FileUpload","_useState","useState","_useState2","slicedToArray","setFiles","_useDropzone","useDropzone","accept","onDrop","acceptedFiles","URL","createObjectURL","getRootProps","getInputProps","validFile","isValidFile","useEffect","revokeObjectURL","exportJson","element","Blob","stringify","href","download","body","appendChild","click","Menus","ButtonGroup","UncontrolledButtonDropdown","DropdownToggle","caret","DropdownMenu","DropdownItem","undo","Annotator","file_size","isValidChannel","updateImage","blob","prevStateCh","imagepath","ch","newChannel","updateUniformImage","updateBrightness","updateUniformBrightness","updateContrast","updateUniformContrast","updateWhitepoint","updateUniformWhitepoint","updateBlackpoint","updateUniformBlackpoint","ImageCanvas","updateForControls","Channel","updateSelection","updateLastSel","sliderValueBr","sliderValueCt","sliderValueWp","sliderValueBp","imagecanvas_ImageCanvas","UncontrolledCollapse","toggler","resetBrightness","resetContrast","resetWhitepoint","resetBlackpoint","ChannelViewer","components_channel","UI","menus","Container","Row","Col","xs","axesViewer","components_mainViewer","annotatorViewer","channelViewer","thumbnails","annotator","Application","ui","rootElement","getElementById","ReactDOM","render","module","exports"],"mappings":"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","file":"static/js/main.1f762e15.chunk.js","sourcesContent":["export const mainStyle = {\n  overflowY: 'scroll',\n  overflowX: 'scroll',\n  height: '100%',\n  width: '100%',\n  // height: '500px',\n  // width: '900px',\n  position: 'relative',\n};\nexport const containerStyle = {\n  width: '900px',\n  marginLeft: 0,\n};\nexport const rowStyle = {\n  flex: 1.0,\n  position: 'relative',\n};\nexport const cardStyle = {\n  flex: 0.1,\n  position: 'relative',\n};\n\nexport const buttonGroup = {\n  size: 'sm',\n  vertical: false,\n  flex: 1.0,\n  padding: 15,\n};\n\nexport const mainView = {\n  flex: 1,\n  flexDirection: 'column',\n  justifyContent: 'center',\n  maxWidth: '20%',\n};\n\nexport const innerView = {\n  flex: 0.8,\n  flexDirection: 'row',\n};\n\nexport const container = {\n  fluid: true,\n  maxWidth: '100%',\n};\n\nexport const row = {\n  noGutters: false,\n  form: false,\n  xs: '2',\n};\n\nexport const col = {\n  xs: '2',\n};\n\nexport const card = {\n  justify: 'center',\n  alignContent: 'center',\n  alignItems: 'center',\n  textAlign: 'center',\n  width: '100%',\n  fluid: true,\n  fontSize: '12px',\n};\n\nexport const cardBody = {\n  width: '85%',\n  height: '100%',\n};\n\nexport const mainImg = {\n  width: '100%',\n};\n\nexport const axesImg = {\n  width: '100%',\n};\n\nexport const mainCanvasStyle = {\n  position: 'absolute',\n  height: '100%',\n  width: '100%',\n  zIndex: '3',\n  marginLeft: '0px',\n  opacity: '1.0',\n};\n\nexport const canvasStyle1 = {\n  position: 'absolute',\n  height: '100%',\n  width: '100%',\n  zIndex: '3',\n  // marginLeft: '100px',\n  opacity: '0.5',\n};\nexport const canvasStyle2 = {\n  position: 'absolute',\n  height: '100%',\n  width: '100%',\n  zIndex: '5',\n  // marginLeft: '50px',\n  opacity: '0.5',\n};\nexport const canvasStyle3 = {\n  position: 'absolute',\n  height: '100%',\n  width: '100%',\n  zIndex: '7',\n  opacity: '0.5',\n};\n\nexport const canvasThumbnail = {\n  position: 'center',\n  height: '100px',\n  width: '88px',\n  zIndex: '3',\n};\n\nexport const thumbsContainer = {\n  display: 'flex',\n  flexDirection: 'row',\n  flexWrap: 'wrap',\n  marginTop: 16,\n};\n\nexport const thumb = {\n  display: 'inline-flex',\n  borderRadius: 2,\n  border: '1px solid #eaeaea',\n  marginBottom: 8,\n  marginRight: 8,\n  width: 50,\n  height: 50,\n  padding: 4,\n  boxSizing: 'border-box',\n};\n\nexport const thumbInner = {\n  display: 'flex',\n  minWidth: 0,\n  overflow: 'hidden',\n};\n","import create from 'zustand';\n\nexport const initState = {\n  channels: [\n    {\n      selected: false,\n    },\n    {\n      selected: false,\n    },\n    {\n      selected: false,\n    },\n  ],\n  lastSelected: 1,\n  dev: 0,\n};\n\nexport const [useMainSettings, settingsApi] = create(set => ({\n  ...initState,\n}));\n\nexport function updateChannelSel(channel) {\n  settingsApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.selected = !prevState.channels[j].selected;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nexport function updateLastSel(channel) {\n  settingsApi.setState(prevState => ({\n    ...prevState,\n    lastSelected: channel,\n  }));\n}\n","import create from 'zustand';\nimport { settingsApi } from '../mainSettings.js';\n\nexport const initState = () => {\n  return settingsApi.getState().dev ? devState : prodState;\n};\n\nexport const prodState = {\n  file: [],\n  size: 0,\n  selected: 0,\n};\n\nexport const devState = {\n  file: [\n    {\n      name: 'brom.jpeg',\n      image: require('./../ui/assets/images/brom.jpeg'),\n      style: {\n        display: 'block',\n        width: 'auto',\n        height: '100%',\n      },\n      type: 'image/png',\n    },\n  ],\n  size: 1,\n  selected: 0,\n};\n\nexport const [useFileStore, fileApi] = create(set => ({\n  ...initState(),\n}));\n","import create from 'zustand';\nimport * as THREE from 'three';\n\nexport const createTexture = image => {\n  return new THREE.TextureLoader().load(image);\n};\n\nexport const createTextureFromTiff = image => {\n  return new THREE.TextureLoader().load(image);\n};\n\nconst initState = {\n  channels: [\n    {\n      uniforms: {\n        brightness: {\n          value: '0.0',\n        },\n        contrast: {\n          value: '0.0',\n        },\n        whitepoint: {\n          value: '255.0',\n        },\n        blackpoint: {\n          value: '0.0',\n        },\n        image: {\n          value: '',\n        },\n      },\n      texture: null,\n      name: '',\n      type: '',\n    },\n    {\n      uniforms: {\n        brightness: {\n          value: '0.0',\n        },\n        contrast: {\n          value: '0.0',\n        },\n        whitepoint: {\n          value: '235.0',\n        },\n        blackpoint: {\n          value: '16.0',\n        },\n        image: {\n          value: '',\n        },\n      },\n      texture: null,\n      name: '',\n      type: '',\n    },\n    {\n      uniforms: {\n        brightness: {\n          value: '0.0',\n        },\n        contrast: {\n          value: '0.0',\n        },\n        whitepoint: {\n          value: '235.0',\n        },\n        blackpoint: {\n          value: '16.0',\n        },\n        image: {\n          value: '',\n        },\n      },\n      texture: null,\n      name: '',\n      type: '',\n    },\n    {\n      uniforms: {\n        brightness: {\n          value: '0.0',\n        },\n        contrast: {\n          value: '0.0',\n        },\n        whitepoint: {\n          value: '235.0',\n        },\n        blackpoint: {\n          value: '16.0',\n        },\n        image: {\n          value: '',\n        },\n      },\n      texture: null,\n      name: '',\n      type: '',\n    },\n  ],\n};\n\nexport const [useUniformStore, uniApi] = create(set => ({\n  ...initState,\n  update: (brightness, contrast, whitepoint, blackpoint, image) =>\n    set(state => ({\n      ...state,\n      uniforms: {\n        ...state.uniforms,\n        brightness: {\n          ...state.uniforms.brightness,\n          value: brightness,\n        },\n        contrast: {\n          ...state.uniforms.contrast,\n          value: contrast,\n        },\n        whitepoint: {\n          ...state.uniforms.whitepoint,\n          value: whitepoint,\n        },\n        blackpoint: {\n          ...state.uniforms.blackpoint,\n          value: blackpoint,\n        },\n        image: {\n          ...state.uniforms.image,\n        },\n      },\n      texture: image,\n      brightness: brightness,\n    })),\n}));\n","import React from 'react';\n\nimport { fileApi } from '../fileuploader/fileStore.js';\nimport { uniApi } from '../imagecanvas/ImageStore.js';\n\nexport const fApi = fileApi;\nexport const uApi = uniApi;\n\nexport const withFileStore = (Component: any) => {\n  return (props: any) => {\n    return <Component api={fApi} {...props} />;\n  };\n};\n\nexport const withUniformStore = (Component: any) => {\n  return (props: any) => {\n    return <Component api={uApi} {...props} />;\n  };\n};\n\nexport const withStore = (Component: any) => {\n  return (props: any) => {\n    return <Component uApi={uApi} fApi={fApi} {...props} />;\n  };\n};\n","import create from 'zustand';\n\nexport const zoomState = {\n  views: [\n    {\n      name: 'main',\n      zoomPct: '1',\n      zoomZppPct: '1',\n      reset: '0',\n    },\n    {\n      name: 'xy',\n      zoomPct: '1',\n      zoomZppPct: '1',\n      reset: '0',\n    },\n    {\n      name: 'yz',\n      zoomPct: '1',\n      zoomZppPct: '1',\n      reset: '0',\n    },\n    {\n      name: 'xz',\n      zoomPct: '1',\n      zoomZppPct: '1',\n      reset: '0',\n    },\n  ],\n  last: '0',\n};\n\nexport const [useZoomStore, useZoomApi] = create(set => ({\n  ...zoomState,\n}));\n","import React from 'react';\n\nimport { TransformWrapper, TransformComponent } from 'react-zoom-pan-pinch';\nimport { useZoomApi } from './zoomSettings.js';\n// import { updateZppZoom } from \"./zoomControl.js\";\n\nvar state = {\n  zpp: {\n    type: true,\n    limitToBounds: true,\n    panningEnabled: true,\n    transformEnabled: true,\n    pinchEnabled: false,\n    limitToWrapper: false,\n    disabled: false,\n    dbClickEnabled: true,\n    lockAxisX: false,\n    lockAxisY: false,\n    velocityEqualToMove: true,\n    enableWheel: true,\n    enableTouchPadPinch: false,\n    enableVelocity: true,\n    limitsOnWheel: false,\n    minScale: 0.5,\n    maxScale: 8,\n    step: 10,\n    updated: false,\n    scale: 1,\n    x: 0,\n    y: 0,\n  },\n  zoomPct: 100,\n};\n\nfunction updateZoomValue(value, idx) {\n  if (state.zoomPct !== value) {\n    state.zoomPct = value;\n    // updateZppZoom(value, idx)\n  }\n}\n\nfunction updateZppZoomValue(value, idx) {\n  if (state.zoomPct !== value) {\n    state.zoomPct = value;\n  }\n}\n\nfunction updateXY(x, y) {\n  if (state.zpp.x !== x) {\n    state.zpp.x = x;\n  }\n  if (state.zpp.y !== y) {\n    state.zpp.y = y;\n  }\n}\n\nfunction reset() {\n  state.zpp.x = 0;\n  state.zpp.y = 0;\n}\n\nfunction view(image, imageWidth) {\n  if (image !== '') {\n    return <img src={image} alt=\"viewer\" width={imageWidth} />;\n  }\n}\n\nfunction Zpp(props) {\n  const {\n    limitToBounds,\n    panningEnabled,\n    transformEnabled,\n    pinchEnabled,\n    limitToWrapper,\n    disabled,\n    dbClickEnabled,\n    lockAxisX,\n    lockAxisY,\n    velocityEqualToMove,\n    enableWheel,\n    enableTouchPadPinch,\n    enableVelocity,\n    limitsOnWheel,\n    minScale,\n    maxScale,\n    step,\n    x,\n    y,\n  } = state.zpp;\n\n  useZoomApi.subscribe(state => {\n    if (\n      state &&\n      state.views &&\n      props.type >= 0 &&\n      props.type < state.views.length\n    ) {\n      updateZppZoomValue(state.views[props.type].zoomPct, props.type);\n    }\n\n    if (state.views[props.type].reset) reset();\n  });\n\n  return (\n    <div className=\"transform-wrapper\">\n      <TransformWrapper\n        defaultScale={1}\n        defaultPositionX={0}\n        defaultPositionY={0}\n        positionX={x}\n        positionY={y}\n        scale={state.zoomPct / 100}\n        options={{\n          limitToBounds,\n          transformEnabled,\n          disabled,\n          limitToWrapper,\n          minScale,\n          maxScale,\n        }}\n        pan={{\n          disabled: !panningEnabled,\n          lockAxisX,\n          lockAxisY,\n          velocityEqualToMove,\n          velocity: enableVelocity,\n        }}\n        pinch={{ disabled: !pinchEnabled }}\n        doubleClick={{ disabled: !dbClickEnabled }}\n        wheel={{\n          wheelEnabled: enableWheel,\n          touchPadEnabled: enableTouchPadPinch,\n          limitsOnWheel,\n          step: step,\n        }}\n      >\n        {({\n          zoomIn,\n          zoomOut,\n          resetTransform,\n          setDefaultState,\n          positionX,\n          positionY,\n          scale,\n          previousScale,\n          options: { limitToBounds, transformEnabled, disabled },\n          ...rest\n        }) => (\n          <div>\n            {updateZoomValue(scale * 100, props.type)}\n            {updateXY(positionX, positionY)}\n            <React.Fragment>\n              <TransformComponent>\n                {view(props.img, props.imageWidth)}\n              </TransformComponent>\n              <span className=\"badge badge-primary\">\n                x : {Number(positionX).toFixed(0)}px\n              </span>\n              <span className=\"badge badge-primary\">\n                y : {Number(positionY).toFixed(0)}px\n              </span>\n              <span className=\"badge badge-primary\">\n                Scale : {Number(scale * 100).toFixed(0)}%\n              </span>\n            </React.Fragment>\n          </div>\n        )}\n      </TransformWrapper>\n    </div>\n  );\n}\n\nexport default Zpp;\n","import React, { Component } from 'react';\nimport './../styles.css';\nimport { useZoomApi } from './zoom/zoomSettings.js';\n\nclass Slider extends Component {\n  initSlider = {\n    initial: 0,\n    min: 0,\n    max: 0,\n    step: 0,\n    value: 0,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      updated: false,\n      slider: this.initSlider,\n      setSlider: null,\n      sync: true,\n    };\n  }\n\n  componentDidUpdate() {\n    if (this.state.updated) {\n      return true;\n    }\n    return false;\n  }\n\n  updateStatus(status) {\n    let updated = true;\n    this.setState({ updated: updated });\n  }\n\n  notifyValue() {\n    var sliderValue = this.props.sliderValue;\n    const type = this.props.type;\n    sliderValue(this.state.slider.value, type);\n  }\n\n  displayValue() {\n    if (this.props.raw === '1') {\n      return (\n        <span>\n          {' '}\n          {Math.round(this.state.slider.value * this.props.multiplier)}\n        </span>\n      );\n    } else {\n      return (\n        <span>\n          {' '}\n          {Math.round(this.state.slider.value * this.props.multiplier)}%\n        </span>\n      );\n    }\n  }\n\n  handleSliderChange = e => {\n    e.persist();\n\n    let slider = this.state.slider;\n    slider.value = e.target.value;\n    this.setState({ slider: slider });\n\n    this.updateStatus(true);\n    this.notifyValue();\n  };\n\n  render() {\n    useZoomApi.subscribe(state => {\n      if (this.props.type >= 0 && this.props.type < state.views.length) {\n        let slider = this.state.slider;\n        slider.value = state.views[this.props.type].zoomPct;\n        this.setState({ slider: slider });\n      }\n    });\n\n    const slider = this.state.slider;\n    const { label, min, max, initial, step } = this.props;\n\n    return (\n      <div className=\"slider-settings\">\n        <span>{label}</span> <br></br>\n        <span>{min} </span>\n        <input\n          type=\"range\"\n          className=\"slider\"\n          value={slider.value || initial}\n          id=\"customRange1\"\n          initial={initial}\n          min={min}\n          max={max}\n          step={step}\n          onChange={e => this.handleSliderChange(e)}\n        />\n        <span> {max}</span>\n        <span> {this.displayValue()}</span>\n      </div>\n    );\n  }\n}\n\nexport default Slider;\n","import { useZoomApi } from './zoomSettings.js';\n\nexport function updateZoom(value, idx, reset) {\n  const currZoom = useZoomApi.getState().views[idx].zoomPct;\n\n  if (currZoom !== value || reset) {\n    useZoomApi.setState(prevState => {\n      const views = prevState.views.map((vw, j) => {\n        if (j === parseInt(idx)) {\n          var newView = vw;\n          var newReset = 0;\n          if (reset) {\n            newReset = 1;\n          }\n          newView.zoomPct = value;\n          newView.reset = newReset;\n          return newView;\n        } else {\n          return vw;\n        }\n      });\n      return {\n        views,\n      };\n    });\n\n    useZoomApi.setState(prevState => ({\n      ...prevState,\n      last: idx,\n    }));\n  }\n}\n\nexport function updateZppZoom(value, idx) {\n  const currZoom = useZoomApi.getState().views[idx].zoomZppPct;\n\n  if (currZoom !== value) {\n    useZoomApi.setState(prevState => {\n      const views = prevState.views.map((vw, j) => {\n        if (j === parseInt(idx)) {\n          var newView = vw;\n          newView.zoomZppPct = value;\n          return newView;\n        } else {\n          return vw;\n        }\n      });\n      return {\n        views,\n      };\n    });\n  }\n}\n","import React from 'react';\n\nimport Slider from '../slider.js';\n\nimport { useZoomApi } from './zoomSettings.js';\nimport { updateZoom } from './zoomControl.js';\n\nvar state = {\n  zoomPct: 100,\n};\n\nfunction resetZoom(idx) {\n  updateZoom('100', idx, true);\n}\n\nfunction updateZoomView(idx, value) {\n  if (state.zoomPct !== value) {\n    // updateZoom(value, idx);\n  }\n}\n\nfunction Zoom(props) {\n  useZoomApi.subscribe(state => {\n    if (\n      state &&\n      state.views &&\n      props.type >= 0 &&\n      props.type < state.views.length\n    ) {\n      updateZoomView(props.type, state.views[props.type].zoomZppPct);\n    }\n  });\n\n  return (\n    <div className=\"viewer-wrapper\">\n      <Slider\n        label=\"Zoom\"\n        width=\"40%\"\n        min=\"50\"\n        max=\"800\"\n        step=\"10\"\n        initial={state.zoomPct}\n        multiplier=\"1\"\n        sliderValue={updateZoom.bind(this)}\n        type={props.type}\n      />\n      <button\n        id=\"resetZoomBtn\"\n        onClick={() => {\n          resetZoom(props.type);\n        }}\n      >\n        Reset Zoom\n      </button>\n    </div>\n  );\n}\n\nexport default Zoom;\n","import React, { Component } from 'react';\nimport { withFileStore } from '../utils/index.js';\nimport '../styles.css';\n\nimport Zpp from '../ui/components/zoom/zpp.js';\nimport Zoom from '../ui/components/zoom/zoom.js';\nimport { useZoomApi } from '../ui/components/zoom/zoomSettings.js';\n\nclass Viewer extends Component {\n  state = {\n    image: '',\n    zoom: 0,\n  };\n\n  init() {\n    if (this.state.image === '') {\n      if (this.props.api.getState().file.length > 0) {\n        this.setState({\n          image: this.props.api.getState().file[\n            this.props.api.getState().selected\n          ].image,\n        });\n      }\n    }\n  }\n\n  render() {\n    this.init();\n    this.props.api.subscribe(state => {\n      if (state) {\n        const img = state.file[state.selected].image;\n        if (img) {\n          this.setState({\n            image: img,\n          });\n          this.forceUpdate();\n        }\n      }\n    });\n    useZoomApi.subscribe(state => {\n      const zoom = state.views[this.props.type].zoomPct;\n      const zppZoom = state.views[this.props.type].zoomZppPct;\n\n      if (\n        (this.state.zoom !== zoom || this.state.zoom !== zppZoom) &&\n        this.props.type === state.last\n      ) {\n        this.setState(prevState => ({\n          zoom: zoom,\n        }));\n      }\n    });\n\n    return (\n      <div className=\"viewer-wrapper\">\n        <Zpp\n          type={this.props.type}\n          img={this.state.image}\n          imageWidth={this.props.imageWidth}\n        />\n        <Zoom type={this.props.type} />\n      </div>\n    );\n  }\n}\n\nexport default withFileStore(Viewer);\n","import React, { useRef, useMemo } from 'react';\nimport { uApi } from '../utils/index.js';\nimport { useFrame } from 'react-three-fiber';\n\nconst fragmentShader = `\n  uniform sampler2D image;\n\n  uniform float brightness;\n  uniform float contrast;\n\n  uniform float blackpoint;\n  uniform float whitepoint;\n\n  varying vec2 vUv;\n\n  void main() {\n    gl_FragColor = texture2D(image, vUv);\n    gl_FragColor.rgb += brightness;\n\n    if (contrast > 0.0) {\n      gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - contrast) + 0.5;\n    } else {\n      gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + contrast) + 0.5;\n    }\n\n    float black_point = blackpoint / 255.0;\n    float white_point = blackpoint == whitepoint ? (255.0 / 0.00025) : (255.0 / (whitepoint - blackpoint));\n\n    gl_FragColor.rgb = gl_FragColor.rgb * white_point - (white_point * black_point);\n  }\n`;\n\nconst vertexShader = `\n  varying vec2 vUv;\n\n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }\n`;\n\nfunction Mesh(props) {\n  const ref = useRef();\n  const material = useRef();\n  console.log(\"chanel: \", props.channel)\n  var uniforms = useMemo(\n    () => uApi.getState().channels[props.channel - 1].uniforms,\n    [props]\n  );\n\n  useFrame(state => {\n    material.current.uniforms.brightness.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.brightness.value;\n    material.current.uniforms.contrast.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.contrast.value;\n    material.current.uniforms.whitepoint.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.whitepoint.value;\n    material.current.uniforms.blackpoint.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.blackpoint.value;\n    material.current.uniforms.image.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.image.value;\n  });\n\n  return (\n    <mesh ref={ref} scale={[1.0, 1.0, 1.0]}>\n      <planeBufferGeometry attach=\"geometry\" args={[5.0, 5.0]} />\n      <shaderMaterial\n        attach=\"material\"\n        ref={material}\n        fragmentShader={fragmentShader}\n        vertexShader={vertexShader}\n        uniforms={uniforms}\n      />\n    </mesh>\n  );\n}\n\nexport default Mesh;\n","import React from 'react';\nimport create from 'zustand';\nimport Mesh from './Mesh.js';\nimport { Canvas } from 'react-three-fiber';\n\nexport const meshState = {\n  mesh: [<Mesh channel=\"1\" />, <Mesh channel=\"2\" />, <Mesh channel=\"3\" />, <Mesh channel=\"4\" />],\n};\n\nexport const [useMeshStore, meshApi] = create(set => ({\n  ...meshState,\n}));\n\nexport const canvasState = {\n  canvas: [\n    <Canvas className={'image-canvas-1'}>{meshState.mesh[0]}</Canvas>,\n    <Canvas className={'image-canvas-2'}>{meshState.mesh[1]}</Canvas>,\n    <Canvas className={'image-canvas-3'}>{meshState.mesh[2]}</Canvas>,\n    <Canvas className={'main-image-canvas'}>{meshState.mesh[3]}</Canvas>,\n  ],\n};\n\nexport const [useCanvasStore, canvasApi] = create(set => ({\n  ...canvasState,\n}));\n","import create from 'zustand';\n\nconst initState = {\n  annotations: [],\n};\n\nconst cachedState = {\n  cachedAnnots: [],\n};\n\nexport const [useAnnotStore, annotApi] = create(set => ({\n  ...initState,\n}));\n\nexport const [useCacheStore, cachedAnnotApi] = create(set => ({\n  ...cachedState,\n}));\n","import { annotApi, cachedAnnotApi } from './annotationStore.js';\n\nexport function addAnnotation(group, label, classLabel) {\n  const default_class = 'class1';\n  annotApi.setState(prevState => ({\n    ...prevState,\n    annotations: [\n      ...prevState.annotations,\n      {\n        group: group,\n        label: label,\n        class: classLabel || default_class,\n      },\n    ],\n  }));\n}\n\nexport function addCachedAnnotation(group, label, classLabel) {\n  cachedAnnotApi.setState(prevState => ({\n    ...prevState,\n    cachedAnnots: [\n      ...prevState.cachedAnnots,\n      {\n        group: group,\n        label: label,\n        class: classLabel,\n      },\n    ],\n  }));\n}\n\nexport function deleteAnnotation(index) {\n  annotApi.setState(prevState => {\n    return prevState.annotations.splice(index, 1);\n  });\n}\n\nexport function deleteCachedAnnotation(index) {\n  cachedAnnotApi.setState(prevState => {\n    return prevState.cachedAnnots.splice(index, 1);\n  });\n}\n\nexport function undoAnnotation() {\n  const index = annotApi.getState().annotations.length - 1;\n  const annotation = annotApi.getState().annotations[index];\n  deleteAnnotation(index);\n  addCachedAnnotation(annotation.group, annotation.label, annotation.class);\n}\n\nexport function getLastAnnotIdx() {\n  return annotApi.getState().annotations.length - 1;\n}\n\nexport function getLastCachedAnnot() {\n  return cachedAnnotApi.getState().cachedAnnots[\n    cachedAnnotApi.getState().cachedAnnots.length - 1\n  ];\n}\n\nexport function getLastCachedAnnotIdx() {\n  return cachedAnnotApi.getState().cachedAnnots.length - 1;\n}\n\nexport function updateAnnotationLabel(oldLabel, label) {\n  annotApi.setState(prevState => {\n    const annotations = prevState.annotations.map((annot, j) => {\n      if (annot.label === oldLabel) {\n        var newAnnot = annot;\n        newAnnot.label = label;\n        return newAnnot;\n      } else {\n        return annot;\n      }\n    });\n    return {\n      annotations,\n    };\n  });\n}\n\nexport function updateAnnotClassLabel(oldLabel, label) {\n  annotApi.setState(prevState => {\n    const annotations = prevState.annotations.map((annot, j) => {\n      if (annot.class === oldLabel) {\n        var newAnnot = annot;\n        newAnnot.class = label;\n        return newAnnot;\n      } else {\n        return annot;\n      }\n    });\n    return {\n      annotations,\n    };\n  });\n}\n\nexport function getAnnotationClasses() {\n  var classes = [];\n  const annotations = annotApi.getState().annotations;\n  for (var i = 0; i < annotations.length; i++) {\n    classes.push(annotations[i].class);\n  }\n  return classes;\n}\n","import {setDisplay, getSelectedObjects, updateSelect} from \"./annotationSettings.js\"\nimport {updateLabel, updateClassLabel} from './editControl.js'\n\nexport function editAnnotationOption(label, classLabel) {\n  setDisplay(false);\n  updateSelect(1);\n}\nexport function editClassOption() {\n  setDisplay(false);\n  updateSelect(2);\n}\n\nexport function editAnnotationLabel(label) {\n\n  const obj = getSelectedObjects()\n  if (obj && (obj._objects.length > 0)) {\n    updateLabel(obj, label)\n    updateSelect(0);\n  }\n}\n\nexport function editAnnotationClass(className) {\n  const obj = getSelectedObjects()\n  if (obj && (obj._objects.length > 0)) {\n    updateClassLabel(obj, className)\n    updateSelect(0);\n  }\n}\n","import { fabric } from 'fabric';\nimport {\n  addAnnotation,\n  undoAnnotation,\n  getLastAnnotIdx,\n  getLastCachedAnnot,\n  getLastCachedAnnotIdx,\n  deleteCachedAnnotation,\n  updateAnnotationLabel,\n  updateAnnotClassLabel,\n} from './annotationControl.js';\nimport { getCanvas } from './annotationSettings.js';\nimport { getDisabledClasses } from './annotationClass.js';\n\nexport const colors = [\n  'rgb(221, 153, 153, 0.7)',\n  'rgb(153, 221, 153, 0.7)',\n  'rgb(153, 153, 221, 0.7)',\n  'rgb(215, 215, 215, 0.7)',\n];\n\nexport function drawFreeStyle(canvas) {\n  window.canvas = canvas;\n  canvas.isMouseDown = false;\n\n  canvas.isDrawingMode = true;\n  canvas.freeDrawingBrush.color = colors.purple;\n  canvas.freeDrawingBrush.opacity = 0.1;\n  canvas.freeDrawingBrush.width = 10;\n}\n\nexport function drawRect(canvas, rect, label, classLabel) {\n  var fRect = new fabric.Rect({\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n    // if fully transparent, only stroke is selectable, hence this hack:\n    fill: 'rgb(255,255,255,.01)',\n    stroke: rect.color,\n    strokeLineJoin: 'round',\n    strokeWidth: 2,\n    objectCaching: false,\n  });\n\n  var group = new fabric.Group([fRect]);\n\n  group.on({\n    moving: function(o) {\n      const group = o.target;\n      const rect = group._objects[0];\n\n      if (group.left < 0) {\n        group.set('left', rect.strokeWidth / 2);\n        group.setCoords();\n      } else if (group.left + group.width > canvas.width) {\n        group.set('left', canvas.width - group.width - rect.strokeWidth / 2);\n        group.setCoords();\n      }\n\n      if (group.top < 0) {\n        group.set('top', rect.strokeWidth / 2);\n        group.setCoords();\n      } else if (group.top + group.height > canvas.height) {\n        group.set('top', canvas.height - group.height - rect.strokeWidth / 2);\n        group.setCoords();\n      }\n    },\n  });\n\n  var newLabel = label === 'label' ? (label += getLastAnnotIdx() + 1) : label;\n\n  var text = new fabric.IText(newLabel, {\n    fontSize: 16,\n    originX: 'left',\n    originY: 'top',\n    fontFamily: 'Arial',\n    fontWeight: 'bold',\n    fill: 'white',\n    textBackgroundColor: rect.color,\n    top: group.top,\n    left: group.left,\n  });\n\n  var classText = new fabric.IText(classLabel, {\n    fontSize: 16,\n    originX: 'left',\n    originY: 'bottom',\n    fontFamily: 'Arial',\n    fontWeight: 'bold',\n    fill: 'white',\n    textBackgroundColor: rect.color,\n    top: group.top + group.height,\n    left: group.left,\n  });\n\n  if (canvas) {\n    fRect.perPixelTargetFind = true;\n    canvas.add(group);\n    canvas.setActiveObject(group);\n    group.addWithUpdate(text);\n    group.addWithUpdate(classText);\n    addAnnotation(group, newLabel, classLabel);\n  }\n}\n\nexport function updateLabel(object, label) {\n  var oldLabel = '';\n  if (object && label) {\n    ungroup(object);\n\n    if (object) {\n      var objs = object._objects;\n      if (objs && objs.length > 0) {\n        for (var i = 0; objs.length; i++) {\n          if (objs[i]) {\n            if (i === 1) {\n              if (objs[i].text) {\n                oldLabel = objs[i].text;\n                objs[i].text = label;\n                updateAnnotationLabel(oldLabel, label);\n                getCanvas().renderAll();\n                regroup(object);\n                return;\n              }\n            }\n          } else {\n            return;\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function updateClassLabel(object, label) {\n  var oldLabel = '';\n  if (object && label) {\n    ungroup(object);\n\n    if (object) {\n      var objs = object._objects;\n      if (objs && objs.length > 0) {\n        for (var i = 0; objs.length; i++) {\n          if (objs[i]) {\n            if (i === 2) {\n              if (objs[i].text) {\n                oldLabel = objs[i].text;\n                objs[i].text = label;\n                updateAnnotClassLabel(oldLabel, label);\n                getCanvas().renderAll();\n                regroup(object);\n                return;\n              }\n            }\n          } else {\n            return;\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function ungroup(object) {\n  var canvas = getCanvas();\n  var items = object._objects;\n  if (items.length >= 2) {\n    object._restoreObjectsState();\n    canvas.remove(object);\n    for (var i = 0; i < items.length; i++) {\n      canvas.add(items[i]);\n      canvas.item(canvas.size() - 1).hasControls = true;\n    }\n    canvas.renderAll();\n  }\n}\n\nexport function regroup(object) {\n  if (object && object._objects.length === 3) {\n    var objs = object._objects;\n\n    var rect = objs[0];\n    var label = objs[1];\n    var classLabel = objs[2];\n\n    var group = new fabric.Group([rect, label, classLabel]);\n    var canvas = getCanvas();\n    if (canvas) {\n      canvas.add(group);\n      canvas.remove(rect);\n      canvas.remove(label);\n      canvas.remove(classLabel);\n      canvas.setActiveObject(group);\n    }\n  }\n}\n\nexport function filterClasses(cls) {\n  filterAnnotations(cls.name, cls.enabled);\n}\n\nexport function filterAnnotations(classLabel, enabled) {\n  var canvas = getCanvas();\n  var objs = canvas.getObjects();\n  for (var i = 0; i < objs.length; i++) {\n    var group = objs[i];\n    if (group) {\n      var group_elements = group._objects;\n      if (group_elements) {\n        var class_element = group._objects[2];\n        if (class_element && class_element.text) {\n          if (class_element.text === classLabel) {\n            if (enabled) {\n              markGroupVisible(group);\n            } else {\n              markGroupInvisible(group);\n              canvas.discardActiveObject();\n            }\n          }\n        }\n      }\n    }\n  }\n  canvas.renderAll();\n}\n\nexport function filterDisabledClasses() {\n  const classes = getDisabledClasses();\n  for (var i = 0; i < classes.length; i++) {\n    filterAnnotations(classes[i]);\n  }\n  getCanvas().renderAll();\n}\n\nexport function showAll() {\n  var canvas = getCanvas();\n  var objs = canvas.getObjects();\n  for (var i = 0; i < objs.length; i++) {\n    var group = objs[i];\n    if (group) {\n      markGroupVisible(group);\n    }\n  }\n}\n\nexport function markGroupVisible(group) {\n  ungroup(group);\n\n  var objs = group._objects;\n  for (var i = 0; i < objs.length; i++) {\n    var obj = objs[i];\n    markVisible(obj, true);\n  }\n\n  regroup(group);\n}\n\nexport function markGroupInvisible(group) {\n  ungroup(group);\n\n  var objs = group._objects;\n  for (var i = 0; i < objs.length; i++) {\n    var obj = objs[i];\n    markVisible(obj, false);\n  }\n\n  regroup(group);\n}\n\nfunction markVisible(obj, visible) {\n  obj.visible = visible;\n  obj.dirty = true;\n  getCanvas().renderAll();\n}\n\nexport function undo() {\n  var canvas = getCanvas();\n  const idx = getLastAnnotIdx();\n\n  if (idx >= 0) {\n    // remove from canvas\n    canvas.getObjects().map(function(o, i) {\n      if (i === idx) {\n        canvas.remove(o);\n      }\n      return null;\n    });\n\n    // remove from annotations\n    undoAnnotation();\n  }\n  return null;\n}\n\nexport function redo() {\n  var canvas = getCanvas();\n  const idx = getLastCachedAnnotIdx();\n\n  if (idx >= 0) {\n    // get last from cache\n    const cachedAnnot = getLastCachedAnnot();\n    // redraw on canvas\n    drawRect(canvas, cachedAnnot.group, cachedAnnot.label, cachedAnnot.class);\n    // remove from cache\n    deleteCachedAnnotation(idx);\n  }\n}\n","import create from 'zustand';\nimport {editAnnotationOption, editClassOption} from './annotationMenuOptions.js'\n\nexport const initState = {\n  menu: {\n    displayon: false,\n    coords: {\n      x: 0,\n      y: 0\n    },\n    items: [\n      {\n        \"label\": \"Edit Annotation\",\n        \"callback\": editAnnotationOption\n      },\n      {\n        \"label\": \"Edit Class\",\n        \"callback\": editClassOption\n      }\n    ],\n    objects: [],\n    select: 0,\n    canvas: null\n  }\n}\n\nexport const [useAnnotationMenu, AnnotationMenuApi] = create ( set => ({\n  ...initState,\n}))\n\nexport function isDisplayOn() {\n  return AnnotationMenuApi.getState().menu.displayon\n}\n\nexport function setCanvas(canvas) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    canvas: canvas\n  }))\n}\n\nexport function getCanvas() {\n  return AnnotationMenuApi.getState().canvas\n}\n\nexport function setDisplay(value) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    menu: {\n      ...prevState.menu,\n      displayon: value\n    }\n  }))\n}\n\nexport function getMenuCoords() {\n  return AnnotationMenuApi.getState().menu.coords\n}\n\nexport function setMenuCoords(x, y) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    menu: {\n      ...prevState.menu,\n      coords: {\n        x: x,\n        y: y\n      }\n    }\n  }))\n}\n\nexport function getItems() {\n  return AnnotationMenuApi.getState().menu.items\n}\n\nexport function setSelectedObjects(objects) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    menu: {\n      ...prevState.menu,\n      objects: objects\n    }\n  }))\n}\n\nexport function getSelectedObjects() {\n  return AnnotationMenuApi.getState().menu.objects\n}\n\nexport function updateSelect(sel) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    menu: {\n      ...prevState.menu,\n      select: sel\n    }\n  }))\n}\n","import create from 'zustand';\n\nimport { getAnnotationClasses } from './annotationControl.js';\n\nconst initState = {\n  classes: [\n    {\n      \"name\": \"Annotation Class 1\",\n      \"enabled\": false,\n    },\n    {\n      \"name\": \"Annotation Class 2\",\n      \"enabled\": false,\n    },\n    {\n      \"name\": \"Annotation Class 3\",\n      \"enabled\": false,\n    },\n    {\n      \"name\": \"Annotation Class 4\",\n      \"enabled\": false,\n    },\n  ]\n}\n\nfunction addClass(classLabel) {\n  const default_class = 'class1'\n  annotClassApi.setState(prevState => ({\n    ...prevState,\n    classes: [\n      ...prevState.classes,\n      {\n        name: classLabel || default_class,\n        enabled: false\n      },\n    ],\n  }));\n}\n\nexport const [useAnnotClass, annotClassApi] = create ( set => ({\n  ...initState,\n}))\n\nexport function updateClasses() {\n  const classes = getAnnotationClasses()\n  for (var i = 0; i < classes.length;  i++) {\n    const cls = classes[i]\n    if (!isDuplicateClass(cls)) {\n      addClass(cls)\n      enableClass(cls)\n    }\n  }\n}\n\nexport function enableClass(label) {\n  annotClassApi.setState( prevState => {\n    const classes = prevState.classes.map((cls, j) => {\n      if (cls.name === label) {\n        var newCls = cls;\n        newCls.enabled = true\n        return newCls;\n      }\n      else {\n        return cls\n      }\n    })\n    return {\n      classes\n    }\n  })\n}\n\nexport function toggleClassEnable(num) {\n  annotClassApi.setState( prevState => {\n    const classes = prevState.classes.map((cls, j) => {\n      if (j === num) {\n        var newCls = cls;\n        newCls.enabled = !cls.enabled\n        return newCls;\n      }\n      else {\n        return cls\n      }\n    })\n    return {\n      classes\n    }\n  })\n}\n\nexport function isDuplicateClass(name) {\n  const classes = annotClassApi.getState().classes\n  if (classes) {\n    const x = classes.filter(cls => cls.name === name);\n    if (x.length !== 0){\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function getClasses() {\n  return annotClassApi.getState().classes\n}\n\nexport function getDisabledClasses() {\n  var enabledClasses = []\n  const classes = annotClassApi.getState().classes\n  if (classes) {\n    for (var i = 0; i < classes.length; i++) {\n      const cls = classes[i]\n      if (!cls.enabled) {\n        enabledClasses.push(cls.name)\n      }\n    }\n  }\n  return enabledClasses\n}\n","import React from 'react';\nimport { fabric } from 'fabric';\nimport {\n  filterAnnotations,\n  showAll,\n  drawFreeStyle,\n  colors,\n} from '../../annotator/editControl.js';\nimport { annotApi } from '../../annotator/annotationStore.js';\nimport AnnotationMenu from '../../annotator/annotationMenu.js';\nimport {\n  setCanvas,\n  AnnotationMenuApi,\n} from '../../annotator/annotationSettings.js';\nimport {\n  openMenu,\n  startDrawing,\n  startSelecting,\n  finish,\n  addToFabric,\n  setFabricCanvas,\n  setMode,\n  fabricApi,\n  modes,\n} from '../../fabric/fabricControl.js';\n\nvar canvas;\n\nclass FabricLayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.canvasRef = React.createRef();\n\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleMouseDoubleClick = this.handleMouseDoubleClick.bind(this);\n    this.handleDrag = this.handleDrag.bind(this);\n    this.selectClass1 = this.selectClass1.bind(this);\n    this.showAll = this.showAllClasses.bind(this);\n    this.handleMoveAnnotation = this.handleMoveAnnotation.bind(this);\n    // this.handleResize = this.handleResize.bind(this);\n  }\n\n  componentDidMount() {\n    canvas = new fabric.Canvas(this.canvasRef.current, {\n      fireRightClick: true,\n    });\n    canvas.on({\n      'mouse:down': this.handleMouseDown,\n      'mouse:up': this.handleMouseUp,\n      'mouse:dblclick': this.handleMouseDoubleClick,\n      'object:moving': this.handleMoveAnnotation,\n      'object:rotating': this.handleDrag,\n      'object:scaling': this.handleDrag,\n    });\n    setCanvas(canvas);\n    setFabricCanvas(canvas);\n  }\n\n  handleDrag(e) {\n    startSelecting();\n  }\n\n  handleMoveAnnotation(e) {\n    setMode(modes.SELECT);\n  }\n\n  handleLeftMouseDown(options) {\n    const mode = fabricApi.getState().drawMode;\n    if (mode === modes.RECT) {\n      startDrawing(options.e.clientX, options.e.clientY);\n    } else if (mode === modes.FREE) {\n      drawFreeStyle(canvas);\n    }\n  }\n\n  handleRightMouseDown(options) {\n    openMenu(options.e.clientX, options.e.clientY);\n  }\n\n  handleLeftMouseUp(options) {\n    finish(options.e.clientX, options.e.clientY, colors[this.props.channel]);\n  }\n\n  handleRightMouseUp(options) {}\n\n  handleMouseDown(options) {\n    if (options.button === 3) {\n      this.handleRightMouseDown(options);\n    } else {\n      this.handleLeftMouseDown(options);\n    }\n  }\n\n  handleMouseUp(options) {\n    if (options.button === 3) {\n      this.handleRightMouseUp(options);\n    } else {\n      this.handleLeftMouseUp(options);\n    }\n  }\n\n  handleObjectSelect(e) {\n    // if more than one object is selected\n    // if Delete button is selected\n    // delete all objects from canvas\n    // remove from annotations\n  }\n\n  handleObjectResize(e) {\n    // if an object is selected, and resized\n    // updateRect(rect)\n  }\n\n  handleMouseDoubleClick(e) {\n    // if an object is selected\n    // updateLabel (label)\n    startSelecting();\n  }\n\n  displayMenu() {\n    if (canvas && canvas.getActiveObjects().length > 0) {\n      return <AnnotationMenu />;\n    }\n  }\n  selectClass1() {\n    filterAnnotations('class1');\n    this.forceUpdate();\n  }\n  showAllClasses() {\n    showAll();\n    this.forceUpdate();\n  }\n\n  render() {\n    annotApi.subscribe(state => {\n      if (state) {\n        addToFabric();\n      }\n    });\n    AnnotationMenuApi.subscribe(state => {\n      this.forceUpdate();\n    });\n\n    return (\n      <div\n        className=\"annotationLayer\"\n        onContextMenu={e => e.preventDefault()}\n        style={{\n          borderColor: colors[this.props.channel],\n          borderWidth: 2,\n          borderStyle: 'solid',\n          opacity: this.props.opacity,\n          zIndex: this.props.zIndex,\n        }}\n      >\n        <canvas ref={this.canvasRef} width={500} height={500} />\n        {this.displayMenu()}\n      </div>\n    );\n  }\n}\n\nexport default FabricLayer;\n","import React from \"react\";\nimport {editAnnotationLabel, editAnnotationClass} from './annotationMenuOptions.js'\n\nclass AnnotationSubMenu extends React.Component {\n constructor(props) {\n   super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.changeLabel = this.changeLabel.bind(this);\n    this.changeClassLabel = this.changeClassLabel.bind(this);\n\n    this.state = {\n      text: {\n        style: {\n         'position': 'absolute',\n         'top': '0px',\n         'left':'0px'\n        },\n      },\n      label: {\n        text: \"\",\n        style: {\n         'position': 'absolute',\n         'top': '0px',\n         'left':'0px'\n        },\n      },\n      button: {\n        style: {\n         'position': 'absolute',\n         'top': '0px',\n         'left':'0px'\n        },\n      },\n    };\n  }\n\n  componentDidMount() {\n    var labelTop = (parseInt(this.props.style.top.match(/\\d+/g)) - 40) +'px'\n    var buttonLeft = (parseInt(this.props.style.left.match(/\\d+/g)) + 105) +'px'\n\n    this.setState({\n      text: {\n        style: {\n           'position': this.props.style.position,\n           'top': this.props.style.top,\n           'left': this.props.style.left,\n           'width': '100px'\n        }\n      },\n      label: {\n        style: {\n           'position': this.props.style.position,\n           'top': labelTop,\n           'left': this.props.style.left,\n           'width': '100px'\n        },\n        text: ''\n      },\n      button: {\n        style: {\n           'position': this.props.style.position,\n           'top': this.props.style.top,\n           'left': buttonLeft\n        }\n      }\n    })\n  }\n\n  handleChange(event) {\n    if (event && event.target && event.target.value) {\n      var newStr = event.target.value\n      this.setState( prevState => ({\n        ...prevState,\n        label: {\n          ...prevState.label,\n          text: newStr\n        }\n      }))\n    }\n  }\n\n  changeLabel(event) {\n    editAnnotationLabel(this.state.label.text)\n  }\n\n  changeClassLabel(event) {\n    editAnnotationClass(this.state.label.text)\n  }\n\n  display() {\n    if (this.props.select === 1) {\n      return (\n        <div >\n          <div style={this.state.label.style}> <p> Label: </p> </div>\n          <input\n            type=\"text\"\n            value={this.state.label.text}\n            style={this.state.text.style}\n            onChange={this.handleChange}\n          />\n          <button style={this.state.button.style} onClick={this.changeLabel}> Change Label </button>\n        </div>\n      );\n    }\n    else if (this.props.select === 2) {\n      return (\n        <div >\n          <div style={this.state.label.style}> <p> Class Name: </p> </div>\n          <input\n            type=\"text\"\n            value={this.state.label.text}\n            style={this.state.text.style}\n            onChange={this.handleChange}\n          />\n          <button style={this.state.button.style} onClick={this.changeClassLabel}> Change Class Name </button>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {this.display()}\n      </div>\n    )\n  }\n}\n\nexport default AnnotationSubMenu;","import React from \"react\";\nimport { getItems, AnnotationMenuApi} from \"./annotationSettings.js\"\nimport AnnotationSubMenu from './annotationSubMenu.js'\n\nclass AnnotationMenu extends React.Component {\n constructor(props) {\n   super(props);\n\n    this.contextRef = React.createRef();\n    this.returnMenu = this.returnMenu.bind(this);\n\n    this.state = {\n      items: [],\n      coords: {\n        x: 0,\n        y: 0\n      },\n      style: {\n       'position': 'absolute',\n       'top': '0px',\n       'left':'0px'\n      },\n      on: false,\n      select: 0,\n    };\n  }\n\n  updateCoords(x, y) {\n    if (this.state.coords.x !== x\n      && this.state.coords.y !== y) {\n      this.setState( prevState => ({\n        ...prevState,\n        coords: {\n          x: x,\n          y: y,\n        },\n        style: {\n          ...prevState.style,\n          'top': `${y}px`,\n          'left':`${x+5}px`\n        }\n      }))\n    }\n  }\n\n  updateItems(items) {\n    if (this.state.items !== items) {\n      this.setState( prevState => ({\n        ...prevState,\n        items: items\n      }))\n    }\n  }\n\n  updateDisplay(on) {\n    if (this.state.on !== on) {\n      this.setState( prevState => ({\n        ...prevState,\n        on: on\n      }))\n    }\n  }\n  updateSelect(sel) {\n    if (this.state.select !== sel) {\n      this.setState( prevState => ({\n        ...prevState,\n        select: sel\n      }))\n    }\n  }\n\n  returnMenu() {\n    AnnotationMenuApi.subscribe(state => {\n      this.updateItems(state.menu.items)\n      this.updateCoords(state.menu.coords.x, state.menu.coords.y)\n      this.updateDisplay(state.menu.displayon)\n      this.updateSelect(state.menu.select)\n    })\n    if (this.state.on) {\n      return (\n        <div className='custom-context' id='customcontext' style={this.state.style} ref={this.contextRef}>\n        {\n          getItems().map((item, index, arr) => {\n            if (arr.length > 0) {\n              let label = item.label+\"-button-wrapper\"\n              return (\n                <div key={label}>\n                  <button onClick={item.callback}> {item.label} </button>\n                </div>\n              )\n            }\n            return null\n          })\n        }\n        </div>\n      )\n    }\n\n    if (this.state.select === 1 || this.state.select === 2) {\n      return (\n        <AnnotationSubMenu style={this.state.style} select={this.state.select}/>\n      )\n    }\n    return (\n      null\n    )\n  }\n\n  render() {\n    return (\n      <div id='cmenu'>\n        {this.returnMenu()}\n      </div>\n    );\n  }\n}\n\nexport default AnnotationMenu;","import create from 'zustand';\n\nimport { drawRect, drawFreeStyle } from '../annotator/editControl.js';\nimport {\n  isDisplayOn,\n  setDisplay,\n  setMenuCoords,\n  setSelectedObjects,\n} from '../annotator/annotationSettings.js';\n\nexport const modes = {\n  RECT: 'rectangle',\n  FREE: 'free draw',\n  SELECT: 'select',\n  NONE: 'none',\n};\n\nconst initState = {\n  mouse: {\n    x: 0,\n    y: 0,\n    down: false,\n  },\n  origin: {\n    x: 0,\n    y: 0,\n  },\n  drawMode: modes.RECT,\n  canvas: null,\n};\n\nexport const [useFabric, fabricApi] = create(set => ({\n  ...initState,\n}));\n\nexport function setFabricCanvas(canvas) {\n  fabricApi.setState(prevState => ({\n    canvas: canvas,\n  }));\n}\n\nexport function setMode(newMode) {\n  fabricApi.setState(prevState => ({\n    ...prevState,\n    drawMode: newMode,\n  }));\n\n  if (newMode === modes.FREE) {\n    fabricApi.getState().canvas.isDrawingMode = true;\n  } else {\n    fabricApi.getState().canvas.isDrawingMode = false;\n  }\n}\n\nexport function startSelecting() {\n  setMode(modes.SELECT);\n}\n\nexport function finishSelecting() {\n  setMode(modes.RECT);\n}\n\nexport function startDrawing(x, y) {\n  if (fabricApi.getState().canvas.isDrawingMode) {\n    startDrawingFree(x, y);\n  } else {\n    startDrawingRect(x, y);\n  }\n}\n\nexport function startDrawingFree(x, y) {\n  drawFreeStyle(fabricApi.getState().canvas);\n}\n\nexport function finish(x, y, color) {\n  if (fabricApi.getState().drawMode === modes.SELECT) {\n    finishSelecting();\n  } else if (fabricApi.getState().drawMode === modes.RECT) {\n    finishDrawingRect(x, y, color);\n  }\n}\n\nexport function startDrawingRect(x, y) {\n  setOrigin(x, y);\n}\n\nexport function finishDrawing(x, y) {\n  if (fabricApi.getState().drawMode === modes.RECT) {\n    finishDrawingRect(x, y);\n  }\n  setFabricCoords(x, y);\n}\n\nexport function finishDrawingRect(x, y, color) {\n  setFabricCoords(x, y);\n  const state = fabricApi.getState();\n  if (state.origin.x && state.origin.y && x && y) {\n    const width = state.mouse.x - state.origin.x;\n    if (Math.abs(width) >= 10) {\n      const rect = {\n        width: width,\n        height: state.mouse.y - state.origin.y,\n        top: state.origin.y,\n        left: state.origin.x,\n        color: color,\n      };\n      drawRect(fabricApi.getState().canvas, rect, 'label', 'class1');\n    }\n\n    setSelectedObjects(fabricApi.getState().canvas.getActiveObjects()[0]);\n  }\n}\n\nexport function setOrigin(x, y) {\n  fabricApi.setState(prevState => ({\n    ...prevState,\n    origin: {\n      x: x - fabricApi.getState().canvas._offset.left,\n      y: y - fabricApi.getState().canvas._offset.top,\n    },\n  }));\n}\n\nexport function setFabricCoords(x, y) {\n  let canvasLeft = fabricApi.getState().canvas._offset.left;\n  let canvasRight =\n    fabricApi.getState().canvas._offset.left +\n    fabricApi.getState().canvas.width;\n  let canvasTop = fabricApi.getState().canvas._offset.top;\n  let canvasBottom =\n    fabricApi.getState().canvas._offset.top +\n    fabricApi.getState().canvas.height;\n  let relX =\n    x < canvasLeft\n      ? canvasLeft\n      : x > canvasRight\n      ? canvasRight\n      : x - canvasLeft;\n  let relY =\n    y < canvasTop ? canvasTop : y > canvasBottom ? canvasBottom : y - canvasTop;\n\n  fabricApi.setState(prevState => ({\n    mouse: {\n      x: relX,\n      y: relY,\n    },\n  }));\n}\n\nexport function openMenu(x, y) {\n  if (!isDisplayOn()) {\n    setDisplay(true);\n    let canvas = fabricApi.getState().canvas;\n    setMenuCoords(x - canvas._offset.left, y - canvas._offset.top);\n  }\n}\n\nexport function addToFabric() {\n  let annots = fabricApi.getState().annotations;\n\n  if (annots.length > fabricApi.getState().canvas.getObjects().length) {\n    let lastAnnotIdx = annots.length - 1;\n    let annot = annots[lastAnnotIdx];\n\n    var newAnnot = {\n      left: parseInt(annot.rect.left),\n      top: parseInt(annot.rect.top),\n      width: parseInt(annot.rect.width),\n      height: parseInt(annot.rect.height),\n    };\n\n    drawRect(fabricApi.getState().canvas, newAnnot, annot.label, annot.class);\n  }\n}\n","\nexport class Volume {\n  constructor (args) {\n    this.channel = args.channel; // a data cube\n    this.segmentation = args.segmentation; // a segmentation cube\n\n    this.segments = {};\n    this.requests = [];\n  }\n\n  async renderChannelSlice (ctx, axis, slice) {\n    let _this = this;\n\n    let pixels = await _this.channel.grayImageSlice(axis, slice, /*transparency=*/false, /*copy=*/false);\n    // let pixels = _this.channel.imageSlice(axis, slice, /*copy=*/false);\n    let slice32 = await new Uint32Array(pixels.data.buffer); // creates a view, not an array\n\n    for (let i = slice32.length - 1; i >= 0; i--) {\n      slice32[i] = ((slice32[i] & 0x00ffff00) && slice32[i]);\n    }\n\n    await ctx.putImageData(pixels, 0, 0);\n    return this;\n  }\n  async load (buffer, width, slice) {\n    await this.loadVolume(this.channel, buffer, width, slice)\n  }\n  async loadVolume (cube, buffer, width, slice) {\n    await cube.insertImageData(buffer, width, 0, 0, slice)\n  }\n}","import React, { Component } from \"react\";\nimport create from 'zustand';\nimport {\n  Progress\n} from 'reactstrap';\n\nconst state = {\n  loaded: 0\n}\nconst [useState, stateApi] = create (set => ({\n  ...state\n}))\n\nexport async function loadSlices(cntxt, volume, axes, axis, files, type) {\n  if (type === 1) {\n    await _loadSlicesFromMultipageFile(cntxt, volume, axes, axis, files[0])\n  }\n  else {\n    _loadSlicesFromMultipleFiles(cntxt, volume, axes, axis, files)\n  }\n}\n\nexport async function updateChannelSlice(cntxt, volume, slice, axes, axis) {\n  if (cntxt && volume && axes) {\n    await volume.renderChannelSlice(cntxt, axes[axis], slice)\n  }\n}\n\nasync function _loadVolumes(volume, pages, width) {\n  for (var pIdx = 0; pIdx < pages.length; pIdx++) {\n    const page = pages[pIdx]\n\n    const pct = Math.round((pIdx/pages.length)*100)\n    if ((pct % 10) === 0) {\n      stateApi.setState({\n        loaded: pct\n      })\n    }\n\n    console.log(\"loading \", pIdx , \"/\", pages.length)\n    await volume.load(page, width, pIdx)\n  }\n}\n\nasync function _loadSlicesFromMultipageFile(cntxt, volume, axes, axis, file) {\n  if (file && (file.pages) && (file.pages.length > 0)) {\n    await _loadVolumes(volume, file.pages, file.image.width)\n  }\n\n  updateChannelSlice(cntxt, volume, 0, axes, axis);\n}\n\nfunction _loadSlicesFromMultipleFiles(cntxt, volume, axes, axis, files) {\n  for (var fIdx = 0; fIdx < files.length; fIdx++) {\n    const file = files[fIdx]\n    if (file && (file.pages) && (file.pages.length > 0)) {\n      const pages = file.pages\n      for (var pIdx = 0; pIdx < pages.length; pIdx++) {\n        const page = pages[pIdx]\n        volume.load(this.state.cntxt, page, file.image.width, fIdx)\n      }\n      updateChannelSlice(cntxt, volume, 0, axes, axis);\n    }\n  }\n}\n\nclass ProgressBar extends Component {\n\n  state = {\n    loaded: 0\n  }\n\n  display() {\n    if (this.state.loaded !== 100) {\n      return (\n        <Progress striped bar value={this.state.loaded}> {this.state.loaded}% </Progress>\n      )\n    }\n    else {\n      return (\n        <div> </div>\n      )\n    }\n  }\n\n  render() {\n    stateApi.subscribe(state => {\n      this.state.loaded = state.loaded\n    })\n    return (\n      this.display()\n    )\n  }\n}\n\nexport default ProgressBar;\n","\nclass CachedImageData {\n    constructor (context) {\n        this.context = context;\n        this.cache = null;\n    }\n\n    getImageData(width, height) {\n        if (!this.cache || this.cache.width !== width || this.cache.height !== height) {\n            this.cache = this.context.createImageData(width, height);\n        }\n\n        return this.cache;\n    }\n}\n\nexport default CachedImageData","\nimport CachedImageData from './cachedImageData.js'\n\nclass DataCube {\n  constructor (args) {\n    this.bytes = args.bytes || 1;\n    this.size = args.size || { x: 256, y: 256, z: 256 };\n    this.canvas_context = args.context;\n    this.cube = this.materialize();\n\n    // this.canvas_context = this.createImageContext();\n    this.cached_imgdata = new CachedImageData(this.canvas_context);\n    this.clean = true;\n    this.loaded = false;\n\n    this.faces = {\n      x: [ 'y', 'z' ],\n      y: [ 'x', 'z' ],\n      z: [ 'x', 'y' ],\n    };\n  }\n\n  faceDimensions (axis) {\n    let face = this.faces[axis];\n    return [\n      this.size[face[0]],\n      this.size[face[1]]\n    ];\n  }\n\n  materialize () {\n    let ArrayType = this.arrayType();\n\n    let size = this.size;\n\n    return new ArrayType(size.x * size.y * size.z);\n  }\n\n  insertImageData (imgdata, width, offsetx, offsety, offsetz) {\n    let _this = this;\n\n    // let pixels = imgdata.data; // Uint8ClampedArray\n    let pixels = imgdata;\n\n    // This viewing of the Uint8 as a Uint32 allows for\n    // a memory stride of 4x larger, making reading and writing cheaper\n    // as RAM is the slow thing here.\n    let data32 = new Uint32Array(pixels.buffer); // creates a view, not an array\n\n    // Note: on little endian machine, data32 is 0xaabbggrr, so it's already flipped\n    // from the Uint8 RGBA\n\n    let masks = {\n      true: {\n        1: 0x000000ff,\n        2: 0x0000ffff,\n        4: 0xffffffff,\n      },\n      false: {\n        1: 0xff000000,\n        2: 0xffff0000,\n        4: 0xffffffff,\n      },\n    };\n\n    const mask = masks[this.isLittleEndian()][this.bytes];\n\n    let x = 0, y = 0;\n\n    const sizex = _this.size.x | 0,\n        zadj = (offsetz * _this.size.x * _this.size.y) | 0;\n\n    for (y = width - 1; y >= 0; y--) {\n      for (x = width - 1; x >= 0; x--) {\n\n        _this.cube[\n          (offsetx + x) + sizex * (offsety + y) + zadj\n        ] = data32[ x + y * width ] & mask;\n      }\n    }\n\n    _this.clean = false;\n\n    return this;\n  }\n\n  slice (axis, index, copy = true) {\n    let _this = this;\n\n    if (index < 0 || index >= this.size[axis]) {\n      throw new Error(index + ' is out of bounds.');\n    }\n\n    const xsize = _this.size.x,\n      ysize = _this.size.y,\n      zsize = _this.size.z;\n\n    const xysize = xsize * ysize;\n\n    let face = this.faces[axis];\n    let ArrayType = this.arrayType();\n\n    if (axis === 'z') {\n      let byteoffset = index * xysize * this.bytes;\n\n      if (copy) {\n        let buf = _this.cube.buffer.slice(byteoffset, byteoffset + xysize * this.bytes);\n        return new ArrayType(buf);\n      }\n      else {\n        return new ArrayType(_this.cube.buffer, byteoffset, xysize);\n      }\n    }\n\n    let square = new ArrayType(this.size[face[0]] * this.size[face[1]]);\n\n    // Note: order of loops is important for efficient memory access\n    // and correct orientation of images. Consecutive x access is most efficient.\n\n    let i = square.length - 1;\n    if (axis === 'x') {\n      for (let z = zsize - 1; z >= 0; --z) {\n        for (let y = ysize - 1; y >= 0; --y) {\n          square[i] = _this.cube[index + xsize * y + xysize * z];\n          --i;\n        }\n      }\n    }\n    else if (axis === 'y') {\n      // possible to make this more efficient with an array memcpy\n      // as 256 x are consecutive, but no memcpy in browser.\n      const yoffset = xsize * index;\n      for (let z = zsize - 1; z >= 0; --z) {\n        for (let x = xsize - 1; x >= 0; --x) {\n          square[i] = _this.cube[x + yoffset + xysize * z];\n          --i;\n        }\n      }\n    }\n\n    return square;\n  }\n\n  async grayImageSlice (axis, index, transparency=false, copy=true) {\n\n    let square = await this.slice(axis, index, /*copy=*/false);\n\n    let sizes = await this.faceDimensions(axis);\n\n    let imgdata = copy\n      ? await this.canvas_context.createImageData(sizes[0], sizes[1])\n      : await this.cached_imgdata.getImageData(sizes[0], sizes[1]);\n\n    let data32 = new Uint32Array(imgdata.data.buffer);\n\n    const alpha = this.isLittleEndian()\n      ? 0xff000000\n      : 0x000000ff;\n\n    let i = 0;\n\n    if (transparency) {\n      for (i = square.length - 1; i >= 0; i--) {\n        data32[i] = (square[i] | (square[i] << 8) | (square[i] << 16) | (square[i] && alpha));\n      }\n    }\n    else {\n      for (i = square.length - 1; i >= 0; i--) {\n        data32[i] = (square[i] | (square[i] << 8) | (square[i] << 16) | alpha);\n      }\n    }\n\n    return imgdata;\n  }\n\n  // http://stackoverflow.com/questions/504030/javascript-endian-encoding\n  isLittleEndian () {\n    var arr32 = new Uint32Array(1);\n    var arr8 = new Uint8Array(arr32.buffer);\n    arr32[0] = 255;\n\n    let islittle = (arr8[0] === 255);\n\n    this.isLittleEndian = () => islittle;\n\n    return islittle;\n  }\n\n  // For internal use, return the right bitmask for rgba image slicing\n  // depending on CPU endianess.\n  getRenderMaskSet () {\n    let bitmasks = {\n      true: { // little endian, most architectures\n        r: 0x000000ff,\n        g: 0x0000ff00,\n        b: 0x00ff0000,\n        a: 0xff000000,\n      },\n      false: { // big endian, mostly ARM and some specialized equipment\n        r: 0xff000000,\n        g: 0x00ff0000,\n        b: 0x0000ff00,\n        a: 0x000000ff,\n      },\n    };\n\n    return bitmasks[this.isLittleEndian()];\n  }\n  arrayType () {\n    let choices = {\n      1: Uint8ClampedArray,\n      2: Uint16Array,\n      4: Uint32Array,\n    };\n\n    let ArrayType = choices[this.bytes];\n\n    if (ArrayType === undefined) {\n      throw new Error(this.bytes + ' is not a valid typed array byte count.');\n    }\n\n    return ArrayType;\n  }\n}\n\nexport default DataCube","import React, { Component } from \"react\";\nimport { fApi } from '../../utils/index.js'\nimport {Volume} from '../../datacube/volume.js'\nimport ProgressBar, {\n  loadSlices,\n} from  '../../datacube/datacubeControls.js'\nimport DataCube from '../../datacube/datacube.js'\n\nclass mainTiffViewer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.canvas = React.createRef();\n    this.state = {\n      axes: ['x', 'y', 'z'],\n      axisIdx: props.axis,\n      sliceIdx: 0,\n      cntxt: null,\n    }\n    this.fileLength = 0\n    this.length = 0\n\n    // 0: multifile\n    // 1: multipage\n    this.type = 1\n\n    this.cube = {\n      x: 256,\n      y: 256,\n      z: 256\n    }\n  }\n\n  componentDidMount() {\n    this.setState(prevState => ({\n      cntxt: this.canvas.current.getContext(\"2d\")\n    }))\n  }\n\n  async updateForFile(state) {\n    if (state && state.file) {\n      const idx = state.file.length - 1\n\n      if ((state.file.length > 0) && (state.file[idx].pages) && (state.file[idx].pages.length > 0) && (state.file.length !== this.fileLength)) {\n\n        if (this.type === 0) {\n          this.fileLength = this.length = state.file.length\n        }\n        else if (this.type === 1) {\n          this.fileLength = state.file.length\n          this.length = state.file[idx].pages.length\n        }\n\n        this.cube.x = this.cube.y = this.cube.z = (Math.max(256, this.length))\n\n        this.volume = new Volume({\n          channel: new DataCube({\n            bytes: 1,\n            size: this.cube,\n            context: this.state.cntxt\n          }),\n        });\n\n        await loadSlices(this.state.cntxt, this.volume, this.state.axes, 2, state.file, this.type)\n      }\n    }\n    this.forceUpdate();\n  }\n\n  clamp(val, min, max) {\n    return Math.min(Math.max(val, min), max);\n  }\n\n  render() {\n    fApi.subscribe(state =>  {\n      this.updateForFile(state);\n    })\n    return (\n      <div width=\"500px\" height=\"500px\">\n        <canvas id=\"canvas-1\" ref={this.canvas}\n          width=\"500px\"\n          height=\"500px\"\n        >\n        </canvas>\n        <ProgressBar />\n      </div>\n    )\n  }\n}\n\nexport default mainTiffViewer;","import React from 'react';\n\nimport {\n  cardStyle,\n  card,\n  mainImg,\n  mainCanvasStyle,\n  canvasStyle1,\n  canvasStyle2,\n  canvasStyle3,\n} from '../style.js';\nimport Viewer from '../../viewer/index.js';\nimport { Card, CardTitle, CardBody } from 'reactstrap';\nimport { canvasApi } from '../../imagecanvas/canvasStore.js';\nimport { settingsApi } from '../../mainSettings.js';\nimport FabricLayer from './FabricLayer.js';\nimport MainTiffViewer from './mainTiffViewer.js';\n\nclass mainViewer extends React.Component {\n  altView() {\n    return (\n      <Card style={card}>\n        <CardBody>\n          <CardTitle> Image View </CardTitle>\n          <Viewer imageWidth={mainImg.width} type=\"0\" />\n        </CardBody>\n        <br></br>\n      </Card>\n    );\n  }\n  canvasView() {\n    var canvas = (\n      <MainTiffViewer\n        axis=\"2\"\n        className=\"annot-view\"\n        alt=\"main-canvas\"\n        width=\"500px\"\n        height=\"500px\"\n        channel=\"4\"\n      />\n    );\n    return (\n      <Card style={card}>\n        <CardBody>\n          <CardTitle> Image View </CardTitle>\n          <div id=\"canvasContainer\">\n            <div id=\"main-canvas-view\" style={mainCanvasStyle}>\n              {canvas}\n            </div>\n            <FabricLayer zIndex={5} channel={3} />\n          </div>\n        </CardBody>\n        <br></br>\n      </Card>\n    );\n  }\n\n  channelViews() {\n    var view1;\n    var view2;\n    var view3;\n\n    var fabricCanvas1;\n    var fabricCanvas2;\n    var fabricCanvas3;\n    var canvasZIndex;\n    var opacity;\n\n    var lastSelected = settingsApi.getState().lastSelected;\n    if (settingsApi.getState().channels[0].selected) {\n      console.log('displaying 1');\n      view1 = canvasApi.getState().canvas[0];\n      canvasZIndex = lastSelected === '1' ? 10 : 4;\n      opacity = lastSelected === '1' ? 1 : 0.5;\n      fabricCanvas1 = (\n        <FabricLayer zIndex={canvasZIndex} opacity={opacity} channel={0} />\n      );\n    }\n    if (settingsApi.getState().channels[1].selected) {\n      console.log('displaying 2');\n      view2 = canvasApi.getState().canvas[1];\n      canvasZIndex = lastSelected === '2' ? 10 : 6;\n      opacity = lastSelected === '2' ? 1 : 0.5;\n      fabricCanvas2 = (\n        <FabricLayer zIndex={canvasZIndex} opacity={opacity} channel={1} />\n      );\n    }\n    if (settingsApi.getState().channels[2].selected) {\n      console.log('displaying 3');\n      view3 = canvasApi.getState().canvas[2];\n      canvasZIndex = lastSelected === '3' ? 10 : 8;\n      opacity = lastSelected === '3' ? 1 : 0.5;\n\n      fabricCanvas3 = (\n        <FabricLayer zIndex={canvasZIndex} opacity={opacity} channel={2} />\n      );\n    }\n    return (\n      <Card style={card}>\n        <CardBody>\n          <CardTitle> Image View </CardTitle>\n          <div id=\"canvasContainer\">\n            <div style={canvasStyle1}>{view1}</div>\n            {fabricCanvas1}\n            <div style={canvasStyle2}>{view2}</div>\n            {fabricCanvas2}\n            <div style={canvasStyle3}>{view3} </div>\n            {fabricCanvas3}\n          </div>\n        </CardBody>\n        <br></br>\n      </Card>\n    );\n  }\n\n  display() {\n    if (\n      !settingsApi.getState().channels[0].selected &&\n      !settingsApi.getState().channels[1].selected &&\n      !settingsApi.getState().channels[2].selected\n    ) {\n      return this.canvasView();\n    } else {\n      return this.channelViews();\n    }\n  }\n\n  render() {\n    settingsApi.subscribe(state => {\n      this.forceUpdate();\n    });\n    return (\n      <div className=\"main-view\" style={cardStyle}>\n        {this.display()}\n        {/* <FabricLayer /> */}\n      </div>\n    );\n  }\n}\n\nexport default mainViewer;\n","import React, { Component } from \"react\";\nimport { fApi } from '../../utils/index.js'\nimport {Volume} from '../../datacube/volume.js'\nimport ProgressBar, {\n  loadSlices,\n  updateChannelSlice,\n} from  '../../datacube/datacubeControls.js'\nimport DataCube from '../../datacube/datacube.js'\nimport Slider from './slider.js';\n\nclass TiffViewer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.canvas = React.createRef();\n    this.state = {\n      axes: ['x', 'y', 'z'],\n      axisIdx: props.axis,\n      sliceIdx: 0,\n      cntxt: null,\n    }\n    this.fileLength = 0\n    this.length = 0\n\n    // 0: multifile\n    // 1: multipage\n    this.type = 1\n\n    this.cube = {\n      x: 256,\n      y: 256,\n      z: 256\n    }\n  }\n\n  componentDidMount() {\n    this.setState(prevState => ({\n      cntxt: this.canvas.current.getContext(\"2d\")\n    }))\n  }\n\n  async updateForFile(state) {\n    if (state && state.file) {\n      const idx = state.file.length - 1\n\n      if ((state.file.length > 0) && (state.file[idx].pages) && (state.file[idx].pages.length > 0) && (state.file.length !== this.fileLength)) {\n\n        if (this.type === 0) {\n          this.fileLength = this.length = state.file.length\n        }\n        else if (this.type === 1) {\n          this.fileLength = state.file.length\n          this.length = state.file[idx].pages.length\n        }\n\n        this.cube.x = this.cube.y = this.cube.z = (Math.max(256, this.length))\n\n        this.volume = new Volume({\n          channel: new DataCube({\n            bytes: 1,\n            size: this.cube,\n            context: this.state.cntxt\n          }),\n        });\n\n        await loadSlices(this.state.cntxt, this.volume, this.state.axes, this.state.axisIdx, state.file, this.type)\n      }\n    }\n    this.forceUpdate();\n  }\n\n  slice(value) {\n    this.setState( prevState => ({\n      ...prevState,\n      sliceIdx: value\n    }));\n    updateChannelSlice(this.state.cntxt, this.volume, value, this.state.axes, this.state.axisIdx);\n    this.forceUpdate()\n  }\n\n  nextSlice(dec) {\n    var slice\n    if (dec) slice = (this.clamp(this.state.sliceIdx - 1, 0, Math.max(0, this.length-1)))\n    else slice = (this.clamp(this.state.sliceIdx + 1, 0, Math.max(0, this.length-1)))\n    this.slice(slice)\n  }\n\n  sliderValueSlice(value) {\n    this.slice(value)\n  }\n\n  nextAxis(dec) {\n    var idx\n    if (dec) idx = (this.state.axisIdx + 2) % this.state.axes.length\n    else idx = (this.state.axisIdx + 1) % this.state.axes.length\n\n    this.setState( prevState => ({\n      ...prevState,\n      axisIdx: idx\n    }));\n    updateChannelSlice(this.state.cntxt, this.volume, this.state.sliceIdx, this.state.axes, idx);\n    this.forceUpdate()\n  }\n\n  clamp(val, min, max) {\n    return Math.min(Math.max(val, min), max);\n  }\n\n  render() {\n    fApi.subscribe(state =>  {\n      this.updateForFile(state);\n    })\n    return (\n      <div>\n        <canvas id=\"canvas-1\" ref={this.canvas}\n          width=\"100%\"\n          height=\"100%\"\n        >\n        </canvas>\n        <ProgressBar />\n        <div className=\"slice-slider-container\">\n          <Slider\n            label=\"\"\n            width=\"40%\"\n            min=\"0\"\n            max={Math.max(this.length-1, 0)}\n            step=\"1\"\n            initial=\"0\"\n            multiplier=\"1\"\n            raw=\"1\"\n            sliderValue={this.sliderValueSlice.bind(this)}\n          />\n          <button\n            id=\"resetSliceBtn\"\n            onClick={() => {\n              this.nextSlice(true);\n            }}\n          >\n            {\"<<\"}\n          </button>\n          <button\n            id=\"resetSliceBtn\"\n            onClick={() => {\n              this.slice(0);\n            }}\n          >\n            Go to Slice 0\n          </button>\n          <button\n            id=\"resetSliceBtn\"\n            onClick={() => {\n              this.nextSlice(false);\n            }}\n          >\n            {\">>\"}\n          </button>\n          <div> Slice: {this.state.sliceIdx} </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default TiffViewer;","import React from 'react';\n\nimport { cardStyle, card } from '../style.js';\nimport { Card, CardTitle, CardBody } from 'reactstrap';\nimport AxisTiffViewer from './axisTiffViewer.js';\n\nclass AxesViewer extends React.Component {\n\n  view1 = <AxisTiffViewer axis=\"2\"/>\n  view2 = <AxisTiffViewer axis=\"0\"/>\n  view3 = <AxisTiffViewer axis=\"1\"/>\n\n  render() {\n    return (\n      <div>\n        <div className=\"card-axis-xy\" style={cardStyle}>\n          <Card style={card}>\n            <CardBody>\n              <CardTitle> Axis XY </CardTitle>\n              {this.view1}\n            </CardBody>\n          </Card>\n        </div>\n\n        <br></br>\n        <div className=\"card-axis-yz\" style={cardStyle}>\n          <Card style={card}>\n            <CardBody>\n              <CardTitle> Axis YZ </CardTitle>\n              {this.view2}\n            </CardBody>\n          </Card>\n        </div>\n\n        <br></br>\n        <div className=\"card-axis-xz\" style={cardStyle}>\n          <Card style={card}>\n            <CardBody>\n              <CardTitle> Axis XZ </CardTitle>\n              {this.view3}\n            </CardBody>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AxesViewer;\n","import React from 'react';\n\nimport { cardStyle, card } from '../style.js';\nimport './../styles.css';\nimport '../../utils/styles.css';\nimport { updateClasses, getClasses, toggleClassEnable, annotClassApi } from '../../annotator/annotationClass.js'\n\nimport { Button, Card, CardTitle, CardBody } from 'reactstrap';\nimport { annotApi } from '../../annotator/annotationStore.js';\nimport { filterClasses } from '../../annotator/editControl.js'\n\nclass AnnotatorViewer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      classes: [],\n      annotClasses: [],\n      enables: []\n    }\n  }\n\n  futureClass = []\n  futureAnnotClass = []\n\n  componentDidUpdate(prevState) {\n    for (var i = 0; i < prevState.classes; i++) {\n      const cls = prevState.classes[i]\n      if (cls\n        && (this.state.classes[i] !== cls.name)\n        && (this.state.enables[i] !== cls.enabled)\n      ) {\n        return true\n      }\n    }\n    for (i = 0; i < prevState.annotClasses; i++) {\n      const annotCls = prevState.annotClasses[i]\n      if (annotCls\n        && (this.state.annotClasses[i] !== annotCls)\n      ) {\n        return true\n      }\n    }\n    return false\n  }\n\n  filter(sel, enabled) {\n    const classes = getClasses();\n    toggleClassEnable(sel);\n    filterClasses(classes[sel]);\n  }\n\n  updateAnnotClasses(annots) {\n    for (var i = 0; i < annots.length; i++){\n      const cls = annots[i]\n      if (!this.state.annotClasses.includes(cls.class) && !this.futureAnnotClass.includes(cls.class)) {\n        this.futureAnnotClass.push(cls.class)\n        this.setState(prevState => ({\n          ...prevState,\n          annotClasses: [\n            ...prevState.annotClasses,\n            cls.class\n          ],\n        }));\n      }\n    }\n  }\n\n  updateClasses(classes) {\n    for (var i = 0; i < classes.length; i++){\n      const idx = i;\n      const cls = classes[idx]\n      if (!this.state.classes.includes(cls.name) && !this.futureClass.includes(cls.name)) {\n        this.futureClass.push(cls.name)\n        this.setState(prevState => ({\n          ...prevState,\n          classes: [\n            ...prevState.classes,\n            cls.name,\n          ]\n        }));\n      }\n\n      this.setState( prevState => {\n        const enables = prevState.enables.map((en, j) => {\n          if (j === idx) {\n            return cls.enabled\n          }\n          else {\n            return en\n          }\n        })\n        return {\n          enables\n        }\n      })\n    }\n  }\n\n  display () {\n    const classes = getClasses();\n    var divs = []\n    for (var i = 0; i < classes.length; i++) {\n      const sel = i\n      const enabled = classes[sel].enabled\n      divs.push (\n        <Button\n          outline\n          color=\"primary\"\n          id=\"annot1Btn\"\n          onClick={() => {\n            this.filter(sel, !enabled);\n          }}\n          active={enabled}\n        >\n          {classes[sel].name}\n        </Button>\n      )\n    }\n    return (\n      <div>\n        <div className=\"annotations-class\" style={cardStyle}>\n\n          <Card style={card}>\n            <CardBody>\n              <CardTitle> Annotated Class Selection </CardTitle>\n            </CardBody>\n            {divs}\n          </Card>\n        </div>\n\n        <br></br>\n      </div>\n    )\n  };\n\n  render() {\n    annotApi.subscribe(state => {\n      if (state) {\n        updateClasses()\n        this.updateAnnotClasses(state.annotations)\n      }\n    })\n    annotClassApi.subscribe(state => {\n      if (state) {\n        this.updateClasses(state.classes);\n      }\n    })\n    return (\n      <div>\n        {this.display()}\n      </div>\n    );\n  }\n}\n\nexport default AnnotatorViewer;\n","import React from 'react';\n\nimport { thumb, thumbInner } from '../style.js';\nimport { fApi } from '../../utils/index.js';\nimport { fabric } from 'fabric';\n\nclass Thumbnails extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.selected = 0;\n    this.files = [];\n    this.canvasRef = React.createRef();\n    this.canvas = null\n  }\n\n  componentDidMount() {\n    this.canvas = new fabric.Canvas(this.canvasRef.current);\n  }\n\n  setSelected(idx) {\n    if (this.selected !== idx) {\n      fApi.setState(prevState => ({\n        ...prevState,\n        selected: idx,\n      }));\n      this.selected = idx;\n    }\n  }\n\n  updateForFile(state) {\n    if (state && (state.file.length > 0) && (state.file.length !== this.files.length)) {\n\n      const tiffFiles = state.file.filter(file => file.type === \"image/tiff\")\n      for (var i = this.files.length; i < tiffFiles.length; i++) {\n        const idx = tiffFiles.length - 1\n        const file = tiffFiles[idx]\n\n        const newFile = {\n          rgba: file.rgba,\n          width: file.image.width,\n          height: file.image.height,\n          page: file.pages[0],\n          name: file.name,\n          type: file.type\n        }\n\n        this.files.push(newFile)\n      }\n      this.forceUpdate();\n    }\n  }\n\n  classicImage = (file, idx) => {\n    return(\n            <div style={thumb} key={file.name}>\n              <div style={thumbInner}>\n                <img\n                  src={file.image}\n                  style={file.style}\n                  alt={file.name}\n                  onClick={() => this.setSelected(idx)}\n                />\n              </div>\n            </div>\n    )\n  }\n\n  allThumbs = () => {\n    var elements = [];\n\n    if (fApi.getState().file) {\n      fApi.getState().file.map ((file, idx) => {\n        if (file.type === \"image/png\"\n        ){\n          elements.push (\n            this.classicImage(file, idx)\n          )\n        }\n        return null;\n      });\n    }\n\n    return (\n      <div>\n        {elements}\n      </div>\n    );\n  }\n\n  shrinkTiff(context, imageData, idx) {\n    const cw = 50\n    const ch = 50\n    const imgW = imageData.width\n    const imgH = imageData.height\n\n    var newC = document.createElement('canvas')\n    newC.width = imgW\n    newC.height = imgH\n    newC.getContext('2d').putImageData(imageData, 0, 0)\n\n    var x = (cw+10) * idx\n    var y = 0\n    context.drawImage(newC, x, y, cw, ch)\n  }\n\n  loadTiff(context) {\n    for (var f = 0; f < this.files.length; f++) {\n\n      const file = this.files[f]\n      var page = null\n      if (file ) {\n        page = file.page\n      }\n      if (page && (file.width > 0) && (file.height > 0)) {\n        const imageData = context.createImageData(\n          file.width,\n          file.height\n        );\n\n        for (let idx = 0; idx < page.length; idx++) {\n          imageData.data[idx] = page[idx];\n        }\n\n        this.shrinkTiff(context, imageData, f)\n      }\n    }\n  }\n\n  allTiffsCanvas = () => {\n    if (this.canvas) this.loadTiff(this.canvas.getContext('2d'))\n    return (\n      <div>\n        <canvas\n          ref={this.canvasRef}\n          width=\"1000px\"\n          height=\"1000px\"\n          margin=\"0px\"\n          id=\"tiff-canvas\"\n        />\n      </div>\n    );\n  }\n\n  display() {\n    return (\n      <div>\n        {this.allThumbs()}\n        {this.allTiffsCanvas()}\n      </div>\n    )\n  }\n\n  render() {\n\n    fApi.subscribe(state => {\n      this.updateForFile(state)\n      this.forceUpdate()\n    })\n\n    return (\n      <div id=\"thumbsContainer\">\n        {this.display()}\n      </div>\n    );\n  }\n}\n\nexport default Thumbnails;\n","import create from 'zustand';\nimport { settingsApi } from '../mainSettings.js';\n\nexport const initState = () => {\n  return settingsApi.getState().dev ? devState : prodState;\n};\nexport const prodState = {\n  img_name: '',\n  annotations: [],\n};\n\nexport const devState = {};\n\nexport const [useAnnotStore, annotApi] = create(set => ({\n  ...initState(),\n}));\n","import csv from 'csvtojson';\nimport { saveJson, updateTiffPages } from '../fileuploader/fileControl.js';\nimport UTIF  from \"utif\"\n\nexport function importCsv(file) {\n  const reader = new FileReader();\n\n  reader.onload = () => {\n    const fileAsBinaryString = reader.result;\n\n    csv({\n      noheader: true,\n      output: 'json',\n    })\n      .fromString(fileAsBinaryString)\n      .then(csvRows => {\n        const toJson = [];\n        csvRows.forEach((aCsvRow, i) => {\n          if (i !== 0) {\n            const builtObject = {};\n\n            Object.keys(aCsvRow).forEach(aKey => {\n              const valueToAddInBuiltObject = aCsvRow[aKey];\n              const keyToAddInBuiltObject = csvRows[0][aKey];\n              builtObject[keyToAddInBuiltObject] = valueToAddInBuiltObject;\n            });\n\n            toJson.push(builtObject);\n          }\n        });\n        saveJson(toJson);\n      });\n  };\n\n  reader.onabort = () => console.log('file reading was aborted');\n  reader.onerror = () => console.log('file reading has failed');\n\n  reader.readAsText(file, 'ISO-8859-1');\n}\n\nexport function importJson(file) {\n  const reader = new FileReader();\n  let json;\n  reader.onload = () => {\n    json = JSON.parse(reader.result);\n    saveJson(json.annotations);\n  };\n  reader.readAsText(file);\n}\n\nexport function importTiff(file) {\n  const reader = new FileReader();\n\n  if (file) {\n    reader.onload = () => {\n      var success = file.type === 'image/tiff';\n      if (success) {\n          console.debug(\"importer::importTiff() - Loading TIFF image...\", file.name);\n        }\n\n      }\n      reader.onloadend = (event) => {\n        console.debug(\"importer::importTiff() - Parsing TIFF image...\", file.name);\n        parseMultiTiff(file.name, event.target.result);\n      }\n    reader.onprogress = () => {\n        console.log(\"importer::importTiff()\", \"Still Loading...\", file.name)\n      }\n    reader.readAsArrayBuffer(file);\n  }\n}\n\nexport function parseMultiTiff(name, buffer) {\n\n  var pages = []\n  const ifds = UTIF.decode(buffer);\n\n  for (var i = 0; i < ifds.length; i++) {\n    const idx = i\n    UTIF.decodeImage(buffer, ifds[idx]);\n    var rgba = UTIF.toRGBA8(ifds[idx]);\n    pages.push(rgba)\n  }\n\n  var image = new Image(ifds[0].width, ifds[0].height)\n  updateTiffPages(name, pages, image)\n}\n","import { fileApi } from './fileStore.js';\nimport { annotApi } from '../annotator/annotStore.js';\nimport { addAnnotation } from '../annotator/annotationControl.js';\nimport {\n  createTexture,\n  createTextureFromTiff,\n} from '../imagecanvas/ImageStore.js';\nimport { importCsv, importJson, importTiff } from '../annotator/importer.js';\n\nconst img = {\n  display: 'block',\n  width: 'auto',\n  height: '100%',\n};\n\nvar idx = 0;\n\nexport function isFirstFile() {\n  return fileApi.getState().size === 0;\n}\n\nexport function isValidFile(name) {\n  // check if file is already uploaded\n  var validFile = false;\n\n  fileApi.setState(prevState => {\n    if (prevState.file) {\n      const x = prevState.file.filter(file => file.name === name);\n      if (x.length === 0) {\n        validFile = true;\n      }\n    }\n  });\n  return validFile;\n}\n\nexport function initPng(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      {\n        name: file.name,\n        image: file.preview,\n        style: img,\n        type: file.type,\n        texture: createTexture(file.preview),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function addPng(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      ...prevState.file,\n      {\n        name: file.name,\n        image: file.preview,\n        style: img,\n        type: file.type,\n        texture: createTexture(file.preview),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function initTiff(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      ...prevState.file,\n      {\n        name: file.name,\n        image: file.preview,\n        style: img,\n        type: file.type,\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  importTiff(file);\n  idx = fileApi.getState().size - 1;\n}\n\nexport function addTiff(file) {\n  fileApi.setState( prevState => ({\n    ...prevState,\n    file: [...prevState.file, {\n      name: file.name,\n      image: file.preview,\n      style: img,\n      type: file.type\n    }],\n    size: prevState.size + 1\n  }))\n  importTiff(file);\n  idx = fileApi.getState().size - 1;\n}\n\nexport function updateTiff(image, rgba) {\n  fileApi.setState( prevState => {\n    const file = prevState.file.map((file, j) => {\n      var newFile = file;\n      newFile.texture = createTextureFromTiff(image.src)\n      newFile.image = image\n      newFile.rgba = rgba\n      return newFile;\n    })\n    return {\n      file\n    }\n  })\n\n}\n\nexport function updateTiffPages(name, pages, image) {\n  fileApi.setState( prevState => {\n    const file = prevState.file.map((file, j) => {\n      if (file.name === name) {\n        var newFile = file;\n        newFile.pages = pages\n        newFile.image = image\n        return newFile;\n      }\n      else {\n        return file\n      }\n    })\n    return {\n      file\n    }\n  })\n\n}\n\nexport function initCsv(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      {\n        name: file.name,\n        type: file.type,\n        json: importCsv(file),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function addCsv(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      ...prevState.file,\n      {\n        name: file.name,\n        type: file.type,\n        json: importCsv(file),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function initJson(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      {\n        name: file.name,\n        type: file.type,\n        json: importJson(file),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function addJson(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      ...prevState.file,\n      {\n        name: file.name,\n        type: file.type,\n        json: importJson(file),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nfunction isAnnotValid(annotation) {\n  return (\n    annotation &&\n    annotation.rect.left > 0 &&\n    annotation.rect.left < 1000 &&\n    annotation.rect.top > 0 &&\n    annotation.rect.top < 1000 &&\n    annotation.rect.width > 0 &&\n    annotation.rect.width < 1000 &&\n    annotation.rect.height > 0 &&\n    annotation.rect.height < 1000 &&\n    annotation.label.length > 0\n  );\n}\n\nfunction addJsonAnnot(annotation) {\n  annotApi.setState(prevState => ({\n    img_name: fileApi.getState().file[idx].name,\n    annotations: prevState.annotations.concat(annotation),\n  }));\n  for (var i = 0; i < annotation.length; i++) {\n    if (isAnnotValid(annotation[i])) {\n      addAnnotation(annotation[i].rect, annotation[i].label);\n    }\n  }\n}\n\nexport function saveJson(result) {\n  fileApi.setState(prevState => {\n    const file = prevState.file.map((f, i) => {\n      if (i === idx) {\n        var newFile = f;\n        f.json = result;\n        return newFile;\n      } else {\n        return f;\n      }\n    });\n    return file;\n  });\n\n  addJsonAnnot(result);\n}\n","import React, { useEffect, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport {\n  initPng,\n  addPng,\n  initTiff,\n  addTiff,\n  initCsv,\n  addCsv,\n  initJson,\n  addJson,\n  isFirstFile,\n  isValidFile,\n} from './fileControl.js';\n\nfunction addFile(file) {\n  if (file.type === 'image/png') {\n    addPng(file);\n  } else if (file.type === 'image/tiff') {\n    addTiff(file);\n  } else if (file.type === 'text/csv') {\n    addCsv(file);\n  } else if (file.type === 'application/json') {\n    addJson(file);\n  }\n}\n\nfunction initFile(file) {\n  if (file.type === 'image/png') {\n    initPng(file);\n  } else if (file.type === 'image/tiff') {\n    initTiff(file);\n  } else if (file.type === 'text/csv') {\n    initCsv(file);\n  } else if (file.type === 'application/json') {\n    initJson(file);\n  }\n}\n\nexport function FileUpload(props) {\n  const [files, setFiles] = useState([]);\n  const { getRootProps, getInputProps } = useDropzone({\n    accept: 'image/png, image/tiff, .csv, .json',\n    onDrop: acceptedFiles => {\n      setFiles(\n        acceptedFiles.map(file =>\n          Object.assign(file, {\n            preview: URL.createObjectURL(file),\n          })\n        )\n      );\n    },\n  });\n\n  const update = files.map(file => {\n    if (isValidFile(file.name)) {\n      if (isFirstFile()) {\n        initFile(file);\n      } else {\n        addFile(file);\n      }\n    }\n    return null;\n  });\n\n  useEffect(\n    () => () => {\n      // Make sure to revoke the data uris to avoid memory leaks\n      files.forEach(file => URL.revokeObjectURL(file.preview));\n    },\n    [files]\n  );\n\n  return (\n    <section className=\"container\">\n      <div {...getRootProps({ className: 'dropzone' })}>\n        <input {...getInputProps()} />\n        <p> {props.name} </p>\n        {update}\n      </div>\n    </section>\n  );\n}\n","import { annotApi } from './annotationStore.js';\n\nexport function exportJson() {\n  const element = document.createElement('a');\n\n  const file = new Blob([JSON.stringify(annotApi.getState())], {\n    type: 'text/plain',\n  });\n  element.href = URL.createObjectURL(file);\n  element.download = 'annotations.txt';\n  document.body.appendChild(element); // Required for this to work in FireFox\n  element.click();\n}\n","import React from 'react';\n\nimport { buttonGroup } from '../style.js';\nimport {\n  UncontrolledButtonDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  ButtonGroup,\n  Button,\n} from 'reactstrap';\n\nimport { FileUpload } from '../../fileuploader/index.js';\nimport { exportJson } from '../../annotator/exporter.js';\n\nimport {\n  modes,\n  setMode,\n} from '../../fabric/fabricControl.js'\nimport {\n  undo,\n  redo,\n} from '../../annotator/editControl.js'\n\nclass Menus extends React.Component {\n  render() {\n    return (\n      <ButtonGroup\n        size={buttonGroup.size}\n        vertical={buttonGroup.vertical}\n        style={buttonGroup}\n      >\n        <UncontrolledButtonDropdown>\n          <DropdownToggle caret color=\"primary\">\n            File\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem>\n              <Button\n                outline\n                color=\"primary\"\n                className=\"export-btn\"\n                onClick={exportJson}\n              >\n                {' '}\n                Export Annotations{' '}\n              </Button>\n            </DropdownItem>\n          </DropdownMenu>\n        </UncontrolledButtonDropdown>\n\n        <UncontrolledButtonDropdown>\n          <DropdownToggle caret color=\"primary\">\n            Draw\n          </DropdownToggle>\n          <DropdownMenu>\n            <Button\n              outline\n              color=\"primary\"\n              className=\"draw-rectangle-btn\"\n              onClick={(e) => setMode(modes.RECT)}\n            >\n              Rectangle\n            </Button>\n            <Button\n              outline\n              color=\"primary\"\n              className=\"draw-rectangle-btn\"\n              onClick={(e) => setMode(modes.FREE)}\n            >\n              Freehand\n            </Button>\n          </DropdownMenu>\n        </UncontrolledButtonDropdown>\n\n        <UncontrolledButtonDropdown>\n          <DropdownToggle caret color=\"primary\">\n            Edit\n          </DropdownToggle>\n          <DropdownMenu>\n            <Button\n              outline\n              color=\"primary\"\n              className=\"draw-rectangle-btn\"\n              onClick={(e) => undo()}\n            >\n              Undo\n            </Button>\n            <Button\n              outline\n              color=\"primary\"\n              className=\"draw-rectangle-btn\"\n              onClick={(e) => redo()}\n            >\n              Redo\n            </Button>\n          </DropdownMenu>\n        </UncontrolledButtonDropdown>\n\n        <Button outline color=\"primary\" className=\"import-btn\">\n          {' '}\n          <FileUpload name=\"Import File\" />{' '}\n        </Button>\n      </ButtonGroup>\n    );\n  }\n}\n\nexport default Menus;\n","import React from 'react';\nimport { fileApi } from '../fileuploader/fileStore.js';\nimport { annotApi } from '../annotator/annotStore.js'\n\nclass Annotator extends React.Component {\n  file_size = 0;\n  annotations = {};\n\n  render() {\n    fileApi.subscribe(state => {\n      if (this.file_size !== state.size) {\n        this.file_size = state.size;\n\n        console.log('fileApi - files: ', state.file);\n      }\n    });\n    annotApi.subscribe(state => {\n      if (this.annotations !== state.annotations) {\n        this.annotations = state.annotations;\n\n        console.log('annotApi - annotations: ', state.annotations);\n      }\n    });\n    return <div id=\"annotator-div\"></div>;\n  }\n}\n\nexport default Annotator;\n","import { uApi } from '../utils/index.js';\nimport { createTexture, createTextureFromTiff } from './ImageStore.js';\n\nfunction isValidChannel(channel) {\n  return (\n    uApi.getState() &&\n    uApi.getState().channels.length > 0 &&\n    channel >= 1 &&\n    uApi.getState().channels[channel - 1] &&\n    uApi.getState().channels[channel - 1].uniforms.contrast &&\n    uApi.getState().channels[channel - 1].uniforms.brightness\n  );\n}\n\nfunction updateUniformBrightness(value, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.uniforms.brightness.value = value;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nfunction updateUniformContrast(value, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.uniforms.contrast.value = value;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nfunction updateUniformWhitepoint(value, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.uniforms.whitepoint.value = value;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nfunction updateUniformBlackpoint(value, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.uniforms.blackpoint.value = value;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nexport function updateImage(file, channel) {\n  let name = file.name;\n  let blob = file.image;\n  let texture = file.texture;\n\n  if (texture === '') {\n    if (file.type === 'image/tiff') {\n      texture = createTextureFromTiff(blob);\n    } else {\n      texture = createTexture(blob);\n    }\n  }\n  const prevStateCh = uApi.getState().channels[channel - 1];\n\n  if (\n    prevStateCh.name !== name ||\n    prevStateCh.imagepath !== blob ||\n    prevStateCh.uniforms.image.value !== texture\n  ) {\n    updateUniformImage(texture, name, blob, channel);\n  }\n}\n\nexport function updateUniformImage(texture, name, imagepath, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n\n        newChannel.name = name;\n        newChannel.imagepath = imagepath;\n        newChannel.uniforms.image.value = texture;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nexport function updateBrightness(value, channel) {\n  if (isValidChannel(channel)) {\n    if (\n      value !== uApi.getState().channels[channel - 1].uniforms.brightness.value\n    ) {\n      updateUniformBrightness(value, channel);\n    }\n    return true;\n  } else {\n    console.log(\n      'CanvasControl::UpdateBrighness() - null state',\n      uApi.getState(),\n      ' channel: ',\n      channel,\n      ' value: ',\n      value\n    );\n  }\n  return false;\n}\n\nexport function updateContrast(value, channel) {\n  if (isValidChannel(channel)) {\n    if (\n      value !== uApi.getState().channels[channel - 1].uniforms.contrast.value\n    ) {\n      updateUniformContrast(value, channel);\n    }\n    return true;\n  } else {\n    console.log(\n      'CanvasControl::updateContrast() - null state',\n      uApi.getState(),\n      ' channel: ',\n      channel,\n      ' value: ',\n      value\n    );\n  }\n  return false;\n}\n\nexport function updateWhitepoint(value, channel) {\n  if (isValidChannel(channel)) {\n    if (\n      value !== uApi.getState().channels[channel - 1].uniforms.whitepoint.value\n    ) {\n      updateUniformWhitepoint(value, channel);\n    }\n    return true;\n  } else {\n    console.log(\n      'CanvasControl::updateWhitepoint() - null state',\n      uApi.getState(),\n      ' channel: ',\n      channel,\n      ' value: ',\n      value\n    );\n  }\n  return false;\n}\n\nexport function updateBlackpoint(value, channel) {\n  if (isValidChannel(channel)) {\n    if (\n      value !== uApi.getState().channels[channel - 1].uniforms.blackpoint.value\n    ) {\n      updateUniformBlackpoint(value, channel);\n    }\n    return true;\n  } else {\n    console.log(\n      'CanvasControl::updateBlackpoint() - null state',\n      uApi.getState(),\n      ' channel: ',\n      channel,\n      ' value: ',\n      value\n    );\n  }\n  return false;\n}\n","import React from 'react';\nimport { fApi, uApi } from '../utils/index.js';\nimport { updateImage } from './CanvasControl.js';\nimport { canvasApi } from './canvasStore.js';\n\nclass ImageCanvas extends React.Component {\n  updateForFile(state) {\n    if (state) {\n      updateImage(state.file[state.selected], this.props.channel);\n    }\n    this.forceUpdate();\n  }\n  updateForControls(state) {\n    this.forceUpdate();\n  }\n\n  render() {\n    fApi.subscribe(state => {\n      this.updateForFile(state);\n    });\n    uApi.subscribe(state => {\n      this.updateForControls(state);\n    });\n\n    return canvasApi.getState().canvas[this.props.channel - 1];\n  }\n}\n\nexport default ImageCanvas;\n","import React from 'react';\n\nimport { card, cardBody, canvasThumbnail } from '../style.js';\nimport { Button, UncontrolledCollapse, Card, CardBody } from 'reactstrap';\n\nimport ImageCanvas from '../../imagecanvas/ImageCanvas.js';\nimport Slider from './slider.js';\nimport {\n  updateBrightness,\n  updateContrast,\n  updateWhitepoint,\n  updateBlackpoint,\n} from '../../imagecanvas/CanvasControl.js';\nimport {\n  updateChannelSel,\n  updateLastSel,\n  settingsApi,\n} from '../../mainSettings.js';\n\nclass Channel extends React.Component {\n  updateSelection = () => {\n    updateChannelSel(this.props.ch);\n    updateLastSel(this.props.ch);\n    this.forceUpdate();\n  };\n\n  sliderValueBr(value) {\n    updateBrightness(value, this.props.ch);\n  }\n\n  sliderValueCt(value) {\n    updateContrast(value, this.props.ch);\n  }\n\n  sliderValueWp(value) {\n    updateWhitepoint(value, this.props.ch);\n  }\n\n  sliderValueBp(value) {\n    updateBlackpoint(value, this.props.ch);\n  }\n\n  resetBrightness() {\n    updateBrightness('0.0', this.props.ch);\n  }\n\n  resetContrast() {\n    updateContrast('0.0', this.props.ch);\n  }\n\n  resetWhitepoint() {\n    updateWhitepoint('255.0', this.props.ch);\n  }\n\n  resetBlackpoint() {\n    updateBlackpoint('0.0', this.props.ch);\n  }\n\n  render() {\n    var sliderValueBr = this.sliderValueBr;\n    var sliderValueCt = this.sliderValueCt;\n    var sliderValueWp = this.sliderValueWp;\n    var sliderValueBp = this.sliderValueBp;\n    var alt = 'Ch' + this.props.ch + ' Histogram';\n    var canvas = (\n      <ImageCanvas\n        className=\"annot-view\"\n        alt={alt}\n        height=\"100px\"\n        channel={this.props.ch}\n      />\n    );\n    var sel = settingsApi.getState().channels[this.props.ch - 1].selected;\n\n    console.log('Channel ' + this.props.ch + ' : ' + sel);\n    return (\n      <div>\n        <Button\n          className=\"channelBtn\"\n          outline\n          color=\"primary\"\n          id=\"channel-btn\"\n          onClick={() => {\n            this.updateSelection();\n          }}\n          active={sel}\n        >\n          Channel {`${this.props.ch}`}\n        </Button>\n        <Button\n          className=\"viewBtn\"\n          outline\n          color=\"secondary\"\n          id={`view${this.props.ch}`}\n        >\n          View\n        </Button>\n        <UncontrolledCollapse toggler={`#view${this.props.ch}`}>\n          <Card style={card}>\n            <CardBody style={cardBody}>\n              <div style={canvasThumbnail}>{canvas}</div>\n              \"Insert Look up table here\"\n              <br></br>\n              <br></br>\n              <div className=\"brightness-slider-container\">\n                <Slider\n                  label=\"Brightness\"\n                  width=\"40%\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\"0.1\"\n                  initial=\"0\"\n                  multiplier=\"100\"\n                  raw=\"0\"\n                  sliderValue={sliderValueBr.bind(this)}\n                />\n                <button\n                  id=\"resetBrBtn\"\n                  onClick={() => {\n                    this.resetBrightness();\n                  }}\n                >\n                  Reset Brightness\n                </button>\n              </div>\n              <div className=\"contrast-slider-container\">\n                <Slider\n                  label=\"Contrast\"\n                  width=\"40%\"\n                  min=\"0\"\n                  max=\"10\"\n                  step=\"1\"\n                  initial=\"0\"\n                  multiplier=\"10\"\n                  raw=\"0\"\n                  sliderValue={sliderValueCt.bind(this)}\n                />\n                <button\n                  id=\"resetCtBtn\"\n                  onClick={() => {\n                    this.resetContrast();\n                  }}\n                >\n                  Reset Contrast\n                </button>\n              </div>\n              <div className=\"whitepoint-slider-container\">\n                <Slider\n                  label=\"Whitepoint\"\n                  width=\"40%\"\n                  min=\"0\"\n                  max=\"255\"\n                  step=\"1\"\n                  initial=\"255\"\n                  multiplier=\"1\"\n                  raw=\"1\"\n                  sliderValue={sliderValueWp.bind(this)}\n                />\n                <button\n                  id=\"resetWpBtn\"\n                  onClick={() => {\n                    this.resetWhitepoint();\n                  }}\n                >\n                  Reset Whitepoint\n                </button>\n              </div>\n              <div className=\"blackpoint-slider-container\">\n                <Slider\n                  label=\"Blackpoint\"\n                  width=\"40%\"\n                  min=\"0\"\n                  max=\"255\"\n                  step=\"1\"\n                  initial=\"0\"\n                  multiplier=\"1\"\n                  raw=\"1\"\n                  sliderValue={sliderValueBp.bind(this)}\n                />\n                <button\n                  id=\"resetBpBtn\"\n                  onClick={() => {\n                    this.resetBlackpoint();\n                  }}\n                >\n                  Reset Blackpoint\n                </button>\n              </div>\n            </CardBody>\n          </Card>\n        </UncontrolledCollapse>\n      </div>\n    );\n  }\n}\n\nexport default Channel;\n","import React from 'react';\n\nimport { cardStyle, card } from '../style.js';\nimport { Card, CardTitle, CardBody } from 'reactstrap';\n\nimport Channel from './channel.js';\n\nclass ChannelViewer extends React.Component {\n  render() {\n    return (\n      <div className=\"annotations-channel\" style={cardStyle}>\n        <Card style={card}>\n          <CardBody>\n            <CardTitle> Channel Selection </CardTitle>\n            <Channel ch=\"1\" />\n            <Channel ch=\"2\" />\n            <Channel ch=\"3\" />\n          </CardBody>\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default ChannelViewer;\n","import React from 'react';\nimport { mainStyle, rowStyle, container } from './style.js';\nimport MainViewer from './components/mainViewer.js';\nimport AxesViewer from './components/axesViewer.js';\nimport AnnotatorViewer from './components/annotatorViewer.js';\nimport Thumbnails from './components/thumbnails.js';\nimport Menus from './components/menus.js';\nimport Annotator from './../annotator/index.js';\nimport ChannelViewer from './components/channelViewer.js';\n\nimport { Container, Row, Col } from 'reactstrap';\n\nclass UI extends React.Component {\n  render() {\n    return (\n      <div className=\"main\" style={mainStyle}>\n        <Menus />\n        <br></br>\n        <br></br>\n        <br></br>\n\n        <Container style={container}>\n          <Row style={rowStyle}>\n            <Col xs=\"2\">\n              <AxesViewer />\n            </Col>\n\n            <Col xs=\"8\">\n              <MainViewer />\n            </Col>\n\n            <Col xs=\"2\">\n              <AnnotatorViewer />\n              <ChannelViewer />\n              <Thumbnails />\n            </Col>\n          </Row>\n        </Container>\n        <Annotator />\n      </div>\n    );\n  }\n}\n\nexport default UI;\n","import './styles.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport UI from './ui';\n\nfunction Application() {\n  return (\n    <>\n      <UI />\n    </>\n  );\n}\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<Application />, rootElement);\n","module.exports = \"data:image/jpeg;base64,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\""],"sourceRoot":""}