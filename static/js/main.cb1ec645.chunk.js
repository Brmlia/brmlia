(this.webpackJsonpbrmlia=this.webpackJsonpbrmlia||[]).push([[0],{136:function(e,t,n){e.exports=n(334)},138:function(e,t,n){},146:function(e,t){},147:function(e,t){},148:function(e,t){},334:function(e,t,n){"use strict";n.r(t);n(137),n(138);var a=n(0),i=n.n(a),r=n(34),s=n.n(r),l=n(5),c=n(9),o=n(10),u=n(11),h={height:"100%",width:"100%",position:"relative"},f={flex:1,position:"relative"},p={width:"100%",flex:.1,justifyContent:"space-between",padding:0,position:"relative"},d={fluid:!0,maxWidth:"100%"},v=n(336),m=n(337),g=n(338),b=n(20),y=n(23),x=n(2),j=n(7),w=n(17),O={channels:[{selected:!1},{selected:!1},{selected:!1}],lastSelected:1,dev:0},k=Object(w.a)((function(e){return Object(x.a)({},O)})),S=Object(j.a)(k,2),E=(S[0],S[1]);var C={file:[],size:0,selected:0,total:0},I={file:[{name:"brom.jpeg",style:{display:"block",width:"auto",height:"100%"},type:"image/png"}],size:1,selected:0,total:0},z=Object(w.a)((function(e){return Object(x.a)({},E.getState().dev?I:C)})),A=Object(j.a)(z,2),M=(A[0],A[1]),D={annotations:[]},R={redoAnnotations:[]},L={undoAnnotations:[]},V=Object(w.a)((function(e){return Object(x.a)({},D)})),F=Object(j.a)(V,2),U=(F[0],F[1]),N=Object(w.a)((function(e){return Object(x.a)({},R)})),T=Object(j.a)(N,2),_=(T[0],T[1]),B=Object(w.a)((function(e){return Object(x.a)({},L)})),W=Object(j.a)(B,2),P=(W[0],W[1]),G=n(16);function X(e,t,n,a,i){return{id:i,group:e,label:t,class:n||"class1",rect:{top:a.top,left:a.left,width:a.width,height:a.height,scaleX:e.scaleX,scaleY:e.scaleY}}}function Y(e){return{id:e}}function q(e){Pe.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{annotations:[].concat(Object(G.a)(t.annotations),[e])})}))}function Z(e){H(e)}function H(e){Ge.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{undoAnnotations:[].concat(Object(G.a)(t.undoAnnotations),[e])})}))}function J(e){Pe.setState((function(t){return t.annotations.splice(e,1)}))}function K(e){Ge.setState((function(t){return t.undoAnnotations.splice(e,1)}))}function Q(){return Pe.getState().annotations.length-1}function $(){return Ge.getState().undoAnnotations[Ge.getState().undoAnnotations.length-1]}function ee(){return Ge.getState().undoAnnotations.length-1}function te(e){for(var t=Pe.getState().annotations,n=0;n<t.length;n++){t[n];if(e===t[n].group){H(t[n]);var a={width:e.width,height:e.height,top:e.top,left:e.left};q(X(e,e._objects[1].text,e._objects[2].text,a,t[n].id)),J(n)}}}var ne={classes:[{name:"Annotation Class 1",enabled:!1}],lastSel:"class1"};function ae(e){se.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{classes:[].concat(Object(G.a)(t.classes),[{name:e||"class1",enabled:!1}])})}))}var ie=Object(w.a)((function(e){return Object(x.a)({},ne)})),re=Object(j.a)(ie,2),se=(re[0],re[1]);function le(e){se.setState((function(t){return{classes:t.classes.map((function(t,n){if(t.name===e){var a=t;return a.enabled=!0,a}return t}))}}))}function ce(e){var t=se.getState().classes;if(t&&0!==t.filter((function(t){return t.name===e})).length)return!0;return!1}var oe={menu:{displayon:!1,coords:{x:0,y:0},items:[{label:"Edit Annotation",callback:function(){at(!1),rt(1)}},{label:"Edit Class",callback:function(){at(!1),rt(2)}},{label:"Delete",callback:function(){at(!1),rt(3)}}],objects:[],select:0,canvas:null}},ue=Object(w.a)((function(e){return Object(x.a)({},oe)})),he=Object(j.a)(ue,2),fe=(he[0],he[1]);function pe(e){fe.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{menu:Object(x.a)(Object(x.a)({},t.menu),{},{displayon:e})})}))}var de=["rgb(200, 140, 140, 0.85)","rgb(140, 200, 140, 0.85)","rgb(140, 140, 200, 0.85)","rgb(100, 100, 100, 0.85)","rgb(255, 255, 255, .01)","rgb(240, 240, 240, 1)"];function ve(e,t){window.canvas=e,e.isMouseDown=!1,e.isDrawingMode=!0,e.freeDrawingBrush.color=de[0],e.freeDrawingBrush.width=10}function me(e,t,n,a){if(!(t.top<=0||t.left<=0||t.width<=0||t.height<=0)){var i=new y.fabric.Rect({left:parseInt(t.left),top:parseInt(t.top),width:parseInt(t.width),height:parseInt(t.height),fill:de[4],stroke:de[0],strokeLineJoin:"round",strokeWidth:2,objectCaching:!1}),r=y.fabric.util.object.clone(i);r.set({left:i.left-1,top:i.top-1,width:i.width+(2*i.strokeWidth-1),height:i.height+(2*i.strokeWidth-1),stroke:de[5],strokeWidth:1});var s=new y.fabric.Group([r]);s.on("moving",(function(t){!function(e,t){var n=e.target,a=n._objects[3];n.left<0?(n.set("left",a.strokeWidth/2),n.setCoords()):n.left+n.width>t.width&&(n.set("left",t.width-n.width-a.strokeWidth/2),n.setCoords());n.top<0?(n.set("top",a.strokeWidth/2),n.setCoords()):n.top+n.height>t.height&&(n.set("top",t.height-n.height-a.strokeWidth/2),n.setCoords())}(t,e)}));var l=new y.fabric.IText(n,{fontSize:14,originX:"left",originY:"top",fontFamily:"Arial",fontWeight:"bold",fill:"white",textBackgroundColor:de[0],top:s.top+i.strokeWidth,left:s.left+i.strokeWidth}),c=new y.fabric.IText(a||"class1",{fontSize:16,originX:"left",originY:"bottom",fontFamily:"Arial",fontWeight:"bold",fill:"white",textBackgroundColor:de[0],top:s.top+s.height-r.strokeWidth,left:s.left+i.strokeWidth});return e&&(i.perPixelTargetFind=!0,e.add(s),e.setActiveObject(s),s.addWithUpdate(l),s.addWithUpdate(c),s.addWithUpdate(i)),s}}function ge(e){var t=st(),n=e._objects;if(n.length>=2){e._restoreObjectsState(),t.remove(e);for(var a=0;a<n.length;a++)t.add(n[a]),t.item(t.size()-1).hasControls=!0;t.renderAll()}}function be(e){if(e&&4===e._objects.length){var t=e._objects,n=t[0],a=t[1],i=t[2],r=t[3],s=new y.fabric.Group([n,a,i,r]),l=st();return l&&(l.add(s),l.remove(n),l.remove(a),l.remove(i),l.remove(r),l.setActiveObject(s)),s}}function ye(e,t){for(var n=st(),a=n.getObjects(),i=0;i<a.length;i++){var r=a[i];if(r)if(r._objects){var s=r._objects[2],l=r._objects[1];s&&s.text&&s.text===e&&(t?xe(r,l.text):(je(r),n.discardActiveObject()))}}n.renderAll()}function xe(e,t){ge(e);for(var n=e._objects,a=0;a<n.length;a++){we(n[a],!0)}!function(e,t){for(var n=U.getState().annotations,a=0;a<n.length;a++)n[a].label===t&&(n[a].group=e)}(be(e),t)}function je(e){ge(e);for(var t=e._objects,n=0;n<t.length;n++){we(t[n],!1)}be(e)}function we(e,t){e.visible=t,e.dirty=!0,st().renderAll()}function Oe(e,t){var n=st();e.group.set({top:t.rect.top,left:t.rect.left,width:t.rect.width,height:t.rect.height,scaleX:t.rect.scaleX,scaleY:t.rect.scaleY}),e.group.setCoords(),n.requestRenderAll(),n.setActiveObject(e.group)}function ke(e){var t=st();t.remove(e.group),t.requestRenderAll()}var Se=me,Ee=ve,Ce=function(){return fe.getState().menu.displayon},Ie=pe,ze=function(e,t){fe.setState((function(n){return Object(x.a)(Object(x.a)({},n),{},{menu:Object(x.a)(Object(x.a)({},n.menu),{},{coords:{x:e,y:t}})})}))},Ae=function(e){fe.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{menu:Object(x.a)(Object(x.a)({},t.menu),{},{objects:e})})}))},Me=q,De=Q,Re=function(){return se.getState().lastSel},Le={RECT:"rectangle",FREE:"free draw",SELECT:"select",NONE:"none"},Ve={layers:[],mouse:{x:0,y:0,down:!1},origin:{x:0,y:0},drawMode:Le.RECT,nextId:1,canvas:null},Fe=Object(w.a)((function(e){return Object(x.a)({},Ve)})),Ue=Object(j.a)(Fe,2),Ne=(Ue[0],Ue[1]);function Te(e){Ne.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{drawMode:e})})),Ne.getState().canvas.isDrawingMode=e===Le.FREE}function _e(e,t){Be(e,t);var n=Ne.getState();if(n.origin.x&&n.origin.y&&e&&t){var a=n.mouse.x-n.origin.x,i=n.mouse.y-n.origin.y;if(Math.abs(a)>=10){var r={width:a>=0?a:-a,height:i>=0?i:-i,top:i>=0?n.origin.y:n.mouse.y,left:a>=0?n.origin.x:n.mouse.x},s="label"+(De()+1),l=Re()||"class1",c=Se(Ne.getState().canvas,r,s,l),o=Ne.getState().nextId;Z(Y(o)),Me(X(c,s,l,r,o)),Ne.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{nextId:o+1})}))}_.setState({redoAnnotations:[]}),Ae(Ne.getState().canvas.getActiveObjects()[0])}}function Be(e,t){var n=Ne.getState().canvas._offset.left,a=Ne.getState().canvas._offset.left+Ne.getState().canvas.width,i=Ne.getState().canvas._offset.top,r=Ne.getState().canvas._offset.top+Ne.getState().canvas.height,s=e<n?n:e>a?a:e-n,l=t<i?i:t>r?r:t-i;Ne.setState((function(e){return{mouse:{x:s,y:l}}}))}var We=M,Pe=U,Ge=P,Xe=_,Ye=q,qe=function(e){for(var t=0;t<e.length;t++)(n=e[t])&&n.rect.left>0&&n.rect.left<1e3&&n.rect.top>0&&n.rect.top<1e3&&n.rect.width>0&&n.rect.width<1e3&&n.rect.height>0&&n.rect.height<1e3&&n.label.length>0&&function(){var n=ot(st(),e[t].rect,e[t].label,e[t].class),a=dt.getState().nextId;Z(Y(a)),q(X(n,e[t].label,e[t].class,e[t].rect,a)),dt.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{nextId:a+1})}))}();var n;console.log(Pe.getState().annotations)},Ze=function(e){!function(e){Xe.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{redoAnnotations:[].concat(Object(G.a)(t.redoAnnotations),[e])})}))}(Pe.getState().annotations[e]),J(e);var t=$();K(ee()),q(t)},He=$,Je=function(e,t){Pe.setState((function(n){return{annotations:n.annotations.map((function(n,a){if(n.label===e){var i=n;return i.label=t,i}return n}))}}))},Ke=function(e,t){Pe.setState((function(n){return{annotations:n.annotations.map((function(n,a){if(n.class===e){var i=n;return i.class=t,i}return n}))}}))},Qe=function(){for(var e=[],t=Pe.getState().annotations,n=0;n<t.length;n++)e.push(t[n].class);return e},$e=function(e){for(var t=Xe.getState().redoAnnotations[e],n=Pe.getState().annotations,a=0;a<n.length;a++)n[a].id===t.id&&(H(n[a]),J(a));q(t),function(e){Xe.setState((function(t){return t.redoAnnotations.splice(e,1)}))}(e)},et=function(e){for(var t=Pe.getState().annotations,n=0;n<t.length;n++)if(t[n].label===e)return t[n]},tt=function(){return fe.getState().menu.items},nt=fe,at=pe,it=function(){return fe.getState().menu.objects},rt=function(e){fe.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{menu:Object(x.a)(Object(x.a)({},t.menu),{},{select:e})})}))},st=function(){return fe.getState().canvas},lt=function(e,t){var n="";if(e&&t&&(ge(e),e)){var a=e._objects;if(a&&a.length>0)for(var i=0;a.length;i++){if(!a[i])return;if(1===i&&a[i].text)return n=a[i].text,a[i].text=t,Je(n,t),st().renderAll(),void be(e)}}},ct=function(e,t){var n="";if(e&&t&&(ge(e),e)){var a=e._objects;if(a&&a.length>0)for(var i=0;a.length;i++){if(!a[i])return;if(2===i&&a[i].text)return n=a[i].text,a[i].text=t,Ke(n,t),st().renderAll(),void be(e)}}},ot=me,ut=function(e){for(var t=U.getState().annotations,n=P.getState().undoAnnotations,a=null,i=null,r=0;r<t.length;r++)t[r].id===e.id&&(ke(t[r]),a=r);for(var s=0;s<t.length;s++)n[s].id===e.id&&(i=s);return H(t[a]),Ye(n[i]),J(a),K(i),null},ht=function(e){var t=it();t&&t._objects.length>0&&(lt(t,e),rt(0))},ft=function(e){var t=it();t&&t._objects.length>0&&(ct(t,e),rt(0))},pt=function(e){var t=it();if(t&&t._objects.length>0){var n=t._objects[1].text,a=et(n);a&&ut({id:a.id}),rt(0)}},dt=Ne;var vt=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(b.a)(a)),a.changeLabel=a.changeLabel.bind(Object(b.a)(a)),a.changeClassLabel=a.changeClassLabel.bind(Object(b.a)(a)),a.state={text:{style:{position:"absolute",top:"0px",left:"0px"}},label:{text:"",style:{position:"absolute",top:"0px",left:"0px"}},button:{style:{position:"absolute",top:"0px",left:"0px"}}},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.style.top.match(/\d+/g))-40+"px",t=parseInt(this.props.style.left.match(/\d+/g))+105+"px";this.setState({text:{style:{position:this.props.style.position,top:this.props.style.top,left:this.props.style.left,width:"100px"}},label:{style:{position:this.props.style.position,top:e,left:this.props.style.left,width:"100px"},text:""},button:{style:{position:this.props.style.position,top:this.props.style.top,left:t}}})}},{key:"handleChange",value:function(e){if(e&&e.target&&e.target.value){var t=e.target.value;this.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{label:Object(x.a)(Object(x.a)({},e.label),{},{text:t})})}))}}},{key:"changeLabel",value:function(e){ht(this.state.label.text)}},{key:"changeClassLabel",value:function(e){ft(this.state.label.text)}},{key:"deleteAnnot",value:function(e){pt(this.state.label.text)}},{key:"display",value:function(){return 1===this.props.select?i.a.createElement("div",null,i.a.createElement("div",{style:this.state.label.style}," ",i.a.createElement("p",null," Label: ")," "),i.a.createElement("input",{type:"text",value:this.state.label.text,style:this.state.text.style,onChange:this.handleChange}),i.a.createElement("button",{style:this.state.button.style,onClick:this.changeLabel}," ","Change Label"," ")):2===this.props.select?i.a.createElement("div",null,i.a.createElement("div",{style:this.state.label.style}," ",i.a.createElement("p",null," Class Name: ")," "),i.a.createElement("input",{type:"text",value:this.state.label.text,style:this.state.text.style,onChange:this.handleChange}),i.a.createElement("button",{style:this.state.button.style,onClick:this.changeClassLabel}," ","Change Class Name"," ")):void(3===this.props.select&&this.deleteAnnot())}},{key:"render",value:function(){return i.a.createElement("div",null,this.display())}}]),n}(i.a.Component),mt=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).contextRef=i.a.createRef(),a.returnMenu=a.returnMenu.bind(Object(b.a)(a)),a.state={items:[],coords:{x:0,y:0},style:{position:"absolute",top:"0px",left:"0px"},on:!1,select:0},a}return Object(c.a)(n,[{key:"updateCoords",value:function(e,t){this.state.coords.x!==e&&this.state.coords.y!==t&&this.setState((function(n){return Object(x.a)(Object(x.a)({},n),{},{coords:{x:e,y:t},style:Object(x.a)(Object(x.a)({},n.style),{},{top:"".concat(t,"px"),left:"".concat(e+5,"px")})})}))}},{key:"updateItems",value:function(e){this.state.items!==e&&this.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{items:e})}))}},{key:"updateDisplay",value:function(e){this.state.on!==e&&this.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{on:e})}))}},{key:"updateSelect",value:function(e){this.state.select!==e&&this.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{select:e})}))}},{key:"returnMenu",value:function(){var e=this;return nt.subscribe((function(t){e.updateItems(t.menu.items),e.updateCoords(t.menu.coords.x,t.menu.coords.y),e.updateDisplay(t.menu.displayon),e.updateSelect(t.menu.select)})),this.state.on?i.a.createElement("div",{className:"custom-context",id:"customcontext",style:this.state.style,ref:this.contextRef},tt().map((function(e,t,n){if(n.length>0){var a=e.label+"-button-wrapper";return i.a.createElement("div",{key:a},i.a.createElement("button",{onClick:e.callback}," ",e.label," "))}return null}))):1===this.state.select||2===this.state.select||3===this.state.select?i.a.createElement(vt,{style:this.state.style,select:this.state.select}):null}},{key:"render",value:function(){return i.a.createElement("div",{id:"cmenu"},this.returnMenu())}}]),n}(i.a.Component),gt=n(15),bt=function(e){return(new gt.TextureLoader).load(e)},yt={channels:[{uniforms:{brightness:{value:"0.0"},contrast:{value:"0.0"},whitepoint:{value:"255.0"},blackpoint:{value:"0.0"},opacity:{value:"0.0"},color:{value:""},image:{value:""}},texture:null,name:"",type:""},{uniforms:{brightness:{value:"0.0"},contrast:{value:"0.0"},whitepoint:{value:"235.0"},blackpoint:{value:"16.0"},opacity:{value:"0.0"},color:{value:""},image:{value:""}},texture:null,name:"",type:""},{uniforms:{brightness:{value:"0.0"},contrast:{value:"0.0"},whitepoint:{value:"235.0"},blackpoint:{value:"16.0"},opacity:{value:"0.0"},color:{value:""},image:{value:""}},texture:null,name:"",type:""},{uniforms:{brightness:{value:"0.0"},contrast:{value:"0.0"},whitepoint:{value:"235.0"},blackpoint:{value:"16.0"},opacity:{value:"0.0"},color:{value:""},image:{value:""}},texture:null,name:"",type:""}]},xt=Object(w.a)((function(e){return Object(x.a)(Object(x.a)({},yt),{},{update:function(t,n,a,i,r,s,l){return e((function(e){return Object(x.a)(Object(x.a)({},e),{},{uniforms:Object(x.a)(Object(x.a)({},e.uniforms),{},{brightness:Object(x.a)(Object(x.a)({},e.uniforms.brightness),{},{value:t}),contrast:Object(x.a)(Object(x.a)({},e.uniforms.contrast),{},{value:n}),whitepoint:Object(x.a)(Object(x.a)({},e.uniforms.whitepoint),{},{value:a}),blackpoint:Object(x.a)(Object(x.a)({},e.uniforms.blackpoint),{},{value:i}),opacity:Object(x.a)(Object(x.a)({},e.uniforms.opacity),{},{value:r}),color:Object(x.a)(Object(x.a)({},e.uniforms.color),{},{value:s}),image:Object(x.a)({},e.uniforms.image)}),texture:l,brightness:t})}))}})})),jt=Object(j.a)(xt,2),wt=(jt[0],jt[1]),Ot=M,kt=wt,St={volumes:[null,null,null,null,null,null,null,null],sliceIndices:[0,0,0,0,0,0,0],lengths:[0,0,0,0,0,0,0],type:1},Et=Object(w.a)((function(e){return Object(x.a)({},St)})),Ct=Object(j.a)(Et,2),It=(Ct[0],Ct[1]);function zt(e){return console.debug("getVolume - index: %d, all volumes: {",e,It.getState().volumes,"}"),It.getState().volumes[e]}function At(e,t){!function(e,t){It.setState((function(n){return{volumes:n.volumes.map((function(n,a){return a===e?t:n}))}}))}(e,t)}function Mt(e){It.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{type:e})}))}var Dt=n(3),Rt=n.n(Dt),Lt=n(12),Vt=function(){function e(t){Object(l.a)(this,e),this.context=t,this.cache=null}return Object(c.a)(e,[{key:"getImageData",value:function(e,t){return this.cache&&this.cache.width===e&&this.cache.height===t||(this.cache=this.context.createImageData(e,t)),this.cache}}]),e}();function Ft(e){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(Lt.a)(Rt.a.mark((function e(t){var n,a;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open("file-cache").then((function(e){n=e}));case 2:if(!n){e.next=5;break}return e.next=5,n.match(t).then((function(e){console.log("[Cache] response: ",e),a=e}));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nt(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(Lt.a)(Rt.a.mark((function e(t){var n,a;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(t);case 2:if(!(a=e.sent)){e.next=6;break}return e.next=6,a.arrayBuffer().then((function(e){n=e}));case 6:return console.log("[Cache] array buffer: ",n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t,n){var a;return e&&navigator.storage&&navigator.storage.estimate().then((function(e){var t=e.quota,n=e.usage;console.debug("[Cache] storage - total available: %d, used: %d (%d)",t,n,n/t*100)})).catch((function(e){console.error("*** Unable to update quota ***",e)})).then((function(){setTimeout((function(){console.log(".")}),500)})),caches.open("file-cache").then((function(e){if(a=e){var i=new Response(n);console.log("[Cache] cache: ",a,i,n),a.put(t,i).catch((function(e){console.error("*** Cache API: '".concat(e.name,"' ***"),e),alert("Oops: Error writing to Cache API, check console.")}))}})),a}var Bt=function(){function e(t){Object(l.a)(this,e),this.bytes=t.bytes||1,this.size=t.size||{x:256,y:256,z:256},this.canvas_context=t.context,this.cube=this.materialize(),this.cached_imgdata=new Vt(this.canvas_context),this.clean=!0,this.loaded=!1,this.faces={x:["y","z"],y:["x","z"],z:["x","y"]},this.sw=function(){var e=navigator.serviceWorker;return e&&window.addEventListener("load",(function(){e.register("/sw.js").then((function(){return e.ready})).then((function(){console.log("[Cache] Service Worker Ready")})).catch((function(e){console.log("[Cache] Service Worker ERROR",e)}))})),e}()}return Object(c.a)(e,[{key:"faceDimensions",value:function(e){var t=this.faces[e];return[this.size[t[0]],this.size[t[1]]]}},{key:"materialize",value:function(){var e=this.arrayType(),t=this.size;return new e(t.x*t.y*t.z)}},{key:"insertImageData",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(t,n,a,i,r){var s,l,c,o,u,h,f;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this,l=new Uint32Array(t.buffer),c={true:{1:255,2:65535,4:4294967295},false:{1:4278190080,2:4294901760,4:4294967295}}[this.isLittleEndian()][this.bytes],o=0,u=0,h=0|s.size.x,f=r*s.size.x*s.size.y|0,u=n-1;u>=0;u--)for(o=n-1;o>=0;o--)s.cube[a+o+h*(i+u)+f]=l[o+u*n]&c;return s.clean=!1,e.abrupt("return",this);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,a,i,r){return e.apply(this,arguments)}}()},{key:"slice",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(t,n,a){var i,r,s,l,c,o,u,h,f,p,d,v,m,g,b,y,x,j,w,O,k,S,E,C,I,z,A,M,D=arguments;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(D.length>3&&void 0!==D[3])||D[3],r=this,!this.cube){e.next=6;break}s=this.cube,e.next=10;break;case 6:return e.next=8,this.getCube();case 8:l=e.sent,s=new Uint8ClampedArray(l);case 10:if(!(n<0||n>=this.size[t])){e.next=12;break}throw new Error(n+" is out of bounds.");case 12:if(c=r.size.x,o=r.size.y,u=r.size.z,h=c*o,f=this.faces[t],p=this.arrayType(),d=new p(this.size[f[0]]*this.size[f[1]]),v=n*h*this.bytes,m=d.length-1,!a){e.next=32;break}if("z"!==t){e.next=29;break}if(!i){e.next=26;break}return g=s.buffer.slice(v,v+h*this.bytes),e.abrupt("return",new p(g));case 26:for(b=d.length-1,y=h*n,x=0;x<o-1;x++)for(j=c-1;j>=0;--j)d[b]=s[j+c*x+y],--b;case 29:if("x"===t)for(w=0;w<u-1;w++)for(O=o-1;O>=0;--O)d[m]=s[n+c*O+h*w],--m;else if("y"===t)for(k=c*n,S=0;S<u-1;S++)for(E=c-1;E>=0;--E)d[m]=s[E+k+h*S],--m;e.next=35;break;case 32:if("z"!==t){e.next=34;break}return e.abrupt("return",new p(s.buffer,v,h));case 34:if("x"===t)for(C=u-1;C>=0;--C)for(I=o-1;I>=0;--I)d[m]=s[n+c*I+h*C],--m;else if("y"===t)for(z=c*n,A=u-1;A>=0;--A)for(M=c-1;M>=0;--M)d[m]=s[M+z+h*A],--m;case 35:return e.abrupt("return",d);case 36:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"grayImageSlice",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(t,n,a){var i,r,s,l,c,o,u,h,f=arguments;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.length>3&&void 0!==f[3]&&f[3],r=!(f.length>4&&void 0!==f[4])||f[4],e.next=4,this.slice(t,n,a,!1);case 4:return s=e.sent,e.next=7,this.faceDimensions(t);case 7:if(l=e.sent,!r){e.next=14;break}return e.next=11,this.canvas_context.createImageData(l[0],l[1]);case 11:e.t0=e.sent,e.next=17;break;case 14:return e.next=16,this.cached_imgdata.getImageData(l[0],l[1]);case 16:e.t0=e.sent;case 17:if(c=e.t0,o=new Uint32Array(c.data.buffer),u=this.isLittleEndian()?4278190080:255,h=0,i)for(h=s.length-1;h>=0;h--)o[h]=s[h]|s[h]<<8|s[h]<<16|(s[h]&&u);else for(h=s.length-1;h>=0;h--)o[h]=s[h]|s[h]<<8|s[h]<<16|u;return e.abrupt("return",c);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"isLittleEndian",value:function(){var e=new Uint32Array(1),t=new Uint8Array(e.buffer);e[0]=255;var n=255===t[0];return this.isLittleEndian=function(){return n},n}},{key:"getRenderMaskSet",value:function(){return{true:{r:255,g:65280,b:16711680,a:4278190080},false:{r:4278190080,g:16711680,b:65280,a:255}}[this.isLittleEndian()]}},{key:"arrayType",value:function(){var e={1:Uint8ClampedArray,2:Uint16Array,4:Uint32Array}[this.bytes];if(void 0===e)throw new Error(this.bytes+" is not a valid typed array byte count.");return e}},{key:"getImageData",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(){var t;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.faceDimensions("z");case 2:return t=e.sent,e.next=5,this.cached_imgdata.getImageData(t[0],t[1]);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cacheCube",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(){var t;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.cube.buffer?this.cube.buffer:this.cube,e.next=3,_t(this.sw,"samplecube-1.buf",t);case 3:this.cube=null;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCube",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(){var t;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt("samplecube-1.buf").then((function(e){t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Wt=function(){function e(t){Object(l.a)(this,e),console.debug("Volume() - args:",t),this.channel=t.channel}return Object(c.a)(e,[{key:"renderChannelSlice",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(t,n,a,i){var r,s,l,c;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,e.next=3,r.channel.grayImageSlice(n,a,i,!1,!1);case 3:return s=e.sent,e.next=6,new Uint32Array(s.data.buffer);case 6:for(l=e.sent,c=l.length-1;c>=0;c--)l[c]=16776960&l[c]&&l[c];return e.next=10,t.putImageData(s,0,0);case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a,i){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(t,n,a){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadVolume(this.channel,t,n,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"loadVolume",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(t,n,a,i){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.insertImageData(n,a,0,0,i);case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}()},{key:"getImageData",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.channel.getImageData();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Pt=n(35);var Gt=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useMemo)((function(){return jn.getState().channels[e.channel-1].uniforms}),[e]);return Object(Pt.b)((function(t){n.current.uniforms.brightness.value=jn.getState().channels[e.channel-1].uniforms.brightness.value,n.current.uniforms.contrast.value=jn.getState().channels[e.channel-1].uniforms.contrast.value,n.current.uniforms.whitepoint.value=jn.getState().channels[e.channel-1].uniforms.whitepoint.value,n.current.uniforms.blackpoint.value=jn.getState().channels[e.channel-1].uniforms.blackpoint.value,n.current.uniforms.opacity.value=jn.getState().channels[e.channel-1].uniforms.opacity.value,n.current.uniforms.image.value=jn.getState().channels[e.channel-1].uniforms.image.value,n.current.uniforms.color.value=jn.getState().channels[e.channel-1].uniforms.color.value})),i.a.createElement("mesh",{ref:t,scale:[1,1,1]},i.a.createElement("planeBufferGeometry",{attach:"geometry",args:[5,5]}),i.a.createElement("shaderMaterial",{attach:"material",ref:n,fragmentShader:"\n  uniform sampler2D image;\n\n  uniform float brightness;\n  uniform float contrast;\n\n  uniform float blackpoint;\n  uniform float whitepoint;\n  uniform float opacity;\n  uniform vec3 color;\n\n  varying vec2 vUv;\n\n  vec4 setBrightness(in vec4 clr, in float br) {\n    clr.rgb += br;\n    return clr;\n  }\n\n  vec4 setContrast(in vec4 clr, in float ct) {\n    if (ct > 0.0) {\n      clr.rgb = (clr.rgb - 0.5) / (1.0 - ct) + 0.5;\n    } else {\n      clr.rgb = (clr.rgb - 0.5) * (1.0 + ct) + 0.5;\n    }\n    return clr;\n  }\n\n  vec4 setWpBp(in vec4 clr, in float bp, in float wp) {\n    float _blackpoint = bp / 255.0;\n    float _whitepoint = bp == wp ? (255.0 / 0.00025) : (255.0 / (wp - bp));\n    clr.rgb = clr.rgb * _whitepoint - (_whitepoint * _blackpoint);\n    return clr;\n  }\n\n  vec4 setOpacity(in vec3 clr, in float opc) {\n    vec4 _color = vec4(clr, opc);\n    return _color;\n  }\n\n  vec4 sampleColor() {\n    // red with 50% opacity\n    return vec4(1.0, 0.0, 0.0, 0.5);\n  }\n\n  vec4 toGrayscale(in vec4 color)\n  {\n    float average = (color.r + color.g + color.b) / 3.0;\n    return vec4(average, average, average, 1.0);\n  }\n\n  vec4 colorize(in vec4 grayscale, in vec4 color)\n  {\n    return (grayscale * color);\n  }\n\n  vec4 applyColorize(in vec4 color, in vec4 overlay) {\n    vec4 grayscale = toGrayscale(color);\n    vec4 colorizedOutput = colorize(grayscale, overlay);\n    return colorizedOutput;\n  }\n\n  vec4 applyOverlay(in vec4 color, in vec4 overlay) {\n    return (vec4(mix(color.rgb, overlay.rgb, overlay.a), color.a));\n  }\n\n  void main() {\n    vec4 tColor = texture2D(image, vUv);\n    tColor = setBrightness(tColor, brightness);\n    tColor = setContrast(tColor, contrast);\n    tColor = setWpBp(tColor, blackpoint, whitepoint);\n\n    vec4 oColor = setOpacity(color, opacity);\n\n    // tColor = applyColorize(tColor, oColor);\n    tColor = applyOverlay(tColor, oColor);\n    gl_FragColor = tColor;\n  }\n",vertexShader:"\n  varying vec2 vUv;\n\n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }\n",uniforms:r}))},Xt={mesh:[i.a.createElement(Gt,{channel:"1"}),i.a.createElement(Gt,{channel:"2"}),i.a.createElement(Gt,{channel:"3"}),i.a.createElement(Gt,{channel:"4"})]},Yt=Object(w.a)((function(e){return Object(x.a)({},Xt)})),qt=Object(j.a)(Yt,2),Zt=(qt[0],qt[1],{canvas:[i.a.createElement(Pt.a,{className:"image-canvas-1"},Xt.mesh[0]),i.a.createElement(Pt.a,{className:"image-canvas-2"},Xt.mesh[1]),i.a.createElement(Pt.a,{className:"image-canvas-3"},Xt.mesh[2]),i.a.createElement(Pt.a,{className:"main-image-canvas"},Xt.mesh[3])]}),Ht=Object(w.a)((function(e){return Object(x.a)({},Zt)})),Jt=Object(j.a)(Ht,2),Kt=(Jt[0],Jt[1]);function Qt(e){return jn.getState()&&jn.getState().channels.length>0&&e>=1&&jn.getState().channels[e-1]&&jn.getState().channels[e-1].uniforms.contrast&&jn.getState().channels[e-1].uniforms.brightness&&jn.getState().channels[e-1].uniforms.color}function $t(e,t,n){var a=e.name,i=e.image,r=jn.getState().channels[n-1];r.name===a&&r.imagepath===i&&r.uniforms.image.value===t||en(t,a,i,n)}function en(e,t,n,a){jn.setState((function(i){return{channels:i.channels.map((function(i,r){if(r===a-1){var s=i;return s.name=t,s.imagepath=n,s.uniforms.image.value=e,s}return i}))}}))}var tn=n(335),nn={loaded:0},an=Object(w.a)((function(e){return Object(x.a)({},nn)})),rn=Object(j.a)(an,2),sn=(rn[0],rn[1]);function ln(e,t,n,a,i,r,s){return cn.apply(this,arguments)}function cn(){return(cn=Object(Lt.a)(Rt.a.mark((function e(t,n,a,i,r,s,l){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==s){e.next=5;break}return e.next=3,pn(t,n,a,i,r[l]);case 3:e.next=7;break;case 5:return e.next=7,vn(t,n,a,i,r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function on(e,t,n,a,i,r){return un.apply(this,arguments)}function un(){return(un=Object(Lt.a)(Rt.a.mark((function e(t,n,a,i,r,s){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&n&&i)){e.next=3;break}return e.next=3,n.renderChannelSlice(t,i[r],a,s);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hn(e,t,n){return fn.apply(this,arguments)}function fn(){return(fn=Object(Lt.a)(Rt.a.mark((function e(t,n,a){var i,r,s;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<n.length)){e.next=10;break}return r=n[i],(s=Math.round(i/(n.length-1)*100))%10===0&&sn.setState({loaded:s}),e.next=7,t.load(r,a,i);case 7:i++,e.next=1;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pn(e,t,n,a,i){return dn.apply(this,arguments)}function dn(){return(dn=Object(Lt.a)(Rt.a.mark((function e(t,n,a,i,r){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&r.pages&&r.pages.length>0)){e.next=3;break}return e.next=3,hn(n,r.pages,r.image.width);case 3:on(t,n,0,a,i,!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vn(e,t,n,a,i){return mn.apply(this,arguments)}function mn(){return(mn=Object(Lt.a)(Rt.a.mark((function e(t,n,a,i,r){var s,l,c,o,u,h;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<r.length)){e.next=18;break}if(!((l=r[s])&&l.pages&&l.pages.length>0)){e.next=15;break}c=l.pages,o=0;case 6:if(!(o<c.length)){e.next=14;break}return u=c[o],h=s*c.length+o,e.next=11,n.load(u,l.image.width,h);case 11:o++,e.next=6;break;case 14:on(t,n,0,a,i,!1);case 15:s++,e.next=1;break;case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gn=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loaded:0},e.display=function(){return 100!==e.state.loaded?i.a.createElement(tn.a,{striped:!0,bar:!0,value:e.state.loaded}," ",e.state.loaded,"% "):i.a.createElement("div",null," ")},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return sn.subscribe((function(t){e.state.loaded=t.loaded})),this.display()}}]),n}(a.Component);function bn(e,t){var n=t.channels;return function(e,t,n){var a=0;return 1===e&&3===n&&t>1?a=1:3===e&&1===n&&t>1?a=2:e>1&&3===t?a=3:e>1&&1===t&&(a=4),console.log("determineType() - type, file, page, channel lengths: ",a,e,t,n),a}(e.length,e[0].pages.length,parseInt(n||1))}function yn(e,t){return e&&e.file.length>0&&e.file.length!==t&&e.total===e.size}function xn(e,t,n){return e.length>0&&e[t]&&e[t].pages&&e[t].pages.length>0&&e.length!==n}var jn=kt,wn=Ot,On=Kt,kn=It,Sn=function(e,t){var n=e.name,a=e.image,i=e.texture;""===i&&("image/tiff"===e.type||(i=Cn(a)));var r=jn.getState().channels[t-1];r.name===n&&r.imagepath===a&&r.uniforms.image.value===i||en(i,n,a,t)},En=$t,Cn=bt,In=At,zn=zt,An=function(e,t){It.setState((function(n){return{lengths:n.lengths.map((function(n,a){return a===e?t:n}))}}))},Mn=Mt,Dn=Bn,Rn=Tn,Ln=ln,Vn=on,Fn=bn,Un=yn,Nn=xn;function Tn(e,t,n,a,i,r,s,l,c){return _n.apply(this,arguments)}function _n(){return(_n=Object(Lt.a)(Rt.a.mark((function e(t,n,a,i,r,s,l,c,o){var u,h;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zn(t)){e.next=12;break}return(u={x:256,y:256,z:256}).x=l,u.y=c,u.z=o,h=new Wt({channel:new Bt({bytes:1,size:u,context:n})}),In(t,h),e.next=9,Ln(n,h,r,2,a,s,i);case 9:return e.next=11,h.channel.cacheCube();case 11:console.debug("initializeVolume: volume initialized with params: idx: %d fileIdx: %d type: %d width: %d height: %d length: %d",t,i,s,l,c,o);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bn(e,t,n){var a=new Uint8Array(e),i=new gt.DataTexture(a,t,n,gt.RGBAFormat);return i.needsUpdate=!0,i}var Wn={display:"block",width:"auto",height:"100%"},Pn=0;var Gn=n(132),Xn=n.n(Gn),Yn=n(62),qn=n.n(Yn);var Zn=M,Hn=function(e){Zn.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{file:[{name:e.name,image:e.preview,style:Wn,type:e.type,texture:fa(e.preview)}],size:t.size+1})})),Pn=Zn.getState().size-1},Jn=function(e){Zn.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{file:[].concat(Object(G.a)(t.file),[{name:e.name,image:e.preview,style:Wn,type:e.type,texture:fa(e.preview)}]),size:t.size+1})})),Pn=Zn.getState().size-1},Kn=function(e){Zn.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{file:[].concat(Object(G.a)(t.file),[{name:e.name,image:e.preview,style:Wn,type:e.type}]),size:t.size+1})})),ua(e),Pn=Zn.getState().size-1},Qn=function(e){Zn.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{file:[].concat(Object(G.a)(t.file),[{name:e.name,image:e.preview,style:Wn,type:e.type}]),size:t.size+1})})),ua(e),Pn=Zn.getState().size-1},$n=function(e){Zn.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{file:[{name:e.name,type:e.type,json:ca(e)}],size:t.size+1})})),Pn=Zn.getState().size-1},ea=function(e){Zn.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{file:[].concat(Object(G.a)(t.file),[{name:e.name,type:e.type,json:ca(e)}]),size:t.size+1})})),Pn=Zn.getState().size-1},ta=function(e){Zn.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{file:[{name:e.name,type:e.type,json:oa(e)}],size:t.size+1})})),Pn=Zn.getState().size-1},na=function(e){Zn.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{file:[].concat(Object(G.a)(t.file),[{name:e.name,type:e.type,json:oa(e)}]),size:t.size+1})})),Pn=Zn.getState().size-1},aa=function(){return 0===Zn.getState().size},ia=function(e){var t=!1,n=Zn.getState().file;return n&&0===n.filter((function(t){return t.name===e})).length&&(t=!0),t},ra=function(e){Zn.setState((function(t){return t.file.map((function(t,n){if(n===Pn){var a=t;return t.json=e,a}return t}))}))},sa=function(e,t,n,a){var i=Zn.getState().file.findIndex((function(t){return t.name===e})),r=Object(G.a)(Zn.getState().file),s=r[i];s.pages=t,s.image=n,s.metadata=a,r[i]=s},la=function(e){Zn.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{total:e})}))},ca=function(e){var t=new FileReader;t.onload=function(){var e=t.result;Xn()({noheader:!0,output:"json"}).fromString(e).then((function(e){var t=[];e.forEach((function(n,a){if(0!==a){var i={};Object.keys(n).forEach((function(t){var a=n[t],r=e[0][t];i[r]=a})),t.push(i)}})),ra(t)}))},t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.readAsText(e,"ISO-8859-1")},oa=function(e){var t,n=new FileReader;n.onload=function(){t=JSON.parse(n.result),ra(t.annotations)},n.readAsText(e)},ua=function(e){var t=new FileReader;e&&(t.onload=function(){"image/tiff"===e.type&&console.debug("importer::importTiff() - Loading TIFF image...",e.name)},t.onloadend=function(t){console.debug("importer::importTiff() - Parsing TIFF image...",e.name),function(e,t){for(var n=[],a=qn.a.decode(t),i=0;i<a.length;i++){var r=i;qn.a.decodeImage(t,a[r]);var s=qn.a.toRGBA8(a[r]);n.push(s)}for(var l=new Image(a[0].width,a[0].height),c=String(a[0].t270).split(/\s+/),o={},u=0;u<c.length;u++){var h=c[u].split(/=/),f=h[0],p=h[1];o[f]=p}sa(e,n,l,o)}(e.name,t.target.result)},t.onprogress=function(){console.log("importer::importTiff()","Still Loading...",e.name)},t.readAsArrayBuffer(e))},ha=U,fa=bt;var pa,da=M,va=U,ma=It,ga=zt,ba=Tn,ya=function(e,t){It.setState((function(n){return{sliceIndices:n.sliceIndices.map((function(n,a){return a===e?t:n}))}}))},xa=Mt,ja={display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:50,height:50,padding:4,boxSizing:"border-box"},wa={display:"flex",minWidth:0,overflow:"hidden"},Oa={position:"absolute",height:"100%",width:"100%",zIndex:"3",opacity:"0.5"},ka={position:"absolute",height:"100%",width:"100%",zIndex:"5",opacity:"0.5"},Sa={position:"absolute",height:"100%",width:"100%",zIndex:"7",opacity:"0.5"},Ea={flex:.1,position:"relative"},Ca={justify:"center",alignContent:"center",alignItems:"center",textAlign:"center",width:"100%",fluid:!0,fontSize:"12px",height:"100%"},Ia={width:"95%",height:"100%"},za={position:"center",height:"100px",width:"100%",zIndex:"3"},Aa={},Ma={flex:.1,position:"relative"},Da={justify:"center",alignContent:"center",alignItems:"center",textAlign:"center",width:"100%",fluid:!0,marginBottom:"15px",overflowX:"scroll"},Ra={},La={flex:.1,position:"relative"},Va={justify:"center",alignContent:"center",alignItems:"center",textAlign:"center",width:"100%",fluid:!0,fontSize:"12px",marginBottom:"15px"},Fa={flex:.1,position:"relative"},Ua={justify:"center",alignContent:"center",alignItems:"center",textAlign:"center",width:"100%",fluid:!0,fontSize:"12px",flexWrap:"wrap",marginBottom:"15px"},Na={width:"95%",height:"100%"},Ta=function(){for(var e=Qe(),t=0;t<e.length;t++){var n=e[t];n&&!ce(n)&&(ae(n),le(n))}},_a=function(){return se.getState().classes},Ba=function(e){se.setState((function(t){return{classes:t.classes.map((function(t,n){if(n===e){var a=t;return a.enabled=!t.enabled,a}return t}))}}));var t=se.getState().classes[e];t.enabled&&se.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{lastSel:t.name})}))},Wa=se,Pa=function(e){ye(e.name,e.enabled)},Ga=ye,Xa=function(){for(var e=st().getObjects(),t=0;t<e.length;t++){var n=e[t];n&&xe(n)}},Ya=ve,qa=function(){var e=st(),t=U.getState().annotations,n=He();if(!n)return null;for(var a=0;a<t.length;a++)n&&t[a].id===n.id&&(t[a].group&&n.group?Oe(t[a],n):n.group&&!t[a].group?e.add(n.group):ke(t[a]),Ze(a))},Za=function(){var e=st(),t=Xe.getState().redoAnnotations.length-1,n=U.getState().annotations;if(t>=0){var a=Xe.getState().redoAnnotations[Xe.getState().redoAnnotations.length-1];if(!a)return null;if(a.group){a.group.set({top:a.rect.top,left:a.rect.left,width:a.rect.width,height:a.rect.height,scaleX:a.rect.scaleX,scaleY:a.rect.scaleY});for(var i=st()._objects,r=0;r<i.length;r++)i[r]&&i[r]._objects&&i[r]._objects[1].text&&i[r]._objects[1].text===a.label&&e.remove(i[r]);e.add(a.group),e.requestRenderAll(),e.setActiveObject(a.group)}else for(var s=0;s<n.length;s++)n[s].id===a.id&&(e.add(n[s].group),e.requestRenderAll());$e(t)}},Ha=function(e){fe.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{canvas:e})}))},Ja=fe,Ka=on,Qa=function(e,t){return Qt(t)?(e!==jn.getState().channels[t-1].uniforms.brightness.value&&function(e,t){jn.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.brightness.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::UpdateBrighness() - null state",jn.getState()," channel: ",t," value: ",e),!1)},$a=function(e,t){return Qt(t)?(e!==jn.getState().channels[t-1].uniforms.contrast.value&&function(e,t){jn.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.contrast.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::updateContrast() - null state",jn.getState()," channel: ",t," value: ",e),!1)},ei=function(e,t){return Qt(t)?(e!==jn.getState().channels[t-1].uniforms.whitepoint.value&&function(e,t){jn.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.whitepoint.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::updateWhitepoint() - null state",jn.getState()," channel: ",t," value: ",e),!1)},ti=function(e,t){return Qt(t)?(e!==jn.getState().channels[t-1].uniforms.blackpoint.value&&function(e,t){jn.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.blackpoint.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::updateBlackpoint() - null state",jn.getState()," channel: ",t," value: ",e),!1)},ni=function(e,t){var n=new gt.Color(e.color);return Qt(t)?(e!==jn.getState().channels[t-1].uniforms.color.value&&function(e,t){jn.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.color.value=e,i}return n}))}}))}(n,t),!0):(console.log("CanvasControl::updateColor() - null state",jn.getState()," channel: ",t," value: ",e),!1)},ai=function(e,t){return Qt(t)?(e!==jn.getState().channels[t-1].uniforms.opacity.value&&function(e,t){jn.setState((function(n){return{channels:n.channels.map((function(n,a){if(a===t-1){var i=n;return i.uniforms.opacity.value=e,i}return n}))}}))}(e,t),!0):(console.log("CanvasControl::updateOpacity() - null state",jn.getState()," channel: ",t," value: ",e),!1)},ii=function(e,t){if(!Ce()){Ie(!0);var n=Ne.getState().canvas;ze(e-n._offset.left,t-n._offset.top)}},ri=function(e,t){Ne.getState().canvas.isDrawingMode?Ee(Ne.getState().canvas):function(e,t){!function(e,t){Ne.setState((function(n){return Object(x.a)(Object(x.a)({},n),{},{origin:{x:e-Ne.getState().canvas._offset.left,y:t-Ne.getState().canvas._offset.top}})}))}(e,t)}(e,t)},si=function(){Te(Le.SELECT)},li=function(e,t){Ne.getState().drawMode===Le.SELECT?Te(Le.RECT):Ne.getState().drawMode===Le.RECT&&_e(e,t)},ci=function(){var e=Ne.getState().annotations;if(e.length>Ne.getState().canvas.getObjects().length){var t=e[e.length-1],n={left:parseInt(t.rect.left),top:parseInt(t.rect.top),width:parseInt(t.rect.width),height:parseInt(t.rect.height)};Se(Ne.getState().canvas,n,t.label,t.class)}},oi=function(e){Ne.setState((function(t){return{canvas:e}}))},ui=Te,hi=Ne,fi=Le,pi=function(e){E.setState((function(t){return{channels:t.channels.map((function(n,a){if(a===e-1){var i=n;return i.selected=!t.channels[a].selected,i}return n}))}}))},di=function(e){E.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{lastSelected:e})}))},vi=function(){var e=document.createElement("a"),t=function(){for(var e=ha.getState().annotations,t={annotations:[]},n=0;n<e.length;n++){var a=e[n],i={class:a.class,id:a.id,label:a.label,rect:a.rect};t.annotations[n]=i}return JSON.stringify(t,null,2)}(),n=new Blob([t],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="annotations.json",document.body.appendChild(e),e.click()},mi=bn,gi=yn,bi=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).canvasRef=i.a.createRef(),a.handleMouseDown=a.handleMouseDown.bind(Object(b.a)(a)),a.handleMouseUp=a.handleMouseUp.bind(Object(b.a)(a)),a.handleMouseDoubleClick=a.handleMouseDoubleClick.bind(Object(b.a)(a)),a.handleDrag=a.handleDrag.bind(Object(b.a)(a)),a.selectClass1=a.selectClass1.bind(Object(b.a)(a)),a.showAll=a.showAllClasses.bind(Object(b.a)(a)),a.handleMoveAnnotation=a.handleMoveAnnotation.bind(Object(b.a)(a)),a.handleModifyAnnotation=a.handleModifyAnnotation.bind(Object(b.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){(pa=new y.fabric.Canvas(this.canvasRef.current,{fireRightClick:!0})).on({"mouse:down":this.handleMouseDown,"mouse:up":this.handleMouseUp,"mouse:dblclick":this.handleMouseDoubleClick,"object:modified":this.handleModifyAnnotation,"object:moving":this.handleMoveAnnotation,"object:rotating":this.handleDrag,"object:scaling":this.handleDrag}),Ha(pa),oi(pa)}},{key:"handleDrag",value:function(e){si()}},{key:"handleMoveAnnotation",value:function(e){ui(fi.SELECT)}},{key:"handleModifyAnnotation",value:function(e){!function e(t){for(var n=t._objects,a=0;a<n.length;a++){if(!n[a]._objects){t.setCoords(),te(t);break}e(n[a])}_.setState({redoAnnotations:[]})}(e.target)}},{key:"handleLeftMouseDown",value:function(e){var t=hi.getState().drawMode;t===fi.RECT?ri(e.e.clientX,e.e.clientY):t===fi.FREE&&Ya(pa)}},{key:"handleRightMouseDown",value:function(e){ii(e.e.clientX,e.e.clientY)}},{key:"handleLeftMouseUp",value:function(e){li(e.e.clientX,e.e.clientY)}},{key:"handleRightMouseUp",value:function(e){}},{key:"handleMouseDown",value:function(e){3===e.button?this.handleRightMouseDown(e):this.handleLeftMouseDown(e)}},{key:"handleMouseUp",value:function(e){3===e.button?this.handleRightMouseUp(e):this.handleLeftMouseUp(e)}},{key:"handleObjectSelect",value:function(e){}},{key:"handleObjectResize",value:function(e){}},{key:"handleMouseDoubleClick",value:function(e){si()}},{key:"displayMenu",value:function(){if(pa&&pa.getActiveObjects().length>0)return i.a.createElement(mt,null)}},{key:"selectClass1",value:function(){Ga("class1"),this.forceUpdate()}},{key:"showAllClasses",value:function(){Xa(),this.forceUpdate()}},{key:"render",value:function(){var e=this;return va.subscribe((function(e){e&&ci(e.annotations,pa)})),Ja.subscribe((function(t){e.forceUpdate()})),i.a.createElement("div",{id:"annotationLayer",style:Ra,onContextMenu:function(e){return e.preventDefault()}},i.a.createElement("canvas",{ref:this.canvasRef,width:.6*window.innerWidth,height:.48*window.innerHeight}),this.displayMenu())}}]),n}(i.a.Component),yi={views:[{name:"main",zoomPct:"1",zoomZppPct:"1",reset:"0"},{name:"xy",zoomPct:"1",zoomZppPct:"1",reset:"0"},{name:"yz",zoomPct:"1",zoomZppPct:"1",reset:"0"},{name:"xz",zoomPct:"1",zoomZppPct:"1",reset:"0"}],last:"0"},xi=Object(w.a)((function(e){return Object(x.a)({},yi)})),ji=Object(j.a)(xi,2),wi=(ji[0],ji[1]),Oi=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).initSlider={initial:0,min:0,max:0,step:0,value:0},a.handleSliderChange=function(e){e.persist();var t=a.state.slider;t.value=e.target.value,a.setState({slider:t}),a.updateStatus(!0),a.notifyValue()},a.state={updated:!1,slider:a.initSlider,setSlider:null,sync:!0},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(){return!!this.state.updated}},{key:"updateStatus",value:function(e){this.setState({updated:!0})}},{key:"notifyValue",value:function(){var e=this.props.sliderValue,t=this.props.type;e(this.state.slider.value,t)}},{key:"displayValue",value:function(){return"1"===this.props.raw?i.a.createElement("span",null," ",Math.round(this.state.slider.value*this.props.multiplier)):i.a.createElement("span",null," ",Math.round(this.state.slider.value*this.props.multiplier),"%")}},{key:"render",value:function(){var e=this;wi.subscribe((function(t){if(e.props.type>=0&&e.props.type<t.views.length){var n=e.state.slider;n.value=t.views[e.props.type].zoomPct,e.setState({slider:n})}}));var t=this.state.slider,n=this.props,a=n.label,r=n.min,s=n.max,l=n.initial,c=n.step;return i.a.createElement("div",{className:"slider-settings"},i.a.createElement("span",null,a)," ",i.a.createElement("br",null),i.a.createElement("span",null,r," "),i.a.createElement("input",{type:"range",className:"slider",value:t.value||l,id:"customRange1",initial:l,min:r,max:s,step:c,onChange:function(t){return e.handleSliderChange(t)}}),i.a.createElement("span",null," ",s),i.a.createElement("span",null," ",this.displayValue()))}}]),n}(a.Component),ki=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).canvas=i.a.createRef(),a.state={axes:["x","y","z"],cntxt:null},a.fileLength=0,a.length=0,a.sliceIdx=0,a.axisIdx=e.axis,a.channel=1,a.channelSliceIdx=0,a.type=1,a.typeIsDefault=!0,a.files=e.files,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){if(this.cntxt=this.canvas.current.getContext("2d"),this.files){var e=Math.max(this.files.length-1,0);if(this.isValidTiffFile(this.files,e)){var t=this.files[e],n=t.image.width,a=t.image.height,i=this.files.length,r=t.pages.length;this.setType(this.files,t.metadata),this.setSlider(n,a,i,r),this.setVolume(this.files,n,a,r*i),this.updateSlice(),this.fileLength=i,this.forceUpdate()}else this.isValidPNGFile(this.files,e)&&(this.updateFileList(this.files),this.drawPNG(this.files[e].image),this.type=5,this.setSlider(0,0,this.files.length,0),this.forceUpdate())}}},{key:"isValidTiffFile",value:function(e,t){return e.length>0&&e[t]&&e[t].pages&&e[t].pages.length>0&&e.length!==this.fileLength}},{key:"isValidPNGFile",value:function(e,t){return e.length>0&&e[t]&&e.length!==this.fileLength&&"image/png"===e[t].type}},{key:"drawPNG",value:function(e){var t=new Image;t.src=e,this.cntxt.drawImage(t,0,0)}},{key:"setSlider",value:function(e,t,n,a){"2"===this.props.axis&&(1===this.type?this.length=a/3:2===this.type?this.length=a:3===this.type?this.length=n:4===this.type?this.length=n/3:5===this.type&&(this.length=n))}},{key:"setVolume",value:function(e,t,n,a){ba(0,this.cntxt,e,0,this.state.axes,this.type,t,n,a),this.volume||(this.volume=ga(0))}},{key:"setType",value:function(e,t){this.typeIsDefault&&(this.type=mi(e,t),xa(this.type),this.typeIsDefault=!1)}},{key:"refreshImage",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cntxt.clearRect(0,0,this.canvas.current.width,this.canvas.current.height),this.volume||(this.volume=ga(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateFileList",value:function(e){for(var t=e.filter((function(e){return"image/png"===e.type})),n=this.files.length;n<t.length;n++){t.length;this.files.push(t[n])}}},{key:"updateForFile",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(t){var n,a,i,r,s,l,c;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gi(t,this.fileLength)&&(n=t.file,t&&n&&(a=Math.max(n.length-1,0),this.isValidTiffFile(t.file,a)?(i=n[a],r=i.image.width,s=i.image.height,l=n.length,c=i.pages.length,this.setType(n,i.metadata),this.setSlider(r,s,l,c),this.setVolume(n,r,s,c*l),this.updateSlice(),this.fileLength=l,this.forceUpdate()):this.isValidPNGFile(t.file,a)&&(this.updateFileList(t.file),this.drawPNG(t.file[a].image),this.type=5,this.setSlider(0,0,n.length,0),this.forceUpdate())));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"computeSlice",value:function(e){return 1===this.type?3*e+(this.channel-1):2===this.type?e+(this.channel-1)*this.length:3===this.type||4===this.type?3*e+(this.channel-1):5===this.type?e:void 0}},{key:"updateSlice",value:function(){this.type<5?(this.refreshImage(),Ka(this.cntxt,this.volume,this.sliceIdx,this.state.axes,this.axisIdx,!1)):5===this.type&&this.drawPNG(this.files[this.sliceIdx].image),this.forceUpdate()}},{key:"sliderValueSlice",value:function(e){this.channelSliceIdx=parseInt(e),this.sliceIdx=this.computeSlice(this.channelSliceIdx),this.updateSlice()}},{key:"sliderValueChannel",value:function(e){this.channel=parseInt(e),this.sliceIdx=this.computeSlice(this.channelSliceIdx),this.updateSlice()}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"drawChannelSlider",value:function(){return this.type<5?i.a.createElement("div",null,i.a.createElement("div",{className:"channel-slider-container"},i.a.createElement(Oi,{label:"",width:"40%",min:"1",max:"3",step:"1",initial:"0",multiplier:"1",raw:"1",sliderValue:this.sliderValueChannel.bind(this)}),i.a.createElement("div",null," Channel: ",this.channel," "))):5===this.type?i.a.createElement("div",null):void 0}},{key:"render",value:function(){var e=this;da.subscribe((function(t){e.updateForFile(t)}));var t=1*window.innerWidth,n=1*window.innerHeight;return i.a.createElement("div",{style:{color:"black",height:"100%"}},i.a.createElement("canvas",{id:"canvas-1",ref:this.canvas,width:t,height:n}),i.a.createElement(gn,null),i.a.createElement("div",{className:"slice-slider-container"},i.a.createElement(Oi,{label:"",width:"40%",min:"0",max:Math.max(this.length-1,0),step:"1",initial:"0",multiplier:"1",raw:"1",sliderValue:this.sliderValueSlice.bind(this)}),i.a.createElement("div",null," Slice: ",this.channelSliceIdx," ")),this.drawChannelSlider())}}]),n}(a.Component),Si=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"canvasView",value:function(){var e=i.a.createElement(ki,{axis:"2",className:"annot-view",alt:"main-canvas",width:.6*window.innerWidth,height:"100%",channel:"4",files:this.files}),t=.6*window.innerWidth,n=.6*window.innerHeight;return i.a.createElement("div",{id:"main-canvas-view",style:{width:t,height:n}},e)}},{key:"channelViews",value:function(){var e,t,n;return E.getState().channels[0].selected&&(console.log("displaying 1"),e=Kt.getState().canvas[0]),E.getState().channels[1].selected&&(console.log("displaying 2"),t=Kt.getState().canvas[1]),E.getState().channels[2].selected&&(console.log("displaying 3"),n=Kt.getState().canvas[2]),i.a.createElement("div",null,i.a.createElement("div",{style:Oa},e),i.a.createElement("div",{style:ka},t),i.a.createElement("div",{style:Sa},n," "))}},{key:"updateForFile",value:function(e){this.files=e.file}},{key:"display",value:function(){return E.getState().channels[0].selected||E.getState().channels[1].selected||E.getState().channels[2].selected?this.channelViews():this.canvasView()}},{key:"render",value:function(){var e=this;E.subscribe((function(t){e.forceUpdate()})),da.subscribe((function(t){e.updateForFile(t)}));var t=.6*window.innerWidth,n=.6*window.innerHeight;return i.a.createElement("div",{className:"main-view",style:La},i.a.createElement(v.a,{className:"main-card",style:Va},i.a.createElement(m.a,{className:"main-card-body"},i.a.createElement(g.a,null," ",i.a.createElement("h5",null," Image View ")," "),i.a.createElement("div",{id:"main-canvas-container",style:{width:t,height:n,position:"relative"}},this.display(),i.a.createElement(bi,null)))))}}]),n}(i.a.Component),Ei=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).canvas=i.a.createRef(),a.state={axes:["x","y","z"],cntxt:null},a.fileLength=0,a.length=0,a.sliceIdx=0,a.axisIdx=e.axis,a.channel=1,a.channelSliceIdx=0,a.type=1,a.typeIsDefault=!0,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(t){return{cntxt:e.canvas.current.getContext("2d")}}))}},{key:"isValidFile",value:function(e,t){return e.length>0&&e[t]&&e[t].pages&&e[t].pages.length>0&&e.length!==this.fileLength}},{key:"setSlider",value:function(e,t,n,a){"0"===this.props.axis&&(this.length=e),"1"===this.props.axis&&(this.length=t),"2"===this.props.axis&&(1===this.type?this.length=a:(2===this.type||3===this.type||4===this.type)&&(this.length=a*n))}},{key:"setVolume",value:function(e,t,n,a){ba(0,this.state.cntxt,e,0,this.state.axes,this.type,t,n,a),this.volume||(this.volume=ga(0))}},{key:"setType",value:function(e,t){this.typeIsDefault&&(this.type=mi(e,t),xa(this.type),this.typeIsDefault=!1)}},{key:"updateForFile",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(t){var n,a,i,r,s,l,c;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gi(t,this.fileLength)&&(n=t.file,t&&n&&(a=Math.max(n.length-1,0),this.isValidFile(n,a)&&(i=n[a],r=i.image.width,s=i.image.height,l=n.length,c=i.pages.length,this.setType(n,i.metadata),this.setSlider(r,s,l,c),this.setVolume(n,r,s,c*l),this.updateSlice(),this.fileLength=l,this.forceUpdate())));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSlice",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(this.state.cntxt,this.volume,this.sliceIdx,this.state.axes,this.axisIdx,!1);case 2:this.forceUpdate();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nextSlice",value:function(e){this.sliceIdx=e?this.clamp(parseInt(this.sliceIdx)-1,0,Math.max(0,this.length-1)):this.clamp(parseInt(this.sliceIdx)+1,0,Math.max(0,this.length-1)),this.updateSlice()}},{key:"sliderValueSlice",value:function(e){this.sliceIdx=parseInt(e||0),this.updateSlice()}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"render",value:function(){var e=this;return da.subscribe((function(t){e.updateForFile(t)})),i.a.createElement("div",null,i.a.createElement("canvas",{id:"canvas-1",ref:this.canvas,height:"280"}),i.a.createElement(gn,null),i.a.createElement("div",{className:"axis-slice-slider-container"},i.a.createElement(Oi,{label:"",width:"40%",min:"0",max:Math.max(this.length-1,0),step:"1",initial:"0",multiplier:"1",raw:"1",sliderValue:this.sliderValueSlice.bind(this)}),i.a.createElement("button",{id:"prevSliceBtn",onClick:function(){e.nextSlice(!0)}},"<<"),i.a.createElement("button",{id:"resetSliceBtn",onClick:function(){e.slice(0)}},"Go to Slice 0"),i.a.createElement("button",{id:"nextSliceBtn",onClick:function(){e.nextSlice(!1)}},">>"),"\xa0",i.a.createElement("label",null,"Page #: \xa0",i.a.createElement("input",{type:"text",style:{width:"30px"},value:this.sliceIdx,onChange:function(t){return e.sliderValueSlice(t.target.value)}})),i.a.createElement("div",null," Slice: ",this.sliceIdx," ")))}}]),n}(a.Component),Ci=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).view1=i.a.createElement(Ei,{axis:"2"}),e.view2=i.a.createElement(Ei,{axis:"0"}),e.view3=i.a.createElement(Ei,{axis:"1"}),e}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"card-axis-xy",style:Fa},i.a.createElement(v.a,{style:Ua},i.a.createElement(m.a,{style:Na},i.a.createElement(g.a,null," ",i.a.createElement("h5",null," Axis XY ")," "),this.view1))),i.a.createElement("div",{className:"card-axis-yz",style:Fa},i.a.createElement(v.a,{style:Ua},i.a.createElement(m.a,{style:Na},i.a.createElement(g.a,null," ",i.a.createElement("h5",null," Axis YZ ")," "),this.view2))),i.a.createElement("div",{className:"card-axis-xz",style:Fa},i.a.createElement(v.a,{style:Ua},i.a.createElement(m.a,{style:Na},i.a.createElement(g.a,null," ",i.a.createElement("h5",null," Axis XZ ")," "),this.view3))))}}]),n}(i.a.Component),Ii=n(339),zi=n(344),Ai=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).futureClass=[],a.futureAnnotClass=[],a.state={classes:[],annotClasses:[]},a.enables=[],a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e){for(var t=0;t<e.classes;t++){var n=e.classes[t];if(n&&this.state.classes[t]!==n.name&&this.enables[t]!==n.enabled)return!0}for(t=0;t<e.annotClasses;t++){var a=e.annotClasses[t];if(a&&this.state.annotClasses[t]!==a)return!0}return!1}},{key:"filter",value:function(e){var t=_a();Ba(e),Pa(t[e])}},{key:"updateAnnotClasses",value:function(e){for(var t=this,n=function(){var n=e[a];t.state.annotClasses.includes(n.class)||t.futureAnnotClass.includes(n.class)||(t.futureAnnotClass.push(n.class),t.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{annotClasses:[].concat(Object(G.a)(e.annotClasses),[n.class])})})))},a=0;a<e.length;a++)n()}},{key:"updateClasses",value:function(e){for(var t=this,n=function(){var n=e[a];t.state.classes.includes(n.name)||t.futureClass.includes(n.name)||(t.futureClass.push(n.name),t.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{classes:[].concat(Object(G.a)(e.classes),[n.name])})})))},a=0;a<e.length;a++)n()}},{key:"updateEnables",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.enables.length!==e.length?this.enables[t]=n.enabled:n&&this.enables[t]!==n.enabled&&(this.enables[t]=n.enabled,this.forceUpdate())}}},{key:"display",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"annotations-class",style:Ma},i.a.createElement(v.a,{style:Da},i.a.createElement(m.a,null,i.a.createElement(g.a,null," ",i.a.createElement("h5",null," Annotation Classes ")," ")),i.a.createElement(Ii.a,{className:"viewBtn",outline:!0,color:"secondary",id:"annotator-class-list"},"Class List"),i.a.createElement("br",null),i.a.createElement(zi.a,{toggler:"annotator-class-list"},this.displayClassList()))))}},{key:"displayClassList",value:function(){for(var e=this,t=_a(),n=[],a=function(){var a=r,s=t[a].enabled;n.push(i.a.createElement(Ii.a,{outline:!0,color:"primary",id:"annot1Btn",onClick:function(){e.filter(a)},active:s},t[a].name))},r=0;r<t.length;r++)a();return i.a.createElement("div",null,n)}},{key:"render",value:function(){var e=this;return va.subscribe((function(t){t&&(Ta(),e.updateAnnotClasses(t.annotations))})),Wa.subscribe((function(t){t&&e.state.classes.length!==t.classes.length&&e.updateClasses(t.classes),t&&t.classes&&e.updateEnables(t.classes)})),i.a.createElement("div",null,this.display())}}]),n}(i.a.Component),Mi=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).classicImage=function(e,t){return i.a.createElement("div",{style:ja,key:e.name},i.a.createElement("div",{style:wa},i.a.createElement("img",{src:e.image,style:e.style,alt:e.name,onClick:function(){return a.setSelected(t)}})))},a.allThumbs=function(){var e=[];return da.getState().file&&da.getState().file.map((function(t,n){return"image/png"===t.type&&e.push(a.classicImage(t,n)),null})),i.a.createElement("div",null,e)},a.allTiffsCanvas=function(){return a.canvas&&a.loadTiff(a.canvas.getContext("2d")),i.a.createElement("div",null,i.a.createElement("canvas",{ref:a.canvasRef,width:"500px",height:"500px",margin:"0px",id:"tiff-canvas"}))},a.selected=0,a.files=[],a.canvasRef=i.a.createRef(),a.canvas=null,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.canvas=new y.fabric.Canvas(this.canvasRef.current)}},{key:"setSelected",value:function(e){this.selected!==e&&(da.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{selected:e})})),this.selected=e)}},{key:"updateForFile",value:function(e){if(e&&e.file.length>0&&e.file.length!==this.files.length){for(var t=e.file.filter((function(e){return"image/tiff"===e.type})),n=this.files.length;n<t.length;n++){var a=t[t.length-1],i={rgba:a.rgba,width:a.image.width,height:a.image.height,page:a.pages[0],name:a.name,type:a.type};this.files.push(i)}this.forceUpdate()}}},{key:"shrinkTiff",value:function(e,t,n){var a=t.width,i=t.height,r=document.createElement("canvas");r.width=a,r.height=i,r.getContext("2d").putImageData(t,0,0);var s=60*n;e.drawImage(r,s,0,50,50)}},{key:"loadTiff",value:function(e){for(var t=0;t<this.files.length;t++){var n=this.files[t],a=null;if(n&&(a=n.page),a&&n.width>0&&n.height>0){for(var i=e.createImageData(n.width,n.height),r=0;r<a.length;r++)i.data[r]=a[r];this.shrinkTiff(e,i,t)}}}},{key:"display",value:function(){return i.a.createElement("div",null,this.allThumbs(),this.allTiffsCanvas())}},{key:"render",value:function(){var e=this;return da.subscribe((function(t){e.updateForFile(t),e.forceUpdate()})),i.a.createElement("div",{id:"thumbsContainer"},this.display())}}]),n}(i.a.Component),Di=n(340),Ri=n(135);function Li(e){var t=Object(a.useState)([]),n=Object(j.a)(t,2),r=n[0],s=n[1],l=Object(Ri.a)({accept:"image/png, image/tiff, .csv, .json",onDrop:function(e){s(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),c=l.getRootProps,o=l.getInputProps,u=r.map((function(e){return ia(e.name)&&(aa()?function(e){"image/png"===e.type?Hn(e):"image/tiff"===e.type?Kn(e):"text/csv"===e.type?$n(e):"application/json"===e.type&&ta(e)}(e):function(e){"image/png"===e.type?Jn(e):"image/tiff"===e.type?Qn(e):"text/csv"===e.type?ea(e):"application/json"===e.type&&na(e)}(e)),null}));return Object(a.useEffect)((function(){return function(){r.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[r]),i.a.createElement("section",{className:"container"},i.a.createElement("div",c({className:"dropzone"}),i.a.createElement("input",o()),e.name,la(r.length),u))}var Vi=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"displayFileMenu",value:function(){return i.a.createElement("div",null,i.a.createElement(Ii.a,{color:"primary",className:"import-btn"}," ",i.a.createElement(Li,{name:"Import File"})," ")," ","\xa0",i.a.createElement(Ii.a,{color:"primary",className:"export-btn",onClick:vi}," ","Export Annotations"," ")," ","\xa0")}},{key:"displayDrawMenu",value:function(){return i.a.createElement("div",null,i.a.createElement(Ii.a,{color:"primary",className:"draw-rectangle-btn",onClick:function(e){return ui(fi.RECT)}},"Draw Rectangle")," ","\xa0")}},{key:"displayEditMenu",value:function(){return i.a.createElement("div",null,i.a.createElement(Ii.a,{color:"primary",className:"draw-rectangle-btn",onClick:function(e){return qa()}},"Undo")," ","\xa0",i.a.createElement(Ii.a,{color:"primary",className:"draw-rectangle-btn",onClick:function(e){return Za()}},"Redo")," ","\xa0")}},{key:"render",value:function(){return i.a.createElement("div",{style:{padding:"15px 7px"}},i.a.createElement(Di.a,{color:"light",light:!0,className:"navbar shadow-sm p-3 mb-0 bg-white rounded",expand:"md"},this.displayFileMenu(),this.displayDrawMenu(),this.displayEditMenu()))}}]),n}(i.a.Component),Fi=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).file_size=0,e.annotations={},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return We.subscribe((function(t){if(t&&e.file_size!==t.size)for(var n=0;n<t.file.length;n++){var a=t.file[n].json;a&&(qe(a),e.file_size=t.size)}})),Pe.subscribe((function(t){e.annotations!==t.annotations&&(e.annotations=t.annotations)})),i.a.createElement("div",{id:"annotator-div"})}}]),n}(i.a.Component),Ui=n(341),Ni=n(342),Ti=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).files=[],a.canvasRef=i.a.createRef(),a.state={axes:["x","y","z"]},a.init(),a}return Object(c.a)(n,[{key:"init",value:function(){this.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{cntxt:null,rgb:0})})),this.fileLength=0,this.type=1,this.typeIsDefault=!0,this.sliceIdx=0,this.computedSlicedIdx=0,this.axisIdx=2,this.length=0,this.imgdata=null,this.updatedtexture=!0,this.volType=0,this.texture=null}},{key:"componentDidMount",value:function(){var e=new y.fabric.Canvas(this.canvasRef.current).getContext("2d");this.setState((function(t){return{cntxt:e}}))}},{key:"updateFileList",value:function(e){for(var t=e.filter((function(e){return"image/tiff"===e.type})),n=this.files.length;n<t.length;n++){var a=t[t.length-1],i={rgba:a.rgba,width:a.image.width,height:a.image.height,length:a.pages.length,page:a.pages[0],name:a.name,type:a.type};this.files.push(i)}var r=e.filter((function(e){return"image/png"===e.type}));for(n=this.files.length;n<r.length;n++){r.length;this.files.push(r[n])}}},{key:"updateLength",value:function(e,t){1===this.type?this.length=t/3:2===this.type?this.length=t:3===this.type?this.length=e:4===this.type?this.length=e/3:5===this.type&&(this.length=e)}},{key:"getIdx",value:function(e){return 1===this.type?Math.max(e-1,0):2===this.type?parseInt(this.props.channel)-1:3===this.type||4===this.type||5===this.type?Math.max(e-1,0):void 0}},{key:"setVolume",value:function(e,t,n,a){Rn(0,this.state.cntxt,e,0,this.state.axes,this.type,t,n,a),this.volume||(this.volume=zn(0))}},{key:"setType",value:function(e,t){this.typeIsDefault&&(this.type=Fn(e,t),Mn(this.type),this.typeIsDefault=!1)}},{key:"isValidPNGFile",value:function(e,t){return e.length>0&&e[t]&&e.length!==this.fileLength&&"image/png"===e[t].type}},{key:"updateForFile",value:function(e){if(Un(e,this.files.length)){var t=this.getIdx(e.file.length),n=e.file;if(Nn(n,t,this.fileLength)){var a=n[t],i=a.image.width,r=a.image.height,s=n.length,l=a.pages.length;this.updateFileList(n),this.setType(n,a.metadata),this.updateLength(s,l),this.setVolume(n,i,r,l),this.fileLength=this.files.length,this.file=a,Sn(n[e.selected],this.props.channel),An(parseInt(this.props.channel)+3,this.length)}else this.isValidPNGFile(n,t)&&(this.updateFileList(n),this.type=5,this.updateLength(n.length,0),Sn(this.files[this.sliceIdx],this.props.channel),An(parseInt(this.props.channel)+3,this.length))}this.forceUpdate()}},{key:"updateForControls",value:function(e){var t=e.channels[this.props.channel-1].uniforms.image.value;t&&this.texture!==t&&(this.texture=t,this.forceUpdate())}},{key:"updateForSlice",value:function(e){if(e){var t=e.sliceIndices[parseInt(this.props.channel)+3];this.sliceIdx!==t&&(this.computedSlicedIdx=this.computeSlice(parseInt(t)),this.type<5?(this.updateSlice(),this.loadTiff()):5===this.type&&Sn(this.files[parseInt(t)],this.props.channel),this.forceUpdate(),this.sliceIdx=t)}}},{key:"computeSlice",value:function(e){return 1===this.type?3*e+(parseInt(this.props.channel)-1):2===this.type?e+(parseInt(this.props.channel)-1)*this.length:3===this.type||4===this.type?3*e+(parseInt(this.props.channel)-1):5===this.type?e:void 0}},{key:"updateSlice",value:function(){Vn(this.state.cntxt,this.volume,this.computedSlicedIdx,this.state.axes,this.axisIdx,!0),this.updatedtexture=!1,this.forceUpdate()}},{key:"setImageData",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.volume||(this.volume=zn(0)),!this.volume){e.next=5;break}return e.next=4,this.volume.getImageData();case 4:this.imgdata=e.sent;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTexture",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.texture=Dn(this.imgdata.data,this.imgdata.width,this.imgdata.height),En(this.file,this.texture,this.props.channel);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTiff",value:function(){var e=Object(Lt.a)(Rt.a.mark((function e(){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updatedtexture||(this.setImageData(),this.imgdata&&this.imgdata.data.length>0&&(this.setTexture(),this.updatedtexture=!0));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"displayCanvas",value:function(){return this.loadTiff(),On.getState().canvas[this.props.channel-1]}},{key:"render",value:function(){var e=this;return wn.subscribe((function(t){e.updateForFile(t),e.forceUpdate()})),jn.subscribe((function(t){e.updateForControls(t)})),kn.subscribe((function(t){e.updateForSlice(t)})),this.displayCanvas()}}]),n}(i.a.Component),_i=n(134),Bi=n(8),Wi=n.n(Bi),Pi=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={displayColorPicker:!1,color:{r:"241",g:"112",b:"19",a:"1"}},e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(t){e.setState({color:t.rgb})},e.handleChangeComplete=function(t){e.setState({color:t.rgb}),e.props.onClick({color:t.hex})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=Wi()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(this.state.color.r,", ").concat(this.state.color.g,", ").concat(this.state.color.b,", ").concat(this.state.color.a,")")},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return i.a.createElement("div",null,i.a.createElement("div",{style:e.swatch,onClick:this.handleClick},i.a.createElement("div",{style:e.color})),this.state.displayColorPicker?i.a.createElement("div",{style:e.popover},i.a.createElement("div",{style:e.cover,onClick:this.handleClose}),i.a.createElement(_i.SketchPicker,{color:this.state.color,onChange:this.handleChange,onChangeComplete:this.handleChangeComplete})):null)}}]),n}(i.a.Component),Gi=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).updateSelection=function(){pi(e.props.ch),di(e.props.ch),e.forceUpdate()},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.channelSliceIdx=0,this.channelSliceLen=0}},{key:"sliderValueSlice",value:function(e){ya(parseInt(this.props.ch)+3,e)}},{key:"updateForSliceLen",value:function(e){var t=e.lengths[parseInt(this.props.ch)+3];this.channelSliceLen!==t&&(this.channelSliceLen=t,this.forceUpdate())}},{key:"sliderValueBr",value:function(e){Qa(e,this.props.ch)}},{key:"sliderValueCt",value:function(e){$a(e,this.props.ch)}},{key:"sliderValueWp",value:function(e){ei(e,this.props.ch)}},{key:"sliderValueBp",value:function(e){ti(e,this.props.ch)}},{key:"sliderValueOpc",value:function(e){ai(e,this.props.ch)}},{key:"colorValue",value:function(e){ni(e,this.props.ch)}},{key:"resetBrightness",value:function(){Qa("0.0",this.props.ch)}},{key:"resetContrast",value:function(){$a("0.0",this.props.ch)}},{key:"resetWhitepoint",value:function(){ei("255.0",this.props.ch)}},{key:"resetBlackpoint",value:function(){ti("0.0",this.props.ch)}},{key:"resetOpacity",value:function(){ai("0.0",this.props.ch)}},{key:"render",value:function(){var e=this;ma.subscribe((function(t){e.updateForSliceLen(t)}));var t=this.sliderValueBr,n=this.sliderValueCt,a=this.sliderValueWp,r=this.sliderValueBp,s=this.sliderValueOpc,l=this.colorValue,c="Ch"+this.props.ch+" Histogram",o=i.a.createElement(Ti,{className:"annot-view",alt:c,height:"200px",channel:this.props.ch,style:Aa}),u=E.getState().channels[this.props.ch-1].selected;return console.log("Channel "+this.props.ch+" : "+u),i.a.createElement("div",null,i.a.createElement(Ii.a,{className:"channelBtn",outline:!0,color:"primary",id:"channel-btn",onClick:function(){e.updateSelection()},active:u},"Channel ","".concat(this.props.ch)),"\xa0",i.a.createElement(Ii.a,{className:"viewBtn",outline:!0,color:"secondary",id:"view".concat(this.props.ch)},"View"),i.a.createElement(zi.a,{toggler:"#view".concat(this.props.ch)},i.a.createElement(v.a,{style:Ca},i.a.createElement(m.a,{style:Ia},i.a.createElement("div",{className:"channel-slice-slider-container"},i.a.createElement(Oi,{label:"",width:"40%",min:"0",max:Math.max(this.channelSliceLen-1,0),step:"1",initial:"0",multiplier:"1",raw:"1",sliderValue:this.sliderValueSlice.bind(this)})),i.a.createElement("div",null," Slice: ",this.channelSliceIdx," "),i.a.createElement("div",null,"Channel Color"),i.a.createElement(Pi,{color:l.bind(this),onClick:l.bind(this)}),i.a.createElement("br",null),i.a.createElement("div",{className:"opacity-slider-container"},i.a.createElement(Oi,{label:"Opacity",width:"40%",min:"0.0",max:"1.0",step:"0.1",initial:"0",multiplier:"100",raw:"0",sliderValue:s.bind(this)}),i.a.createElement("button",{id:"resetOpcBtn",onClick:function(){e.resetOpacity()}},"Reset Channel Opacity")),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",{className:"brightness-slider-container"},i.a.createElement(Oi,{label:"Brightness",width:"40%",min:"0",max:"1",step:"0.1",initial:"0",multiplier:"100",raw:"0",sliderValue:t.bind(this)}),i.a.createElement("button",{id:"resetBrBtn",onClick:function(){e.resetBrightness()}},"Reset Brightness")),i.a.createElement("div",{className:"contrast-slider-container"},i.a.createElement(Oi,{label:"Contrast",width:"40%",min:"0",max:"10",step:"1",initial:"0",multiplier:"10",raw:"0",sliderValue:n.bind(this)}),i.a.createElement("button",{id:"resetCtBtn",onClick:function(){e.resetContrast()}},"Reset Contrast")),i.a.createElement("div",{className:"whitepoint-slider-container"},i.a.createElement(Oi,{label:"Whitepoint",width:"40%",min:"0",max:"255",step:"1",initial:"255",multiplier:"1",raw:"1",sliderValue:a.bind(this)}),i.a.createElement("button",{id:"resetWpBtn",onClick:function(){e.resetWhitepoint()}},"Reset Whitepoint")),i.a.createElement("div",{className:"blackpoint-slider-container"},i.a.createElement(Oi,{label:"Blackpoint",width:"40%",min:"0",max:"255",step:"1",initial:"0",multiplier:"1",raw:"1",sliderValue:r.bind(this)}),i.a.createElement("button",{id:"resetBpBtn",onClick:function(){e.resetBlackpoint()}},"Reset Blackpoint")),i.a.createElement("div",{style:za},o)))))}}]),n}(i.a.Component),Xi=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"annotations-channel",style:Ea},i.a.createElement(Ui.a,null,i.a.createElement(Ni.a,{sm:"4"},i.a.createElement(v.a,{style:Ca},i.a.createElement(m.a,{style:Ia},i.a.createElement(g.a,null," ",i.a.createElement("h5",null," Channel 1 ")," "),i.a.createElement(Gi,{ch:"1"})))),i.a.createElement(Ni.a,{sm:"4"},i.a.createElement(v.a,{style:Ca},i.a.createElement(m.a,{style:Ia},i.a.createElement(g.a,null," ",i.a.createElement("h5",null," Channel 2 ")," "),i.a.createElement(Gi,{ch:"2"})))),i.a.createElement(Ni.a,{sm:"4"},i.a.createElement(v.a,{style:Ca},i.a.createElement(m.a,{style:Ia},i.a.createElement(g.a,null," ",i.a.createElement("h5",null," Channel 3 ")," "),i.a.createElement(Gi,{ch:"3"}))))))}}]),n}(i.a.Component),Yi=n(343),qi=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"main",style:h},i.a.createElement(Yi.a,{fluid:!0,style:p},i.a.createElement(Ui.a,{style:{justifyContent:"space-between"}},i.a.createElement(Ni.a,{xs:"auto"},i.a.createElement(Vi,null)),i.a.createElement(Ni.a,{xs:"auto"},i.a.createElement("h3",{style:{color:"#fff",verticalAlign:"center",padding:"15px 7px"}},"BRMLIA")))),i.a.createElement(Yi.a,{style:d},i.a.createElement(Ui.a,{style:f},i.a.createElement(Ni.a,{xs:"4"},i.a.createElement(Ci,null),i.a.createElement(Mi,null)),i.a.createElement(Ni.a,{xs:"8"},i.a.createElement(Ai,null),i.a.createElement(Si,null),i.a.createElement(Xi,null)))),i.a.createElement(Fi,null))}}]),n}(i.a.Component);function Zi(){return i.a.createElement("div",null,i.a.createElement(qi,null))}var Hi=document.getElementById("root");s.a.render(i.a.createElement(Zi,null),Hi)}},[[136,1,2]]]);
//# sourceMappingURL=main.cb1ec645.chunk.js.map