{"version":3,"sources":["ui/assets/images/brom.jpeg","ui/style.js","mainSettings.js","fileuploader/fileStore.js","imagecanvas/ImageStore.js","utils/index.js","ui/components/zoom/zoomSettings.js","ui/components/zoom/zpp.js","ui/components/slider.js","ui/components/zoom/zoomControl.js","ui/components/zoom/zoom.js","viewer/index.js","imagecanvas/Mesh.js","imagecanvas/canvasStore.js","annotator/annotationStore.js","annotator/annotationControl.js","annotator/annotationMenuOptions.js","annotator/editControl.js","annotator/annotationSettings.js","annotator/annotationClass.js","annotator/annotationSubMenu.js","annotator/annotationMenu.js","fabric/fabricControl.js","ui/components/FabricLayer.js","imagecanvas/CanvasControl.js","imagecanvas/ImageCanvas.js","ui/components/mainViewer.js","ui/components/axesViewer.js","ui/components/annotatorViewer.js","ui/components/thumbnails.js","annotator/annotStore.js","annotator/importer.js","fileuploader/fileControl.js","fileuploader/index.js","annotator/exporter.js","ui/components/menus.js","annotator/index.js","ui/components/channel.js","ui/components/channelViewer.js","ui/index.js","index.js"],"names":["module","exports","mainStyle","overflowY","overflowX","height","width","position","rowStyle","flex","cardStyle","buttonGroup","size","vertical","padding","container","fluid","maxWidth","card","justify","alignContent","alignItems","textAlign","fontSize","cardBody","mainImg","mainCanvasStyle","zIndex","marginLeft","opacity","canvasStyle1","canvasStyle2","canvasStyle3","canvasThumbnail","thumb","display","borderRadius","border","marginBottom","marginRight","boxSizing","thumbInner","minWidth","overflow","initState","channels","selected","lastSelected","dev","create","set","settingsApi","prodState","file","devState","name","image","require","style","type","getState","fileApi","createTexture","THREE","load","createTextureFromTiff","uniforms","brightness","value","contrast","whitepoint","blackpoint","texture","update","state","uniApi","fApi","uApi","zoomState","views","zoomPct","zoomZppPct","reset","last","useZoomApi","zpp","limitToBounds","panningEnabled","transformEnabled","pinchEnabled","limitToWrapper","disabled","dbClickEnabled","lockAxisX","lockAxisY","velocityEqualToMove","enableWheel","enableTouchPadPinch","enableVelocity","limitsOnWheel","minScale","maxScale","step","updated","scale","x","y","Zpp","props","subscribe","length","className","defaultScale","defaultPositionX","defaultPositionY","positionX","positionY","options","pan","velocity","pinch","doubleClick","wheel","wheelEnabled","touchPadEnabled","zoomIn","zoomOut","resetTransform","setDefaultState","previousScale","updateXY","Fragment","imageWidth","src","alt","view","img","Number","toFixed","Slider","Component","constructor","super","initSlider","initial","min","max","handleSliderChange","e","persist","slider","this","target","setState","updateStatus","notifyValue","setSlider","sync","componentDidUpdate","status","sliderValue","displayValue","raw","Math","round","multiplier","render","label","id","onChange","updateZoom","idx","prevState","map","vw","j","parseInt","newView","newReset","Zoom","bind","onClick","Viewer","zoom","init","api","forceUpdate","zppZoom","withFileStore","Mesh","ref","useRef","material","console","log","channel","useMemo","useFrame","current","attach","args","fragmentShader","vertexShader","meshState","mesh","canvasState","canvas","canvasApi","annotations","cachedState","cachedAnnots","annotApi","cachedAnnotApi","addAnnotation","rect","classLabel","class","deleteAnnotation","index","annotation","splice","getLastAnnotIdx","updateAnnotationLabel","oldLabel","annot","newAnnot","updateAnnotClassLabel","editAnnotationLabel","obj","getSelectedObjects","_objects","object","ungroup","objs","i","text","getCanvas","renderAll","regroup","updateLabel","updateSelect","editAnnotationClass","updateClassLabel","menu","displayon","coords","items","setDisplay","objects","select","AnnotationMenuApi","sel","classes","addClass","annotClassApi","enabled","updateClasses","push","getAnnotationClasses","cls","isDuplicateClass","enableClass","newCls","filter","getClasses","colors","drawRect","fRect","fabric","Rect","left","top","fill","stroke","strokeLineJoin","strokeWidth","objectCaching","group","Group","newLabel","IText","originX","originY","fontFamily","fontWeight","textBackgroundColor","classText","perPixelTargetFind","add","setActiveObject","addWithUpdate","_restoreObjectsState","remove","item","hasControls","filterAnnotations","getObjects","class_element","markGroupVisible","markGroupInvisible","markVisible","visible","dirty","undo","o","redo","cachedAnnot","deleteCachedAnnotation","AnnotationSubMenu","React","handleChange","changeLabel","changeClassLabel","button","componentDidMount","labelTop","match","buttonLeft","event","newStr","AnnotationMenu","contextRef","createRef","returnMenu","on","updateCoords","updateItems","updateDisplay","arr","key","callback","modes","mouse","down","origin","drawMode","fabricApi","setMode","newMode","isDrawingMode","startSelecting","startDrawing","setOrigin","startDrawingRect","finish","finishDrawingRect","getActiveObjects","openMenu","setMenuCoords","FabricLayer","canvasRef","handleMouseDown","handleMouseUp","handleMouseDoubleClick","handleDrag","selectClass1","showAll","showAllClasses","Canvas","fireRightClick","setFabricCanvas","handleLeftMouseDown","clientX","clientY","handleRightMouseDown","handleLeftMouseUp","handleRightMouseUp","handleObjectSelect","handleObjectResize","displayMenu","annots","addToFabric","onContextMenu","preventDefault","isValidChannel","updateImage","blob","prevStateCh","imagepath","ch","newChannel","updateUniformImage","updateBrightness","updateUniformBrightness","updateContrast","updateUniformContrast","updateWhitepoint","updateUniformWhitepoint","updateBlackpoint","updateUniformBlackpoint","ImageCanvas","updateForFile","updateForControls","mainViewer","altView","Card","CardBody","CardTitle","canvasView","channelViews","view1","view2","view3","AxesViewer","AnnotatorViewer","futureClass","futureAnnotClass","annotClasses","enables","annotCls","num","updateAnnotClasses","includes","en","divs","Button","outline","color","active","Thumbnails","allThumbs","elements","setSelected","img_name","importCsv","reader","FileReader","onload","fileAsBinaryString","result","csv","noheader","output","fromString","then","csvRows","toJson","forEach","aCsvRow","builtObject","Object","keys","aKey","valueToAddInBuiltObject","keyToAddInBuiltObject","saveJson","onabort","onerror","readAsText","importJson","json","JSON","parse","importTiff","debug","preview","Image","newFile","toDataURL","updateTiff","catch","error","parseTiff","onloadend","onprogress","readAsArrayBuffer","isAnnotValid","f","concat","addJsonAnnot","addFile","addPng","addTiff","addCsv","addJson","initFile","initPng","initTiff","initCsv","initJson","FileUpload","useState","files","setFiles","useDropzone","accept","onDrop","acceptedFiles","assign","URL","createObjectURL","getRootProps","getInputProps","validFile","isValidFile","useEffect","revokeObjectURL","exportJson","element","document","createElement","Blob","stringify","href","download","body","appendChild","click","Menus","ButtonGroup","UncontrolledButtonDropdown","DropdownToggle","caret","DropdownMenu","DropdownItem","Annotator","file_size","Channel","updateSelection","updateLastSel","sliderValueBr","sliderValueCt","sliderValueWp","sliderValueBp","resetBrightness","resetContrast","resetWhitepoint","resetBlackpoint","UncontrolledCollapse","toggler","ChannelViewer","UI","Container","Row","Col","xs","Application","rootElement","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.4f90551e.chunk.js","sourcesContent":["module.exports = \"data:image/jpeg;base64,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\"","export const mainStyle = {\n  overflowY: 'scroll',\n  overflowX: 'scroll',\n  height: '100%',\n  width: '100%',\n  // height: '500px',\n  // width: '900px',\n  position: 'relative',\n};\nexport const containerStyle = {\n  width: '900px',\n  marginLeft: 0,\n};\nexport const rowStyle = {\n  flex: 1.0,\n  position: 'relative',\n};\nexport const cardStyle = {\n  flex: 0.1,\n  position: 'relative',\n};\n\nexport const buttonGroup = {\n  size: 'sm',\n  vertical: false,\n  flex: 1.0,\n  padding: 15,\n};\n\nexport const mainView = {\n  flex: 1,\n  flexDirection: 'column',\n  justifyContent: 'center',\n  maxWidth: '20%',\n};\n\nexport const innerView = {\n  flex: 0.8,\n  flexDirection: 'row',\n};\n\nexport const container = {\n  fluid: true,\n  maxWidth: '100%',\n};\n\nexport const row = {\n  noGutters: false,\n  form: false,\n  xs: '2',\n};\n\nexport const col = {\n  xs: '2',\n};\n\nexport const card = {\n  justify: 'center',\n  alignContent: 'center',\n  alignItems: 'center',\n  textAlign: 'center',\n  width: '100%',\n  fluid: true,\n  fontSize: '12px',\n};\n\nexport const cardBody = {\n  width: '85%',\n  height: '100%',\n};\n\nexport const mainImg = {\n  width: '100%',\n};\n\nexport const axesImg = {\n  width: '100%',\n};\n\nexport const mainCanvasStyle = {\n  position: 'absolute',\n  height: '300px',\n  width: '500px',\n  zIndex: '3',\n  marginLeft: '100px',\n  opacity: '0.5',\n};\n\nexport const canvasStyle1 = {\n  position: 'absolute',\n  height: '300px',\n  width: '300px',\n  zIndex: '3',\n  marginLeft: '100px',\n  opacity: '0.5',\n};\nexport const canvasStyle2 = {\n  position: 'absolute',\n  height: '300px',\n  width: '300px',\n  zIndex: '5',\n  marginLeft: '50px',\n  opacity: '0.5',\n};\nexport const canvasStyle3 = {\n  position: 'absolute',\n  height: '300px',\n  width: '300px',\n  zIndex: '7',\n  opacity: '0.5',\n};\n\nexport const canvasThumbnail = {\n  position: 'center',\n  height: '100px',\n  width: '88px',\n  zIndex: '3',\n};\n\nexport const thumbsContainer = {\n  display: 'flex',\n  flexDirection: 'row',\n  flexWrap: 'wrap',\n  marginTop: 16,\n};\n\nexport const thumb = {\n  display: 'inline-flex',\n  borderRadius: 2,\n  border: '1px solid #eaeaea',\n  marginBottom: 8,\n  marginRight: 8,\n  width: 50,\n  height: 50,\n  padding: 4,\n  boxSizing: 'border-box',\n};\n\nexport const thumbInner = {\n  display: 'flex',\n  minWidth: 0,\n  overflow: 'hidden',\n};\n","import create from 'zustand';\n\nexport const initState = {\n  channels: [\n    {\n      selected: false,\n    },\n    {\n      selected: false,\n    },\n    {\n      selected: false,\n    },\n  ],\n  lastSelected: 1,\n  dev: 0,\n};\n\nexport const [useMainSettings, settingsApi] = create(set => ({\n  ...initState,\n}));\n\nexport function updateChannelSel(channel) {\n  settingsApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.selected = !prevState.channels[j].selected;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nexport function updateLastSel(channel) {\n  settingsApi.setState(prevState => ({\n    ...prevState,\n    lastSelected: channel,\n  }));\n}\n","import create from 'zustand';\nimport { settingsApi } from '../mainSettings.js';\n\nexport const initState = () => {\n  return settingsApi.getState().dev ? devState : prodState;\n};\n\nexport const prodState = {\n  file: [],\n  size: 0,\n  selected: 0,\n};\n\nexport const devState = {\n  file: [\n    {\n      name: 'brom.jpeg',\n      image: require('./../ui/assets/images/brom.jpeg'),\n      style: {\n        display: 'block',\n        width: 'auto',\n        height: '100%',\n      },\n      type: 'image/png',\n    },\n  ],\n  size: 1,\n  selected: 0,\n};\n\nexport const [useFileStore, fileApi] = create(set => ({\n  ...initState(),\n}));\n","import create from 'zustand';\nimport * as THREE from 'three';\n\nexport const createTexture = image => {\n  return new THREE.TextureLoader().load(image);\n};\n\nexport const createTextureFromTiff = image => {\n  return new THREE.TextureLoader().load(image);\n};\n\nconst initState = {\n  channels: [\n    {\n      uniforms: {\n        brightness: {\n          value: '0.0',\n        },\n        contrast: {\n          value: '0.0',\n        },\n        whitepoint: {\n          value: '255.0',\n        },\n        blackpoint: {\n          value: '0.0',\n        },\n        image: {\n          value: '',\n        },\n      },\n      texture: null,\n      name: '',\n      type: '',\n    },\n    {\n      uniforms: {\n        brightness: {\n          value: '0.0',\n        },\n        contrast: {\n          value: '0.0',\n        },\n        whitepoint: {\n          value: '235.0',\n        },\n        blackpoint: {\n          value: '16.0',\n        },\n        image: {\n          value: '',\n        },\n      },\n      texture: null,\n      name: '',\n      type: '',\n    },\n    {\n      uniforms: {\n        brightness: {\n          value: '0.0',\n        },\n        contrast: {\n          value: '0.0',\n        },\n        whitepoint: {\n          value: '235.0',\n        },\n        blackpoint: {\n          value: '16.0',\n        },\n        image: {\n          value: '',\n        },\n      },\n      texture: null,\n      name: '',\n      type: '',\n    },\n    {\n      uniforms: {\n        brightness: {\n          value: '0.0',\n        },\n        contrast: {\n          value: '0.0',\n        },\n        whitepoint: {\n          value: '235.0',\n        },\n        blackpoint: {\n          value: '16.0',\n        },\n        image: {\n          value: '',\n        },\n      },\n      texture: null,\n      name: '',\n      type: '',\n    },\n  ],\n};\n\nexport const [useUniformStore, uniApi] = create(set => ({\n  ...initState,\n  update: (brightness, contrast, whitepoint, blackpoint, image) =>\n    set(state => ({\n      ...state,\n      uniforms: {\n        ...state.uniforms,\n        brightness: {\n          ...state.uniforms.brightness,\n          value: brightness,\n        },\n        contrast: {\n          ...state.uniforms.contrast,\n          value: contrast,\n        },\n        whitepoint: {\n          ...state.uniforms.whitepoint,\n          value: whitepoint,\n        },\n        blackpoint: {\n          ...state.uniforms.blackpoint,\n          value: blackpoint,\n        },\n        image: {\n          ...state.uniforms.image,\n        },\n      },\n      texture: image,\n      brightness: brightness,\n    })),\n}));\n","import React from 'react';\n\nimport { fileApi } from '../fileuploader/fileStore.js';\nimport { uniApi } from '../imagecanvas/ImageStore.js';\n\nexport const fApi = fileApi;\nexport const uApi = uniApi;\n\nexport const withFileStore = (Component: any) => {\n  return (props: any) => {\n    return <Component api={fApi} {...props} />;\n  };\n};\n\nexport const withUniformStore = (Component: any) => {\n  return (props: any) => {\n    return <Component api={uApi} {...props} />;\n  };\n};\n\nexport const withStore = (Component: any) => {\n  return (props: any) => {\n    return <Component uApi={uApi} fApi={fApi} {...props} />;\n  };\n};\n","import create from 'zustand';\n\nexport const zoomState = {\n  views: [\n    {\n      name: 'main',\n      zoomPct: '1',\n      zoomZppPct: '1',\n      reset: '0',\n    },\n    {\n      name: 'xy',\n      zoomPct: '1',\n      zoomZppPct: '1',\n      reset: '0',\n    },\n    {\n      name: 'yz',\n      zoomPct: '1',\n      zoomZppPct: '1',\n      reset: '0',\n    },\n    {\n      name: 'xz',\n      zoomPct: '1',\n      zoomZppPct: '1',\n      reset: '0',\n    },\n  ],\n  last: '0',\n};\n\nexport const [useZoomStore, useZoomApi] = create(set => ({\n  ...zoomState,\n}));\n","import React from 'react';\n\nimport { TransformWrapper, TransformComponent } from 'react-zoom-pan-pinch';\nimport { useZoomApi } from './zoomSettings.js';\n// import { updateZppZoom } from \"./zoomControl.js\";\n\nvar state = {\n  zpp: {\n    type: true,\n    limitToBounds: true,\n    panningEnabled: true,\n    transformEnabled: true,\n    pinchEnabled: false,\n    limitToWrapper: false,\n    disabled: false,\n    dbClickEnabled: true,\n    lockAxisX: false,\n    lockAxisY: false,\n    velocityEqualToMove: true,\n    enableWheel: true,\n    enableTouchPadPinch: false,\n    enableVelocity: true,\n    limitsOnWheel: false,\n    minScale: 0.5,\n    maxScale: 8,\n    step: 10,\n    updated: false,\n    scale: 1,\n    x: 0,\n    y: 0,\n  },\n  zoomPct: 100,\n};\n\nfunction updateZoomValue(value, idx) {\n  if (state.zoomPct !== value) {\n    state.zoomPct = value;\n    // updateZppZoom(value, idx)\n  }\n}\n\nfunction updateZppZoomValue(value, idx) {\n  if (state.zoomPct !== value) {\n    state.zoomPct = value;\n  }\n}\n\nfunction updateXY(x, y) {\n  if (state.zpp.x !== x) {\n    state.zpp.x = x;\n  }\n  if (state.zpp.y !== y) {\n    state.zpp.y = y;\n  }\n}\n\nfunction reset() {\n  state.zpp.x = 0;\n  state.zpp.y = 0;\n}\n\nfunction view(image, imageWidth) {\n  if (image !== '') {\n    return <img src={image} alt=\"viewer\" width={imageWidth} />;\n  }\n}\n\nfunction Zpp(props) {\n  const {\n    limitToBounds,\n    panningEnabled,\n    transformEnabled,\n    pinchEnabled,\n    limitToWrapper,\n    disabled,\n    dbClickEnabled,\n    lockAxisX,\n    lockAxisY,\n    velocityEqualToMove,\n    enableWheel,\n    enableTouchPadPinch,\n    enableVelocity,\n    limitsOnWheel,\n    minScale,\n    maxScale,\n    step,\n    x,\n    y,\n  } = state.zpp;\n\n  useZoomApi.subscribe(state => {\n    if (\n      state &&\n      state.views &&\n      props.type >= 0 &&\n      props.type < state.views.length\n    ) {\n      updateZppZoomValue(state.views[props.type].zoomPct, props.type);\n    }\n\n    if (state.views[props.type].reset) reset();\n  });\n\n  return (\n    <div className=\"transform-wrapper\">\n      <TransformWrapper\n        defaultScale={1}\n        defaultPositionX={0}\n        defaultPositionY={0}\n        positionX={x}\n        positionY={y}\n        scale={state.zoomPct / 100}\n        options={{\n          limitToBounds,\n          transformEnabled,\n          disabled,\n          limitToWrapper,\n          minScale,\n          maxScale,\n        }}\n        pan={{\n          disabled: !panningEnabled,\n          lockAxisX,\n          lockAxisY,\n          velocityEqualToMove,\n          velocity: enableVelocity,\n        }}\n        pinch={{ disabled: !pinchEnabled }}\n        doubleClick={{ disabled: !dbClickEnabled }}\n        wheel={{\n          wheelEnabled: enableWheel,\n          touchPadEnabled: enableTouchPadPinch,\n          limitsOnWheel,\n          step: step,\n        }}\n      >\n        {({\n          zoomIn,\n          zoomOut,\n          resetTransform,\n          setDefaultState,\n          positionX,\n          positionY,\n          scale,\n          previousScale,\n          options: { limitToBounds, transformEnabled, disabled },\n          ...rest\n        }) => (\n          <div>\n            {updateZoomValue(scale * 100, props.type)}\n            {updateXY(positionX, positionY)}\n            <React.Fragment>\n              <TransformComponent>\n                {view(props.img, props.imageWidth)}\n              </TransformComponent>\n              <span className=\"badge badge-primary\">\n                x : {Number(positionX).toFixed(0)}px\n              </span>\n              <span className=\"badge badge-primary\">\n                y : {Number(positionY).toFixed(0)}px\n              </span>\n              <span className=\"badge badge-primary\">\n                Scale : {Number(scale * 100).toFixed(0)}%\n              </span>\n            </React.Fragment>\n          </div>\n        )}\n      </TransformWrapper>\n    </div>\n  );\n}\n\nexport default Zpp;\n","import React, { Component } from 'react';\nimport './../styles.css';\nimport { useZoomApi } from './zoom/zoomSettings.js';\n\nclass Slider extends Component {\n  initSlider = {\n    initial: 0,\n    min: 0,\n    max: 0,\n    step: 0,\n    value: 0,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      updated: false,\n      slider: this.initSlider,\n      setSlider: null,\n      sync: true,\n    };\n  }\n\n  componentDidUpdate() {\n    if (this.state.updated) {\n      return true;\n    }\n    return false;\n  }\n\n  updateStatus(status) {\n    let updated = true;\n    this.setState({ updated: updated });\n  }\n\n  notifyValue() {\n    var sliderValue = this.props.sliderValue;\n    const type = this.props.type;\n    sliderValue(this.state.slider.value, type);\n  }\n\n  displayValue() {\n    if (this.props.raw === '1') {\n      return (\n        <span>\n          {' '}\n          {Math.round(this.state.slider.value * this.props.multiplier)}\n        </span>\n      );\n    } else {\n      return (\n        <span>\n          {' '}\n          {Math.round(this.state.slider.value * this.props.multiplier)}%\n        </span>\n      );\n    }\n  }\n\n  handleSliderChange = e => {\n    e.persist();\n\n    let slider = this.state.slider;\n    slider.value = e.target.value;\n    this.setState({ slider: slider });\n\n    this.updateStatus(true);\n    this.notifyValue();\n  };\n\n  render() {\n    useZoomApi.subscribe(state => {\n      if (this.props.type >= 0 && this.props.type < state.views.length) {\n        let slider = this.state.slider;\n        slider.value = state.views[this.props.type].zoomPct;\n        this.setState({ slider: slider });\n      }\n    });\n\n    const slider = this.state.slider;\n    const { label, min, max, initial, step } = this.props;\n\n    return (\n      <div className=\"slider-settings\">\n        <span>{label}</span> <br></br>\n        <span>{min} </span>\n        <input\n          type=\"range\"\n          className=\"slider\"\n          value={slider.value || initial}\n          id=\"customRange1\"\n          initial={initial}\n          min={min}\n          max={max}\n          step={step}\n          onChange={e => this.handleSliderChange(e)}\n        />\n        <span> {max}</span>\n        <span> {this.displayValue()}</span>\n      </div>\n    );\n  }\n}\n\nexport default Slider;\n","import { useZoomApi } from './zoomSettings.js';\n\nexport function updateZoom(value, idx, reset) {\n  const currZoom = useZoomApi.getState().views[idx].zoomPct;\n\n  if (currZoom !== value || reset) {\n    useZoomApi.setState(prevState => {\n      const views = prevState.views.map((vw, j) => {\n        if (j === parseInt(idx)) {\n          var newView = vw;\n          var newReset = 0;\n          if (reset) {\n            newReset = 1;\n          }\n          newView.zoomPct = value;\n          newView.reset = newReset;\n          return newView;\n        } else {\n          return vw;\n        }\n      });\n      return {\n        views,\n      };\n    });\n\n    useZoomApi.setState(prevState => ({\n      ...prevState,\n      last: idx,\n    }));\n  }\n}\n\nexport function updateZppZoom(value, idx) {\n  const currZoom = useZoomApi.getState().views[idx].zoomZppPct;\n\n  if (currZoom !== value) {\n    useZoomApi.setState(prevState => {\n      const views = prevState.views.map((vw, j) => {\n        if (j === parseInt(idx)) {\n          var newView = vw;\n          newView.zoomZppPct = value;\n          return newView;\n        } else {\n          return vw;\n        }\n      });\n      return {\n        views,\n      };\n    });\n  }\n}\n","import React from 'react';\n\nimport Slider from '../slider.js';\n\nimport { useZoomApi } from './zoomSettings.js';\nimport { updateZoom } from './zoomControl.js';\n\nvar state = {\n  zoomPct: 100,\n};\n\nfunction resetZoom(idx) {\n  updateZoom('100', idx, true);\n}\n\nfunction updateZoomView(idx, value) {\n  if (state.zoomPct !== value) {\n    // updateZoom(value, idx);\n  }\n}\n\nfunction Zoom(props) {\n  useZoomApi.subscribe(state => {\n    if (\n      state &&\n      state.views &&\n      props.type >= 0 &&\n      props.type < state.views.length\n    ) {\n      updateZoomView(props.type, state.views[props.type].zoomZppPct);\n    }\n  });\n\n  return (\n    <div className=\"viewer-wrapper\">\n      <Slider\n        label=\"Zoom\"\n        width=\"40%\"\n        min=\"50\"\n        max=\"800\"\n        step=\"10\"\n        initial={state.zoomPct}\n        multiplier=\"1\"\n        sliderValue={updateZoom.bind(this)}\n        type={props.type}\n      />\n      <button\n        id=\"resetZoomBtn\"\n        onClick={() => {\n          resetZoom(props.type);\n        }}\n      >\n        Reset Zoom\n      </button>\n    </div>\n  );\n}\n\nexport default Zoom;\n","import React, { Component } from 'react';\nimport { withFileStore } from '../utils/index.js';\nimport '../styles.css';\n\nimport Zpp from '../ui/components/zoom/zpp.js';\nimport Zoom from '../ui/components/zoom/zoom.js';\nimport { useZoomApi } from '../ui/components/zoom/zoomSettings.js';\n\nclass Viewer extends Component {\n  state = {\n    image: '',\n    zoom: 0,\n  };\n\n  init() {\n    if (this.state.image === '') {\n      if (this.props.api.getState().file.length > 0) {\n        this.setState({\n          image: this.props.api.getState().file[\n            this.props.api.getState().selected\n          ].image,\n        });\n      }\n    }\n  }\n\n  render() {\n    this.init();\n    this.props.api.subscribe(state => {\n      if (state) {\n        const img = state.file[state.selected].image;\n        if (img) {\n          this.setState({\n            image: img,\n          });\n          this.forceUpdate();\n        }\n      }\n    });\n    useZoomApi.subscribe(state => {\n      const zoom = state.views[this.props.type].zoomPct;\n      const zppZoom = state.views[this.props.type].zoomZppPct;\n\n      if (\n        (this.state.zoom !== zoom || this.state.zoom !== zppZoom) &&\n        this.props.type === state.last\n      ) {\n        this.setState(prevState => ({\n          zoom: zoom,\n        }));\n      }\n    });\n\n    return (\n      <div className=\"viewer-wrapper\">\n        <Zpp\n          type={this.props.type}\n          img={this.state.image}\n          imageWidth={this.props.imageWidth}\n        />\n        <Zoom type={this.props.type} />\n      </div>\n    );\n  }\n}\n\nexport default withFileStore(Viewer);\n","import React, { useRef, useMemo } from 'react';\nimport { uApi } from '../utils/index.js';\nimport { useFrame } from 'react-three-fiber';\n\nconst fragmentShader = `\n  uniform sampler2D image;\n\n  uniform float brightness;\n  uniform float contrast;\n\n  uniform float blackpoint;\n  uniform float whitepoint;\n\n  varying vec2 vUv;\n\n  void main() {\n    gl_FragColor = texture2D(image, vUv);\n    gl_FragColor.rgb += brightness;\n\n    if (contrast > 0.0) {\n      gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - contrast) + 0.5;\n    } else {\n      gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + contrast) + 0.5;\n    }\n\n    float black_point = blackpoint / 255.0;\n    float white_point = blackpoint == whitepoint ? (255.0 / 0.00025) : (255.0 / (whitepoint - blackpoint));\n\n    gl_FragColor.rgb = gl_FragColor.rgb * white_point - (white_point * black_point);\n  }\n`;\n\nconst vertexShader = `\n  varying vec2 vUv;\n\n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }\n`;\n\nfunction Mesh(props) {\n  const ref = useRef();\n  const material = useRef();\n  console.log(\"chanel: \", props.channel)\n  var uniforms = useMemo(\n    () => uApi.getState().channels[props.channel - 1].uniforms,\n    [props]\n  );\n\n  useFrame(state => {\n    material.current.uniforms.brightness.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.brightness.value;\n    material.current.uniforms.contrast.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.contrast.value;\n    material.current.uniforms.whitepoint.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.whitepoint.value;\n    material.current.uniforms.blackpoint.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.blackpoint.value;\n    material.current.uniforms.image.value = uApi.getState().channels[\n      props.channel - 1\n    ].uniforms.image.value;\n  });\n\n  return (\n    <mesh ref={ref} scale={[1.0, 1.0, 1.0]}>\n      <planeBufferGeometry attach=\"geometry\" args={[5.0, 5.0]} />\n      <shaderMaterial\n        attach=\"material\"\n        ref={material}\n        fragmentShader={fragmentShader}\n        vertexShader={vertexShader}\n        uniforms={uniforms}\n      />\n    </mesh>\n  );\n}\n\nexport default Mesh;\n","import React from 'react';\nimport create from 'zustand';\nimport Mesh from './Mesh.js';\nimport { Canvas } from 'react-three-fiber';\n\nexport const meshState = {\n  mesh: [<Mesh channel=\"1\" />, <Mesh channel=\"2\" />, <Mesh channel=\"3\" />, <Mesh channel=\"4\" />],\n};\n\nexport const [useMeshStore, meshApi] = create(set => ({\n  ...meshState,\n}));\n\nexport const canvasState = {\n  canvas: [\n    <Canvas className={'image-canvas-1'}>{meshState.mesh[0]}</Canvas>,\n    <Canvas className={'image-canvas-2'}>{meshState.mesh[1]}</Canvas>,\n    <Canvas className={'image-canvas-3'}>{meshState.mesh[2]}</Canvas>,\n    <Canvas className={'main-image-canvas'}>{meshState.mesh[3]}</Canvas>,\n  ],\n};\n\nexport const [useCanvasStore, canvasApi] = create(set => ({\n  ...canvasState,\n}));\n","import create from 'zustand';\n\nconst initState = {\n  annotations: [],\n};\n\nconst cachedState = {\n  cachedAnnots: [],\n};\n\nexport const [useAnnotStore, annotApi] = create(set => ({\n  ...initState,\n}));\n\nexport const [useCacheStore, cachedAnnotApi] = create(set => ({\n  ...cachedState,\n}));\n","import { annotApi, cachedAnnotApi } from './annotationStore.js';\n\nexport function addAnnotation(rect, label, classLabel) {\n  const default_class = 'class1'\n  annotApi.setState(prevState => ({\n    ...prevState,\n    annotations: [\n      ...prevState.annotations,\n      {\n        rect: rect,\n        label: label,\n        class: classLabel || default_class\n      },\n    ],\n  }));\n}\n\nexport function addCachedAnnotation(rect, label, classLabel) {\n  cachedAnnotApi.setState(prevState => ({\n    ...prevState,\n    cachedAnnots: [\n      ...prevState.cachedAnnots,\n      {\n        rect: rect,\n        label: label,\n        class: classLabel\n      },\n    ],\n  }));\n}\n\nexport function deleteAnnotation(index) {\n  const annotation = annotApi.getState().annotations[index];\n\n  addCachedAnnotation(annotation.rect, annotation.label, annotation.class);\n  annotApi.setState(prevState => {\n    return prevState.annotations.splice(index, 1);\n  });\n}\n\nexport function deleteCachedAnnotation(index) {\n  const cachedAnnot = cachedAnnotApi.getState().cachedAnnots[index];\n\n  addAnnotation(cachedAnnot.rect, cachedAnnot.label);\n  cachedAnnotApi.setState(prevState => {\n    return prevState.cachedAnnots.splice(index, 1);\n  });\n}\n\nexport function undoAnnotation() {\n  deleteAnnotation(annotApi.getState().annotations.length - 1);\n}\n\nexport function getLastAnnotIdx() {\n  return annotApi.getState().annotations.length - 1;\n}\n\nexport function getLastCachedAnnot() {\n  return cachedAnnotApi.getState().cachedAnnots[\n    cachedAnnotApi.getState().cachedAnnots.length - 1\n  ];\n}\n\nexport function getLastCachedAnnotIdx() {\n  return cachedAnnotApi.getState().cachedAnnots.length - 1;\n}\n\nexport function updateAnnotationLabel(oldLabel, label) {\n  annotApi.setState( prevState => {\n    const annotations = prevState.annotations.map((annot, j) => {\n      if (annot.label === oldLabel) {\n        var newAnnot = annot;\n        newAnnot.label = label\n        return newAnnot;\n      }\n      else {\n        return annot\n      }\n    })\n    return {\n      annotations\n    }\n  })\n}\n\nexport function updateAnnotClassLabel(oldLabel, label) {\n  annotApi.setState( prevState => {\n    const annotations = prevState.annotations.map((annot, j) => {\n      if (annot.class === oldLabel) {\n        var newAnnot = annot;\n        newAnnot.class = label\n        return newAnnot;\n      }\n      else {\n        return annot\n      }\n    })\n    return {\n      annotations\n    }\n  })\n}\n\nexport function getAnnotationClasses() {\n  var classes = []\n  const annotations = annotApi.getState().annotations\n  for (var i = 0; i < annotations.length; i++) {\n    classes.push(annotations[i].class)\n  }\n  return classes\n}\n","import {setDisplay, getSelectedObjects, updateSelect} from \"./annotationSettings.js\"\nimport {updateLabel, updateClassLabel} from './editControl.js'\n\nexport function editAnnotationOption(label, classLabel) {\n  setDisplay(false);\n  updateSelect(1);\n}\nexport function editClassOption() {\n  setDisplay(false);\n  updateSelect(2);\n}\n\nexport function editAnnotationLabel(label) {\n\n  const obj = getSelectedObjects()\n  if (obj && (obj._objects.length > 0)) {\n    updateLabel(obj, label)\n    updateSelect(0);\n  }\n}\n\nexport function editAnnotationClass(className) {\n  const obj = getSelectedObjects()\n  if (obj && (obj._objects.length > 0)) {\n    updateClassLabel(obj, className)\n    updateSelect(0);\n  }\n}\n","import { fabric } from 'fabric';\nimport {\n  addAnnotation,\n  undoAnnotation,\n  getLastAnnotIdx,\n  getLastCachedAnnot,\n  getLastCachedAnnotIdx,\n  deleteCachedAnnotation,\n  updateAnnotationLabel,\n  updateAnnotClassLabel,\n} from './annotationControl.js';\nimport { getCanvas } from './annotationSettings.js'\nimport { getDisabledClasses } from './annotationClass.js'\n\nconst colors = {red: '#dd9999', green: '#99dd99', purple: '#9999dd'};\n\nexport function drawSampleRect(canvas) {\n  const rect = {\n    left: 100,\n    top: 50,\n    width: 200,\n    height: 100,\n  };\n  const label = 'label' + (getLastAnnotIdx() + 1);\n  const classLabel = \"class1\";\n  drawRect(canvas, rect, label, classLabel);\n  addAnnotation(rect, label);\n}\n\nexport function drawFreeStyle(canvas) {\n  window.canvas = canvas;\n  canvas.isMouseDown = false;\n\n  canvas.isDrawingMode = true;\n  canvas.freeDrawingBrush.color = '#000';\n  canvas.freeDrawingBrush.width = 4;\n}\n\nexport function drawRect(canvas, rect, label, classLabel) {\n  var fRect = new fabric.Rect({\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n    fill: 'transparent',\n    stroke: colors.green,\n    strokeLineJoin: 'round',\n    strokeWidth: 4,\n    objectCaching: false,\n  });\n\n  var group = new fabric.Group([fRect]);\n\n  var newLabel = (label === 'label') ? label += getLastAnnotIdx() + 1 : label\n\n  var text = new fabric.IText(newLabel, {\n    fontSize: 30,\n    originX: 'left',\n    originY: 'top',\n    fontFamily: 'Arial',\n    fontWeight: 'bold',\n    fill: 'white',\n    textBackgroundColor: colors.green,\n    top: group.top + group.height - fRect.strokeWidth,\n    left: group.left,\n  });\n\n  var classText = new fabric.IText(classLabel, {\n    fontSize: 30,\n    originX: 'left',\n    originY: 'bottom',\n    fontFamily: 'Arial',\n    fontWeight: 'bold',\n    fill: 'white',\n    textBackgroundColor: colors.green,\n    top: group.top + group.height - fRect.strokeWidth,\n    left: group.left,\n  });\n\n  if (canvas) {\n    fRect.perPixelTargetFind = true;\n    canvas.add(group);\n    canvas.setActiveObject(group);\n    group.addWithUpdate(text);\n    group.addWithUpdate(classText);\n  }\n\n  addAnnotation(fRect, newLabel, classLabel);\n}\n\n\nexport function updateRect(rect) {\n  // update with new position\n}\n\nexport function updateLabel(object, label) {\n\n  var oldLabel = \"\"\n  if (object && label) {\n    ungroup(object)\n\n    if (object) {\n      var objs = object._objects\n      if (objs && (objs.length > 0)) {\n        for (var i = 0; objs.length; i++) {\n          if ( objs[i] ) {\n            if (i === 1) {\n              if (objs[i].text) {\n                oldLabel = objs[i].text\n                objs[i].text = label\n                updateAnnotationLabel(oldLabel, label)\n                getCanvas().renderAll();\n                regroup(object)\n                return\n              }\n            }\n          }\n          else {\n            return\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function updateClassLabel(object, label) {\n\n  var oldLabel = \"\"\n  if (object && label) {\n    ungroup(object)\n\n    if (object) {\n      var objs = object._objects\n      if (objs && (objs.length > 0)) {\n        for (var i = 0; objs.length; i++) {\n          if ( objs[i] ) {\n            if (i === 2) {\n              if (objs[i].text) {\n                oldLabel = objs[i].text\n                objs[i].text = label\n                updateAnnotClassLabel(oldLabel, label)\n                getCanvas().renderAll();\n                regroup(object)\n                return\n              }\n            }\n          }\n          else {\n            return\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function ungroup(object) {\n  var canvas = getCanvas();\n  var items = object._objects;\n  if (items.length >= 2) {\n    object._restoreObjectsState();\n    canvas.remove(object)\n    for (var i = 0; i < items.length; i++) {\n      canvas.add(items[i]);\n      canvas.item(canvas.size()-1).hasControls=true;\n    }\n    canvas.renderAll();\n  }\n}\n\nexport function regroup(object) {\n  if (object && (object._objects.length === 3)) {\n    var objs = object._objects\n\n    var rect = objs[0]\n    var label = objs[1]\n    var classLabel = objs[2]\n\n    var group = new fabric.Group([rect, label, classLabel])\n    var canvas = getCanvas()\n    if (canvas) {\n      canvas.add(group)\n      canvas.remove(rect)\n      canvas.remove(label)\n      canvas.remove(classLabel)\n      canvas.setActiveObject(group)\n    }\n  }\n}\n\nexport function filterClasses(cls) {\n  filterAnnotations(cls.name, cls.enabled)\n}\n\nexport function filterAnnotations(classLabel, enabled) {\n  var canvas = getCanvas();\n  var objs = canvas.getObjects();\n  for (var i = 0; i < objs.length; i++) {\n    var group = objs[i]\n    if (group) {\n      var group_elements = group._objects\n      if (group_elements) {\n        var class_element = group._objects[2]\n        if (class_element && class_element.text) {\n          if (class_element.text === classLabel) {\n            if (enabled) {\n              markGroupVisible(group)\n            }\n            else {\n              markGroupInvisible(group)\n            }\n          }\n        }\n      }\n    }\n  }\n  canvas.renderAll();\n}\n\nexport function filterDisabledClasses() {\n  const classes = getDisabledClasses();\n  for (var i = 0; i < classes.length; i++) {\n    filterAnnotations(classes[i])\n  }\n  getCanvas().renderAll();\n}\n\nexport function showAll() {\n  var canvas = getCanvas();\n  var objs = canvas.getObjects();\n  for (var i = 0; i < objs.length; i++) {\n    var group = objs[i]\n    if (group) {\n      markGroupVisible(group)\n    }\n  }\n}\n\nexport function markGroupVisible(group) {\n  ungroup(group)\n\n  var objs = group._objects;\n  for (var i = 0; i < objs.length; i++) {\n    var obj = objs[i];\n    markVisible(obj, true)\n  }\n\n  regroup(group)\n}\n\nexport function markGroupInvisible(group) {\n  ungroup(group)\n\n  var objs = group._objects;\n  for (var i = 0; i < objs.length; i++) {\n    var obj = objs[i];\n    markVisible(obj, false)\n  }\n\n  regroup(group)\n}\n\nfunction markVisible(obj, visible) {\n  obj.visible = visible\n  obj.dirty = true\n  getCanvas().renderAll();\n}\n\nexport function undo() {\n  const idx = getLastAnnotIdx();\n  var canvas = getCanvas();\n\n  if (idx >= 0) {\n    // remove from canvas\n    canvas.getObjects().map(function(o, i) {\n      if (i === idx) {\n        canvas.remove(o);\n      }\n      return null\n    })\n\n    // remove from annotations\n    undoAnnotation();\n  }\n  return null\n}\n\nexport function redo() {\n  var canvas = getCanvas();\n  const idx = getLastCachedAnnotIdx();\n  if ( idx >= 0 ) {\n    // get last from cache\n    const cachedAnnot = getLastCachedAnnot();\n    // redraw on canvas\n    drawRect(canvas, cachedAnnot.rect, cachedAnnot.label, cachedAnnot.class);\n    // remove from cache\n    deleteCachedAnnotation(idx);\n  }\n}\n","import create from 'zustand';\nimport {editAnnotationOption, editClassOption} from './annotationMenuOptions.js'\n\nexport const initState = {\n  menu: {\n    displayon: false,\n    coords: {\n      x: 0,\n      y: 0\n    },\n    items: [\n      {\n        \"label\": \"Edit Annotation\",\n        \"callback\": editAnnotationOption\n      },\n      {\n        \"label\": \"Edit Class\",\n        \"callback\": editClassOption\n      }\n    ],\n    objects: [],\n    select: 0,\n    canvas: null\n  }\n}\n\nexport const [useAnnotationMenu, AnnotationMenuApi] = create ( set => ({\n  ...initState,\n}))\n\nexport function isDisplayOn() {\n  return AnnotationMenuApi.getState().menu.displayon\n}\n\nexport function setCanvas(canvas) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    canvas: canvas\n  }))\n}\n\nexport function getCanvas() {\n  return AnnotationMenuApi.getState().canvas\n}\n\nexport function setDisplay(value) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    menu: {\n      ...prevState.menu,\n      displayon: value\n    }\n  }))\n}\n\nexport function getMenuCoords() {\n  return AnnotationMenuApi.getState().menu.coords\n}\n\nexport function setMenuCoords(x, y) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    menu: {\n      ...prevState.menu,\n      coords: {\n        x: x,\n        y: y\n      }\n    }\n  }))\n}\n\nexport function getItems() {\n  return AnnotationMenuApi.getState().menu.items\n}\n\nexport function setSelectedObjects(objects) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    menu: {\n      ...prevState.menu,\n      objects: objects\n    }\n  }))\n}\n\nexport function getSelectedObjects() {\n  return AnnotationMenuApi.getState().menu.objects\n}\n\nexport function updateSelect(sel) {\n  AnnotationMenuApi.setState( prevState => ({\n    ...prevState,\n    menu: {\n      ...prevState.menu,\n      select: sel\n    }\n  }))\n}\n","import create from 'zustand';\n\nimport { getAnnotationClasses } from './annotationControl.js';\n\nconst initState = {\n  classes: [\n    {\n      \"name\": \"Annotation Class 1\",\n      \"enabled\": false,\n    },\n    {\n      \"name\": \"Annotation Class 2\",\n      \"enabled\": false,\n    },\n    {\n      \"name\": \"Annotation Class 3\",\n      \"enabled\": false,\n    },\n    {\n      \"name\": \"Annotation Class 4\",\n      \"enabled\": false,\n    },\n  ]\n}\n\nfunction addClass(classLabel) {\n  const default_class = 'class1'\n  annotClassApi.setState(prevState => ({\n    ...prevState,\n    classes: [\n      ...prevState.classes,\n      {\n        name: classLabel || default_class,\n        enabled: false\n      },\n    ],\n  }));\n}\n\nexport const [useAnnotClass, annotClassApi] = create ( set => ({\n  ...initState,\n}))\n\nexport function updateClasses() {\n  const classes = getAnnotationClasses()\n  for (var i = 0; i < classes.length;  i++) {\n    const cls = classes[i]\n    if (!isDuplicateClass(cls)) {\n      addClass(cls)\n      enableClass(cls)\n    }\n  }\n}\n\nexport function enableClass(label) {\n  annotClassApi.setState( prevState => {\n    const classes = prevState.classes.map((cls, j) => {\n      if (cls.name === label) {\n        var newCls = cls;\n        newCls.enabled = true\n        return newCls;\n      }\n      else {\n        return cls\n      }\n    })\n    return {\n      classes\n    }\n  })\n}\n\nexport function toggleClassEnable(num) {\n  annotClassApi.setState( prevState => {\n    const classes = prevState.classes.map((cls, j) => {\n      if (j === num) {\n        var newCls = cls;\n        newCls.enabled = !cls.enabled\n        return newCls;\n      }\n      else {\n        return cls\n      }\n    })\n    return {\n      classes\n    }\n  })\n}\n\nexport function isDuplicateClass(name) {\n  const classes = annotClassApi.getState().classes\n  if (classes) {\n    const x = classes.filter(cls => cls.name === name);\n    if (x.length !== 0){\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function getClasses() {\n  return annotClassApi.getState().classes\n}\n\nexport function getDisabledClasses() {\n  var enabledClasses = []\n  const classes = annotClassApi.getState().classes\n  if (classes) {\n    for (var i = 0; i < classes.length; i++) {\n      const cls = classes[i]\n      if (!cls.enabled) {\n        enabledClasses.push(cls.name)\n      }\n    }\n  }\n  return enabledClasses\n}\n","import React from \"react\";\nimport {editAnnotationLabel, editAnnotationClass} from './annotationMenuOptions.js'\n\nclass AnnotationSubMenu extends React.Component {\n constructor(props) {\n   super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.changeLabel = this.changeLabel.bind(this);\n    this.changeClassLabel = this.changeClassLabel.bind(this);\n\n    this.state = {\n      text: {\n        style: {\n         'position': 'absolute',\n         'top': '0px',\n         'left':'0px'\n        },\n      },\n      label: {\n        text: \"\",\n        style: {\n         'position': 'absolute',\n         'top': '0px',\n         'left':'0px'\n        },\n      },\n      button: {\n        style: {\n         'position': 'absolute',\n         'top': '0px',\n         'left':'0px'\n        },\n      },\n    };\n  }\n\n  componentDidMount() {\n    var labelTop = (parseInt(this.props.style.top.match(/\\d+/g)) - 40) +'px'\n    var buttonLeft = (parseInt(this.props.style.left.match(/\\d+/g)) + 105) +'px'\n\n    this.setState({\n      text: {\n        style: {\n           'position': this.props.style.position,\n           'top': this.props.style.top,\n           'left': this.props.style.left,\n           'width': '100px'\n        }\n      },\n      label: {\n        style: {\n           'position': this.props.style.position,\n           'top': labelTop,\n           'left': this.props.style.left,\n           'width': '100px'\n        },\n        text: ''\n      },\n      button: {\n        style: {\n           'position': this.props.style.position,\n           'top': this.props.style.top,\n           'left': buttonLeft\n        }\n      }\n    })\n  }\n\n  handleChange(event) {\n    if (event && event.target && event.target.value) {\n      var newStr = event.target.value\n      this.setState( prevState => ({\n        ...prevState,\n        label: {\n          ...prevState.label,\n          text: newStr\n        }\n      }))\n    }\n  }\n\n  changeLabel(event) {\n    editAnnotationLabel(this.state.label.text)\n  }\n\n  changeClassLabel(event) {\n    editAnnotationClass(this.state.label.text)\n  }\n\n  display() {\n    if (this.props.select === 1) {\n      return (\n        <div >\n          <div style={this.state.label.style}> <p> Label: </p> </div>\n          <input\n            type=\"text\"\n            value={this.state.label.text}\n            style={this.state.text.style}\n            onChange={this.handleChange}\n          />\n          <button style={this.state.button.style} onClick={this.changeLabel}> Change Label </button>\n        </div>\n      );\n    }\n    else if (this.props.select === 2) {\n      return (\n        <div >\n          <div style={this.state.label.style}> <p> Class Name: </p> </div>\n          <input\n            type=\"text\"\n            value={this.state.label.text}\n            style={this.state.text.style}\n            onChange={this.handleChange}\n          />\n          <button style={this.state.button.style} onClick={this.changeClassLabel}> Change Class Name </button>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {this.display()}\n      </div>\n    )\n  }\n}\n\nexport default AnnotationSubMenu;","import React from \"react\";\nimport { getItems, AnnotationMenuApi} from \"./annotationSettings.js\"\nimport AnnotationSubMenu from './annotationSubMenu.js'\n\nclass AnnotationMenu extends React.Component {\n constructor(props) {\n   super(props);\n\n    this.contextRef = React.createRef();\n    this.returnMenu = this.returnMenu.bind(this);\n\n    this.state = {\n      items: [],\n      coords: {\n        x: 0,\n        y: 0\n      },\n      style: {\n       'position': 'absolute',\n       'top': '0px',\n       'left':'0px'\n      },\n      on: false,\n      select: 0,\n    };\n  }\n\n  updateCoords(x, y) {\n    if (this.state.coords.x !== x\n      && this.state.coords.y !== y) {\n      this.setState( prevState => ({\n        ...prevState,\n        coords: {\n          x: x,\n          y: y,\n        },\n        style: {\n          ...prevState.style,\n          'top': `${y}px`,\n          'left':`${x+5}px`\n        }\n      }))\n    }\n  }\n\n  updateItems(items) {\n    if (this.state.items !== items) {\n      this.setState( prevState => ({\n        ...prevState,\n        items: items\n      }))\n    }\n  }\n\n  updateDisplay(on) {\n    if (this.state.on !== on) {\n      this.setState( prevState => ({\n        ...prevState,\n        on: on\n      }))\n    }\n  }\n  updateSelect(sel) {\n    if (this.state.select !== sel) {\n      this.setState( prevState => ({\n        ...prevState,\n        select: sel\n      }))\n    }\n  }\n\n  returnMenu() {\n    AnnotationMenuApi.subscribe(state => {\n      this.updateItems(state.menu.items)\n      this.updateCoords(state.menu.coords.x, state.menu.coords.y)\n      this.updateDisplay(state.menu.displayon)\n      this.updateSelect(state.menu.select)\n    })\n    if (this.state.on) {\n      return (\n        <div className='custom-context' id='customcontext' style={this.state.style} ref={this.contextRef}>\n        {\n          getItems().map((item, index, arr) => {\n            if (arr.length > 0) {\n              let label = item.label+\"-button-wrapper\"\n              return (\n                <div key={label}>\n                  <button onClick={item.callback}> {item.label} </button>\n                </div>\n              )\n            }\n            return null\n          })\n        }\n        </div>\n      )\n    }\n\n    if (this.state.select === 1 || this.state.select === 2) {\n      return (\n        <AnnotationSubMenu style={this.state.style} select={this.state.select}/>\n      )\n    }\n    return (\n      null\n    )\n  }\n\n  render() {\n    return (\n      <div id='cmenu'>\n        {this.returnMenu()}\n      </div>\n    );\n  }\n}\n\nexport default AnnotationMenu;","import create from 'zustand';\n\nimport {\n  drawRect,\n} from '../annotator/editControl.js';\nimport {\n  isDisplayOn,\n  setDisplay,\n  setMenuCoords,\n  setSelectedObjects,\n} from '../annotator/annotationSettings.js'\n\nexport const modes = {\n  RECT: 'rectangle',\n  FREE: 'free draw',\n  SELECT: 'select',\n  NONE: 'none',\n}\n\nconst initState = {\n  mouse: {\n    x: 0,\n    y: 0,\n    down: false\n  },\n  origin: {\n    x: 0,\n    y: 0,\n  },\n  drawMode: modes.RECT,\n  canvas: null\n}\n\nexport const [useFabric, fabricApi] = create ( set => ({\n  ...initState,\n}))\n\nexport function setFabricCanvas(canvas) {\n  fabricApi.setState( prevState => ({\n    canvas: canvas\n  }));\n}\n\nexport function setMode(newMode) {\n  fabricApi.setState( prevState => ({\n    ...prevState,\n    drawMode: newMode\n  }));\n\n  if (newMode === modes.FREE) {\n    fabricApi.getState().canvas.isDrawingMode = true;\n  }\n  else {\n    fabricApi.getState().canvas.isDrawingMode = false;\n  }\n}\n\nexport function startSelecting() {\n  setMode(modes.SELECT);\n}\n\nexport function finishSelecting() {\n  setMode(modes.RECT);\n}\n\nexport function startDrawing(x, y) {\n  if (fabricApi.getState().canvas.isDrawingMode) {\n    startDrawingFree(x, y);\n  } else {\n    startDrawingRect(x, y);\n  }\n}\n\nexport function startDrawingFree(x, y)  {\n}\n\nexport function finish (x, y) {\n  if (fabricApi.getState().drawMode === modes.SELECT) {\n    finishSelecting()\n  }\n  else if (fabricApi.getState().drawMode === modes.RECT){\n    finishDrawingRect(x, y)\n  }\n}\n\nexport function startDrawingRect(x, y) {\n  setOrigin(x, y)\n}\n\nexport function finishDrawing(x, y) {\n  if (fabricApi.getState().drawMode === modes.RECT) {\n    finishDrawingRect(x, y)\n  }\n  setFabricCoords(x, y)\n}\n\nexport function finishDrawingRect(x, y) {\n  const state = fabricApi.getState()\n  if (state.origin.x && state.origin.y && x && y) {\n    const width = x - state.origin.x\n    if (width >= 10) {\n      const rect = {\n        width: width,\n        height: y - state.origin.y,\n        top: state.origin.y,\n        left:state.origin.x,\n      };\n      drawRect(fabricApi.getState().canvas, rect, 'label', 'class1');\n    }\n\n    setSelectedObjects(fabricApi.getState().canvas.getActiveObjects()[0])\n  }\n}\n\nexport function setOrigin(x, y) {\n  fabricApi.setState( prevState => ({\n    ...prevState,\n    origin: {\n      x: x,\n      y: y\n    }\n  }))\n}\n\nexport function setFabricCoords(x, y) {\n  let canvasLeft = fabricApi.getState().canvas._offset.left;\n  let canvasRight = fabricApi.getState().canvas._offset.left + fabricApi.getState().canvas.width;\n  let canvasTop = fabricApi.getState().canvas._offset.top;\n  let canvasBottom = fabricApi.getState().canvas._offset.top + fabricApi.getState().canvas.height;\n  let relX = x < canvasLeft ? canvasLeft : (x > canvasRight ? canvasRight - 15 : x);\n  let relY = y < canvasTop ? canvasTop : (y > canvasBottom ? canvasBottom - 15 : y);\n\n  fabricApi.setState( prevState => ({\n    mouse: {\n      x: relX,\n      y: relY,\n    }\n  }));\n}\n\nexport function openMenu(x, y) {\n  if (!isDisplayOn()) {\n    setDisplay(true);\n  }\n  setMenuCoords(x, y)\n}\n\nexport function addToFabric () {\n  let annots = fabricApi.getState().annotations;\n\n  if (annots.length > fabricApi.getState().canvas.getObjects().length) {\n    let lastAnnotIdx = annots.length - 1;\n    let annot = annots[lastAnnotIdx];\n\n    var newAnnot = {\n      left: parseInt(annot.rect.left),\n      top: parseInt(annot.rect.top),\n      width: parseInt(annot.rect.width),\n      height: parseInt(annot.rect.height),\n    };\n\n    drawRect(fabricApi.getState().canvas, newAnnot, annot.label, annot.class);\n  }\n}\n","import React from 'react';\nimport { fabric } from 'fabric';\nimport {\n  filterAnnotations,\n  showAll,\n} from '../../annotator/editControl.js';\nimport { annotApi } from '../../annotator/annotationStore.js';\nimport AnnotationMenu from '../../annotator/annotationMenu.js';\nimport {\n  setCanvas,\n  AnnotationMenuApi,\n} from '../../annotator/annotationSettings.js'\nimport {\n  openMenu,\n  startDrawing,\n  startSelecting,\n  finish,\n  addToFabric,\n  setFabricCanvas,\n} from '../../fabric/fabricControl.js'\n\nvar canvas;\n\nclass FabricLayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.canvasRef = React.createRef();\n\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleMouseDoubleClick = this.handleMouseDoubleClick.bind(this);\n    this.handleDrag = this.handleDrag.bind(this);\n    this.selectClass1 = this.selectClass1.bind(this);\n    this.showAll = this.showAllClasses.bind(this);\n  }\n\n  componentDidMount() {\n    canvas = new fabric.Canvas(this.canvasRef.current, {\n      fireRightClick: true\n    });\n    canvas.on({\n      'mouse:down': this.handleMouseDown,\n      'mouse:up': this.handleMouseUp,\n      'mouse:dblclick': this.handleMouseDoubleClick,\n      'object:moving': this.handleDrag,\n      'object:rotating': this.handleDrag,\n      'object:scaling': this.handleDrag,\n    });\n    setCanvas(canvas);\n    setFabricCanvas(canvas);\n  }\n\n  handleDrag(e){\n    startSelecting();\n  }\n\n  handleLeftMouseDown(options) {\n    startDrawing(options.e.clientX, options.e.clientY)\n  }\n\n  handleRightMouseDown(options) {\n    openMenu(options.e.clientX, options.e.clientY)\n  }\n\n  handleLeftMouseUp(options) {\n    finish(options.e.clientX, options.e.clientY)\n  }\n\n  handleRightMouseUp(options) {\n  }\n\n  handleMouseDown(options) {\n    if (options.button === 3) {\n      this.handleRightMouseDown(options)\n    }\n    else {\n      this.handleLeftMouseDown(options)\n    }\n  }\n\n  handleMouseUp(options){\n    if (options.button === 3) {\n      this.handleRightMouseUp(options)\n    }\n    else {\n      this.handleLeftMouseUp(options)\n    }\n  }\n\n  handleObjectSelect(e) {\n    // if more than one object is selected\n    // if Delete button is selected\n    // delete all objects from canvas\n    // remove from annotations\n  }\n\n  handleObjectResize(e) {\n    // if an object is selected, and resized\n    // updateRect(rect)\n  }\n\n  handleMouseDoubleClick(e) {\n    // if an object is selected\n    // updateLabel (label)\n    startSelecting()\n  }\n\n  displayMenu() {\n    if (canvas && (canvas.getActiveObjects().length > 0)) {\n      return(\n        <AnnotationMenu />\n      )\n    }\n  }\n  selectClass1() {\n    filterAnnotations(\"class1\")\n    this.forceUpdate();\n  }\n  showAllClasses() {\n    showAll()\n    this.forceUpdate();\n  }\n\n  render() {\n    annotApi.subscribe(state => {\n      if (state) {\n        addToFabric()\n      }\n    })\n    AnnotationMenuApi.subscribe(state => {\n      this.forceUpdate()\n    })\n\n    return (\n      <div id=\"annotationLayer\" onContextMenu={(e) => e.preventDefault()}\n      >\n        <canvas ref={this.canvasRef}\n          width={750}\n          height={750}\n        />\n        {this.displayMenu()}\n      </div>\n    );\n  }\n}\n\nexport default FabricLayer\n","import { uApi } from '../utils/index.js';\nimport { createTexture, createTextureFromTiff } from './ImageStore.js';\n\nfunction isValidChannel(channel) {\n  return (\n    uApi.getState() &&\n    uApi.getState().channels.length > 0 &&\n    channel >= 1 &&\n    uApi.getState().channels[channel - 1] &&\n    uApi.getState().channels[channel - 1].uniforms.contrast &&\n    uApi.getState().channels[channel - 1].uniforms.brightness\n  );\n}\n\nfunction updateUniformBrightness(value, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.uniforms.brightness.value = value;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nfunction updateUniformContrast(value, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.uniforms.contrast.value = value;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nfunction updateUniformWhitepoint(value, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.uniforms.whitepoint.value = value;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nfunction updateUniformBlackpoint(value, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n        newChannel.uniforms.blackpoint.value = value;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nexport function updateImage(file, channel) {\n  let name = file.name;\n  let blob = file.image;\n  let texture = file.texture;\n\n  if (texture === '') {\n    if (file.type === 'image/tiff') {\n      texture = createTextureFromTiff(blob);\n    } else {\n      texture = createTexture(blob);\n    }\n  }\n  const prevStateCh = uApi.getState().channels[channel - 1];\n\n  if (\n    prevStateCh.name !== name ||\n    prevStateCh.imagepath !== blob ||\n    prevStateCh.uniforms.image.value !== texture\n  ) {\n    updateUniformImage(texture, name, blob, channel);\n  }\n}\n\nexport function updateUniformImage(texture, name, imagepath, channel) {\n  uApi.setState(prevState => {\n    const channels = prevState.channels.map((ch, j) => {\n      if (j === channel - 1) {\n        var newChannel = ch;\n\n        newChannel.name = name;\n        newChannel.imagepath = imagepath;\n        newChannel.uniforms.image.value = texture;\n        return newChannel;\n      } else {\n        return ch;\n      }\n    });\n    return {\n      channels,\n    };\n  });\n}\n\nexport function updateBrightness(value, channel) {\n  if (isValidChannel(channel)) {\n    if (\n      value !== uApi.getState().channels[channel - 1].uniforms.brightness.value\n    ) {\n      updateUniformBrightness(value, channel);\n    }\n    return true;\n  } else {\n    console.log(\n      'CanvasControl::UpdateBrighness() - null state',\n      uApi.getState(),\n      ' channel: ',\n      channel,\n      ' value: ',\n      value\n    );\n  }\n  return false;\n}\n\nexport function updateContrast(value, channel) {\n  if (isValidChannel(channel)) {\n    if (\n      value !== uApi.getState().channels[channel - 1].uniforms.contrast.value\n    ) {\n      updateUniformContrast(value, channel);\n    }\n    return true;\n  } else {\n    console.log(\n      'CanvasControl::updateContrast() - null state',\n      uApi.getState(),\n      ' channel: ',\n      channel,\n      ' value: ',\n      value\n    );\n  }\n  return false;\n}\n\nexport function updateWhitepoint(value, channel) {\n  if (isValidChannel(channel)) {\n    if (\n      value !== uApi.getState().channels[channel - 1].uniforms.whitepoint.value\n    ) {\n      updateUniformWhitepoint(value, channel);\n    }\n    return true;\n  } else {\n    console.log(\n      'CanvasControl::updateWhitepoint() - null state',\n      uApi.getState(),\n      ' channel: ',\n      channel,\n      ' value: ',\n      value\n    );\n  }\n  return false;\n}\n\nexport function updateBlackpoint(value, channel) {\n  if (isValidChannel(channel)) {\n    if (\n      value !== uApi.getState().channels[channel - 1].uniforms.blackpoint.value\n    ) {\n      updateUniformBlackpoint(value, channel);\n    }\n    return true;\n  } else {\n    console.log(\n      'CanvasControl::updateBlackpoint() - null state',\n      uApi.getState(),\n      ' channel: ',\n      channel,\n      ' value: ',\n      value\n    );\n  }\n  return false;\n}\n","import React from 'react';\nimport { fApi, uApi } from '../utils/index.js';\nimport { updateImage } from './CanvasControl.js';\nimport { canvasApi } from './canvasStore.js';\n\nclass ImageCanvas extends React.Component {\n  updateForFile(state) {\n    if (state) {\n      updateImage(state.file[state.selected], this.props.channel);\n    }\n    this.forceUpdate();\n  }\n  updateForControls(state) {\n    this.forceUpdate();\n  }\n\n  render() {\n    fApi.subscribe(state => {\n      this.updateForFile(state);\n    });\n    uApi.subscribe(state => {\n      this.updateForControls(state);\n    });\n\n    return canvasApi.getState().canvas[this.props.channel - 1];\n  }\n}\n\nexport default ImageCanvas;\n","import React from 'react';\n\nimport {\n  cardStyle,\n  card,\n  mainImg,\n  mainCanvasStyle,\n  canvasStyle1,\n  canvasStyle2,\n  canvasStyle3,\n} from '../style.js';\nimport Viewer from '../../viewer/index.js';\nimport { Card, CardTitle, CardBody } from 'reactstrap';\nimport { canvasApi } from '../../imagecanvas/canvasStore.js';\nimport { settingsApi } from '../../mainSettings.js';\nimport FabricLayer from './FabricLayer.js';\nimport ImageCanvas from './../../imagecanvas/ImageCanvas.js';\n\nclass mainViewer extends React.Component {\n  altView() {\n    return (\n      <Card style={card}>\n        <CardBody>\n          <CardTitle> Image View </CardTitle>\n          <Viewer imageWidth={mainImg.width} type=\"0\" />\n        </CardBody>\n        <br></br>\n      </Card>\n    );\n  }\n  canvasView() {\n    var canvas = (\n      <ImageCanvas\n        className=\"annot-view\"\n        alt=\"main-canvas-view\"\n        height=\"100px\"\n        channel=\"4\"\n      />\n    );\n    return (\n      <Card style={card}>\n        <CardBody>\n          <CardTitle> Image View </CardTitle>\n            <div id=\"canvasContainer\">\n              <div style={mainCanvasStyle}>{canvas}</div>\n            </div>\n        </CardBody>\n        <br></br>\n      </Card>\n    );\n  }\n\n  channelViews() {\n    var view1;\n    var view2;\n    var view3;\n\n    if (settingsApi.getState().channels[0].selected) {\n      console.log('displaying 1');\n      view1 = canvasApi.getState().canvas[0];\n    }\n    if (settingsApi.getState().channels[1].selected) {\n      console.log('displaying 2');\n      view2 = canvasApi.getState().canvas[1];\n    }\n    if (settingsApi.getState().channels[2].selected) {\n      console.log('displaying 3');\n      view3 = canvasApi.getState().canvas[2];\n    }\n    return (\n      <div id=\"canvasContainer\">\n        <div style={canvasStyle1}>{view1}</div>\n        <div style={canvasStyle2}>{view2}</div>\n        <div style={canvasStyle3}>{view3}</div>\n      </div>\n    );\n  }\n\n  display() {\n    if (\n      !settingsApi.getState().channels[0].selected &&\n      !settingsApi.getState().channels[1].selected &&\n      !settingsApi.getState().channels[2].selected\n    ) {\n      return this.canvasView();\n    } else {\n      return this.channelViews();\n    }\n  }\n\n  render() {\n    settingsApi.subscribe(state => {\n      this.forceUpdate();\n    });\n    return (\n      <div className=\"main-view\" style={cardStyle}>\n        {this.display()}\n        <FabricLayer />\n      </div>\n    );\n  }\n}\n\nexport default mainViewer;\n","import React from 'react';\n\nimport { cardStyle, card, axesImg } from '../style.js';\nimport Viewer from '../../viewer/index.js';\nimport { Card, CardTitle, CardBody } from 'reactstrap';\nimport ImageCanvas from './../../imagecanvas/ImageCanvas.js';\n\nclass AxesViewer extends React.Component {\n\n  // view1 = <Viewer imageWidth={axesImg.width} type=\"1\" />\n  // view2 = <Viewer imageWidth={axesImg.width} type=\"2\" />\n  // view3 = <Viewer imageWidth={axesImg.width} type=\"3\" />\n  view1 =\n    <ImageCanvas\n      className=\"axis-xy-view\"\n      alt=\"xy-canvas-view\"\n      height=\"100px\"\n      channel=\"4\"\n    />\n  view2 =\n    <ImageCanvas\n      className=\"axis-yz-view\"\n      alt=\"yz-canvas-view\"\n      height=\"100px\"\n      channel=\"4\"\n    />\n  view3 =\n    <ImageCanvas\n      className=\"axis-xz-view\"\n      alt=\"xz-canvas-view\"\n      height=\"100px\"\n      channel=\"4\"\n    />\n\n  render() {\n    return (\n      <div>\n        <div className=\"card-axis-xy\" style={cardStyle}>\n          <Card style={card}>\n            <CardBody>\n              <CardTitle> Axis XY </CardTitle>\n              {this.view1}\n            </CardBody>\n          </Card>\n        </div>\n\n        <br></br>\n        <div className=\"card-axis-yz\" style={cardStyle}>\n          <Card style={card}>\n            <CardBody>\n              <CardTitle> Axis YZ </CardTitle>\n              {this.view2}\n            </CardBody>\n          </Card>\n        </div>\n\n        <br></br>\n        <div className=\"card-axis-xz\" style={cardStyle}>\n          <Card style={card}>\n            <CardBody>\n              <CardTitle> Axis XZ </CardTitle>\n              {this.view3}\n            </CardBody>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AxesViewer;\n","import React from 'react';\n\nimport { cardStyle, card } from '../style.js';\nimport './../styles.css';\nimport '../../utils/styles.css';\nimport { updateClasses, getClasses, toggleClassEnable, annotClassApi } from '../../annotator/annotationClass.js'\n\nimport { Button, Card, CardTitle, CardBody } from 'reactstrap';\nimport { annotApi } from '../../annotator/annotationStore.js';\nimport { filterClasses } from '../../annotator/editControl.js'\n\nclass AnnotatorViewer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      classes: [],\n      annotClasses: [],\n      enables: []\n    }\n  }\n\n  futureClass = []\n  futureAnnotClass = []\n\n  componentDidUpdate(prevState) {\n    for (var i = 0; i < prevState.classes; i++) {\n      const cls = prevState.classes[i]\n      if (cls\n        && (this.state.classes[i] !== cls.name)\n        && (this.state.enables[i] !== cls.enabled)\n      ) {\n        return true\n      }\n    }\n    for (i = 0; i < prevState.annotClasses; i++) {\n      const annotCls = prevState.annotClasses[i]\n      if (annotCls\n        && (this.state.annotClasses[i] !== annotCls)\n      ) {\n        return true\n      }\n    }\n    return false\n  }\n\n  filter(sel, enabled) {\n    const classes = getClasses();\n    toggleClassEnable(sel);\n    filterClasses(classes[sel]);\n  }\n\n  updateAnnotClasses(annots) {\n    for (var i = 0; i < annots.length; i++){\n      const cls = annots[i]\n      if (!this.state.annotClasses.includes(cls.class) && !this.futureAnnotClass.includes(cls.class)) {\n        this.futureAnnotClass.push(cls.class)\n        this.setState(prevState => ({\n          ...prevState,\n          annotClasses: [\n            ...prevState.annotClasses,\n            cls.class\n          ],\n        }));\n      }\n    }\n  }\n\n  updateClasses(classes) {\n    for (var i = 0; i < classes.length; i++){\n      const idx = i;\n      const cls = classes[idx]\n      if (!this.state.classes.includes(cls.name) && !this.futureClass.includes(cls.name)) {\n        this.futureClass.push(cls.name)\n        this.setState(prevState => ({\n          ...prevState,\n          classes: [\n            ...prevState.classes,\n            cls.name,\n          ]\n        }));\n      }\n\n      this.setState( prevState => {\n        const enables = prevState.enables.map((en, j) => {\n          if (j === idx) {\n            return cls.enabled\n          }\n          else {\n            return en\n          }\n        })\n        return {\n          enables\n        }\n      })\n    }\n  }\n\n  display () {\n    const classes = getClasses();\n    var divs = []\n    for (var i = 0; i < classes.length; i++) {\n      const sel = i\n      const enabled = classes[sel].enabled\n      divs.push (\n        <Button\n          outline\n          color=\"primary\"\n          id=\"annot1Btn\"\n          onClick={() => {\n            this.filter(sel, !enabled);\n          }}\n          active={enabled}\n        >\n          {classes[sel].name}\n        </Button>\n      )\n    }\n    return (\n      <div>\n        <div className=\"annotations-class\" style={cardStyle}>\n\n          <Card style={card}>\n            <CardBody>\n              <CardTitle> Annotated Class Selection </CardTitle>\n            </CardBody>\n            {divs}\n          </Card>\n        </div>\n\n        <br></br>\n      </div>\n    )\n  };\n\n  render() {\n    annotApi.subscribe(state => {\n      if (state) {\n        updateClasses()\n        this.updateAnnotClasses(state.annotations)\n      }\n    })\n    annotClassApi.subscribe(state => {\n      if (state) {\n        this.updateClasses(state.classes);\n      }\n    })\n    return (\n      <div>\n        {this.display()}\n      </div>\n    );\n  }\n}\n\nexport default AnnotatorViewer;\n","import React from 'react';\n\nimport { thumb, thumbInner } from '../style.js';\nimport { fApi } from '../../utils/index.js';\n\nclass Thumbnails extends React.Component {\n  selected = 0;\n\n  setSelected(idx) {\n    if (this.selected !== idx) {\n      fApi.setState(prevState => ({\n        ...prevState,\n        selected: idx,\n      }));\n      this.selected = idx;\n    }\n  }\n\n  allThumbs = () => {\n    var elements = [];\n\n    if (fApi.getState().file) {\n      fApi.getState().file.map((file, idx) => {\n        if (file.type === 'image/png' || file.type === 'image/tiff') {\n          elements.push(\n            <div style={thumb} key={file.name}>\n              <div style={thumbInner}>\n                <img\n                  src={file.image}\n                  style={file.style}\n                  alt={file.name}\n                  onClick={() => this.setSelected(idx)}\n                />\n              </div>\n            </div>\n          );\n        }\n        return null;\n      });\n    }\n\n    return <div>{elements}</div>;\n  };\n\n  render() {\n    fApi.subscribe(state => {\n      this.forceUpdate();\n    });\n\n    return <div id=\"thumbsContainer\">{this.allThumbs()}</div>;\n  }\n}\n\nexport default Thumbnails;\n","import create from 'zustand';\nimport { settingsApi } from '../mainSettings.js';\n\nexport const initState = () => {\n  return settingsApi.getState().dev ? devState : prodState;\n};\nexport const prodState = {\n  img_name: '',\n  annotations: [],\n};\n\nexport const devState = {};\n\nexport const [useAnnotStore, annotApi] = create(set => ({\n  ...initState(),\n}));\n","import csv from 'csvtojson';\nimport { saveJson, updateTiff } from '../fileuploader/fileControl.js';\nimport { Image } from 'image-js';\n\nexport function importCsv(file) {\n  const reader = new FileReader();\n\n  reader.onload = () => {\n    const fileAsBinaryString = reader.result;\n\n    csv({\n      noheader: true,\n      output: 'json',\n    })\n      .fromString(fileAsBinaryString)\n      .then(csvRows => {\n        const toJson = [];\n        csvRows.forEach((aCsvRow, i) => {\n          if (i !== 0) {\n            const builtObject = {};\n\n            Object.keys(aCsvRow).forEach(aKey => {\n              const valueToAddInBuiltObject = aCsvRow[aKey];\n              const keyToAddInBuiltObject = csvRows[0][aKey];\n              builtObject[keyToAddInBuiltObject] = valueToAddInBuiltObject;\n            });\n\n            toJson.push(builtObject);\n          }\n        });\n        saveJson(toJson);\n      });\n  };\n\n  reader.onabort = () => console.log('file reading was aborted');\n  reader.onerror = () => console.log('file reading has failed');\n\n  reader.readAsText(file, 'ISO-8859-1');\n}\n\nexport function importJson(file) {\n  const reader = new FileReader();\n  let json;\n  reader.onload = () => {\n    json = JSON.parse(reader.result);\n    saveJson(json.annotations);\n  };\n  reader.readAsText(file);\n}\n\nexport function importTiff(file) {\n  const reader = new FileReader();\n\n  if (file) {\n    reader.onload = () => {\n      var success = file.type === 'image/tiff';\n      if (success) {\n        console.debug('importer::importTiff() - Parsing TIFF image...');\n        parseTiff(file);\n      }\n    };\n    reader.onloadend = () => {};\n    reader.onprogress = () => {\n      console.log('importer::importTiff()', 'Still Parsing...');\n    };\n    reader.readAsArrayBuffer(file);\n  }\n}\n\nexport function parseTiff(file) {\n  var image = file.preview;\n  Image.load(image)\n    .then(function(image) {\n      updateTiff(image);\n    })\n    .catch(function(e) {\n      console.error('ERROR Unsupported compression: ', e);\n    });\n}\n","import { fileApi } from './fileStore.js';\nimport { annotApi } from '../annotator/annotStore.js';\nimport { addAnnotation } from '../annotator/annotationControl.js';\nimport {\n  createTexture,\n  createTextureFromTiff,\n} from '../imagecanvas/ImageStore.js';\nimport { importCsv, importJson, importTiff } from '../annotator/importer.js';\n\nconst img = {\n  display: 'block',\n  width: 'auto',\n  height: '100%',\n};\n\nvar idx = 0;\n\nexport function isFirstFile() {\n  return fileApi.getState().size === 0;\n}\n\nexport function isValidFile(name) {\n  // check if file is already uploaded\n  var validFile = false;\n\n  fileApi.setState(prevState => {\n    if (prevState.file) {\n      const x = prevState.file.filter(file => file.name === name);\n      if (x.length === 0) {\n        validFile = true;\n      }\n    }\n  });\n  return validFile;\n}\n\nexport function initPng(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      {\n        name: file.name,\n        image: file.preview,\n        style: img,\n        type: file.type,\n        texture: createTexture(file.preview),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function addPng(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      ...prevState.file,\n      {\n        name: file.name,\n        image: file.preview,\n        style: img,\n        type: file.type,\n        texture: createTexture(file.preview),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function initTiff(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      ...prevState.file,\n      {\n        name: file.name,\n        image: file.preview,\n        style: img,\n        type: file.type,\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  importTiff(file);\n  idx = fileApi.getState().size - 1;\n}\n\nexport function addTiff(file) {\n  importTiff(file);\n  idx = fileApi.getState().size - 1;\n}\n\nexport function updateTiff(image) {\n  fileApi.setState(prevState => {\n    const file = prevState.file.map((file, j) => {\n      var newFile = file;\n      newFile.texture = createTextureFromTiff(image.toDataURL());\n      return newFile;\n    });\n    return {\n      file,\n    };\n  });\n}\n\nexport function initCsv(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      {\n        name: file.name,\n        type: file.type,\n        json: importCsv(file),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function addCsv(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      ...prevState.file,\n      {\n        name: file.name,\n        type: file.type,\n        json: importCsv(file),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function initJson(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      {\n        name: file.name,\n        type: file.type,\n        json: importJson(file),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nexport function addJson(file) {\n  fileApi.setState(prevState => ({\n    ...prevState,\n    file: [\n      ...prevState.file,\n      {\n        name: file.name,\n        type: file.type,\n        json: importJson(file),\n      },\n    ],\n    size: prevState.size + 1,\n  }));\n  idx = fileApi.getState().size - 1;\n}\n\nfunction isAnnotValid(annotation) {\n  return (\n    annotation &&\n    annotation.rect.left > 0 &&\n    annotation.rect.left < 1000 &&\n    annotation.rect.top > 0 &&\n    annotation.rect.top < 1000 &&\n    annotation.rect.width > 0 &&\n    annotation.rect.width < 1000 &&\n    annotation.rect.height > 0 &&\n    annotation.rect.height < 1000 &&\n    annotation.label.length > 0\n  );\n}\n\nfunction addJsonAnnot(annotation) {\n  annotApi.setState(prevState => ({\n    img_name: fileApi.getState().file[idx].name,\n    annotations: prevState.annotations.concat(annotation),\n  }));\n  for (var i = 0; i < annotation.length; i++) {\n    if (isAnnotValid(annotation[i])) {\n      addAnnotation(annotation[i].rect, annotation[i].label);\n    }\n  }\n}\n\nexport function saveJson(result) {\n  fileApi.setState(prevState => {\n    const file = prevState.file.map((f, i) => {\n      if (i === idx) {\n        var newFile = f;\n        f.json = result;\n        return newFile;\n      } else {\n        return f;\n      }\n    });\n    return file;\n  });\n\n  addJsonAnnot(result);\n}\n","import React, { useEffect, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport {\n  initPng,\n  addPng,\n  initTiff,\n  addTiff,\n  initCsv,\n  addCsv,\n  initJson,\n  addJson,\n  isFirstFile,\n  isValidFile,\n} from './fileControl.js';\n\nfunction addFile(file) {\n  if (file.type === 'image/png') {\n    addPng(file);\n  } else if (file.type === 'image/tiff') {\n    addTiff(file);\n  } else if (file.type === 'text/csv') {\n    addCsv(file);\n  } else if (file.type === 'application/json') {\n    addJson(file);\n  }\n}\n\nfunction initFile(file) {\n  if (file.type === 'image/png') {\n    initPng(file);\n  } else if (file.type === 'image/tiff') {\n    initTiff(file);\n  } else if (file.type === 'text/csv') {\n    initCsv(file);\n  } else if (file.type === 'application/json') {\n    initJson(file);\n  }\n}\n\nexport function FileUpload(props) {\n  const [files, setFiles] = useState([]);\n  const { getRootProps, getInputProps } = useDropzone({\n    accept: 'image/png, image/tiff, .csv, .json',\n    onDrop: acceptedFiles => {\n      setFiles(\n        acceptedFiles.map(file =>\n          Object.assign(file, {\n            preview: URL.createObjectURL(file),\n          })\n        )\n      );\n    },\n  });\n\n  const update = files.map(file => {\n    if (isValidFile(file.name)) {\n      if (isFirstFile()) {\n        initFile(file);\n      } else {\n        addFile(file);\n      }\n    }\n    return null;\n  });\n\n  useEffect(\n    () => () => {\n      // Make sure to revoke the data uris to avoid memory leaks\n      files.forEach(file => URL.revokeObjectURL(file.preview));\n    },\n    [files]\n  );\n\n  return (\n    <section className=\"container\">\n      <div {...getRootProps({ className: 'dropzone' })}>\n        <input {...getInputProps()} />\n        <p> {props.name} </p>\n        {update}\n      </div>\n    </section>\n  );\n}\n","import { annotApi } from './annotationStore.js';\n\nexport function exportJson() {\n  const element = document.createElement('a');\n\n  const file = new Blob([JSON.stringify(annotApi.getState())], {\n    type: 'text/plain',\n  });\n  element.href = URL.createObjectURL(file);\n  element.download = 'annotations.txt';\n  document.body.appendChild(element); // Required for this to work in FireFox\n  element.click();\n}\n","import React from 'react';\n\nimport { buttonGroup } from '../style.js';\nimport {\n  UncontrolledButtonDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  ButtonGroup,\n  Button,\n} from 'reactstrap';\n\nimport { FileUpload } from '../../fileuploader/index.js';\nimport { exportJson } from '../../annotator/exporter.js';\n\nimport {\n  modes,\n  setMode,\n} from '../../fabric/fabricControl.js'\nimport {\n  undo,\n  redo,\n} from '../../annotator/editControl.js'\n\nclass Menus extends React.Component {\n  render() {\n    return (\n      <ButtonGroup\n        size={buttonGroup.size}\n        vertical={buttonGroup.vertical}\n        style={buttonGroup}\n      >\n        <UncontrolledButtonDropdown>\n          <DropdownToggle caret color=\"primary\">\n            File\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem>\n              <Button\n                outline\n                color=\"primary\"\n                className=\"export-btn\"\n                onClick={exportJson}\n              >\n                {' '}\n                Export Annotations{' '}\n              </Button>\n            </DropdownItem>\n          </DropdownMenu>\n        </UncontrolledButtonDropdown>\n\n        <UncontrolledButtonDropdown>\n          <DropdownToggle caret color=\"primary\">\n            Draw\n          </DropdownToggle>\n          <DropdownMenu>\n            <Button\n              outline\n              color=\"primary\"\n              className=\"draw-rectangle-btn\"\n              onClick={(e) => setMode(modes.RECT)}\n            >\n              Rectangle\n            </Button>\n            <Button\n              outline\n              color=\"primary\"\n              className=\"draw-rectangle-btn\"\n              onClick={(e) => setMode(modes.FREE)}\n            >\n              Freehand\n            </Button>\n          </DropdownMenu>\n        </UncontrolledButtonDropdown>\n\n        <UncontrolledButtonDropdown>\n          <DropdownToggle caret color=\"primary\">\n            Edit\n          </DropdownToggle>\n          <DropdownMenu>\n            <Button\n              outline\n              color=\"primary\"\n              className=\"draw-rectangle-btn\"\n              onClick={(e) => undo()}\n            >\n              Undo\n            </Button>\n            <Button\n              outline\n              color=\"primary\"\n              className=\"draw-rectangle-btn\"\n              onClick={(e) => redo()}\n            >\n              Redo\n            </Button>\n          </DropdownMenu>\n        </UncontrolledButtonDropdown>\n\n        <Button outline color=\"primary\" className=\"import-btn\">\n          {' '}\n          <FileUpload name=\"Import File\" />{' '}\n        </Button>\n      </ButtonGroup>\n    );\n  }\n}\n\nexport default Menus;\n","import React from 'react';\nimport { fileApi } from '../fileuploader/fileStore.js';\nimport { annotApi } from '../annotator/annotStore.js'\n\nclass Annotator extends React.Component {\n  file_size = 0;\n  annotations = {};\n\n  render() {\n    fileApi.subscribe(state => {\n      if (this.file_size !== state.size) {\n        this.file_size = state.size;\n\n        console.log('fileApi - files: ', state.file);\n      }\n    });\n    annotApi.subscribe(state => {\n      if (this.annotations !== state.annotations) {\n        this.annotations = state.annotations;\n\n        console.log('annotApi - annotations: ', state.annotations);\n      }\n    });\n    return <div id=\"annotator-div\"></div>;\n  }\n}\n\nexport default Annotator;\n","import React from 'react';\n\nimport { card, cardBody, canvasThumbnail } from '../style.js';\nimport { Button, UncontrolledCollapse, Card, CardBody } from 'reactstrap';\n\nimport ImageCanvas from '../../imagecanvas/ImageCanvas.js';\nimport Slider from './slider.js';\nimport {\n  updateBrightness,\n  updateContrast,\n  updateWhitepoint,\n  updateBlackpoint,\n} from '../../imagecanvas/CanvasControl.js';\nimport {\n  updateChannelSel,\n  updateLastSel,\n  settingsApi,\n} from '../../mainSettings.js';\n\nclass Channel extends React.Component {\n  updateSelection = () => {\n    updateChannelSel(this.props.ch);\n    updateLastSel(this.props.ch);\n    this.forceUpdate();\n  };\n\n  sliderValueBr(value) {\n    updateBrightness(value, this.props.ch);\n  }\n\n  sliderValueCt(value) {\n    updateContrast(value, this.props.ch);\n  }\n\n  sliderValueWp(value) {\n    updateWhitepoint(value, this.props.ch);\n  }\n\n  sliderValueBp(value) {\n    updateBlackpoint(value, this.props.ch);\n  }\n\n  resetBrightness() {\n    updateBrightness('0.0', this.props.ch);\n  }\n\n  resetContrast() {\n    updateContrast('0.0', this.props.ch);\n  }\n\n  resetWhitepoint() {\n    updateWhitepoint('255.0', this.props.ch);\n  }\n\n  resetBlackpoint() {\n    updateBlackpoint('0.0', this.props.ch);\n  }\n\n  render() {\n    var sliderValueBr = this.sliderValueBr;\n    var sliderValueCt = this.sliderValueCt;\n    var sliderValueWp = this.sliderValueWp;\n    var sliderValueBp = this.sliderValueBp;\n    var alt = 'Ch' + this.props.ch + ' Histogram';\n    var canvas = (\n      <ImageCanvas\n        className=\"annot-view\"\n        alt={alt}\n        height=\"100px\"\n        channel={this.props.ch}\n      />\n    );\n    var sel = settingsApi.getState().channels[this.props.ch - 1].selected;\n\n    console.log('Channel ' + this.props.ch + ' : ' + sel);\n    return (\n      <div>\n        <Button\n          className=\"channelBtn\"\n          outline\n          color=\"primary\"\n          id=\"channel-btn\"\n          onClick={() => {\n            this.updateSelection();\n          }}\n          active={sel}\n        >\n          Channel {`${this.props.ch}`}\n        </Button>\n        <Button\n          className=\"viewBtn\"\n          outline\n          color=\"secondary\"\n          id={`view${this.props.ch}`}\n        >\n          View\n        </Button>\n        <UncontrolledCollapse toggler={`#view${this.props.ch}`}>\n          <Card style={card}>\n            <CardBody style={cardBody}>\n              <div style={canvasThumbnail}>{canvas}</div>\n              \"Insert Look up table here\"\n              <br></br>\n              <br></br>\n              <div className=\"brightness-slider-container\">\n                <Slider\n                  label=\"Brightness\"\n                  width=\"40%\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\"0.1\"\n                  initial=\"0\"\n                  multiplier=\"100\"\n                  raw=\"0\"\n                  sliderValue={sliderValueBr.bind(this)}\n                />\n                <button\n                  id=\"resetBrBtn\"\n                  onClick={() => {\n                    this.resetBrightness();\n                  }}\n                >\n                  Reset Brightness\n                </button>\n              </div>\n              <div className=\"contrast-slider-container\">\n                <Slider\n                  label=\"Contrast\"\n                  width=\"40%\"\n                  min=\"0\"\n                  max=\"10\"\n                  step=\"1\"\n                  initial=\"0\"\n                  multiplier=\"10\"\n                  raw=\"0\"\n                  sliderValue={sliderValueCt.bind(this)}\n                />\n                <button\n                  id=\"resetCtBtn\"\n                  onClick={() => {\n                    this.resetContrast();\n                  }}\n                >\n                  Reset Contrast\n                </button>\n              </div>\n              <div className=\"whitepoint-slider-container\">\n                <Slider\n                  label=\"Whitepoint\"\n                  width=\"40%\"\n                  min=\"0\"\n                  max=\"255\"\n                  step=\"1\"\n                  initial=\"255\"\n                  multiplier=\"1\"\n                  raw=\"1\"\n                  sliderValue={sliderValueWp.bind(this)}\n                />\n                <button\n                  id=\"resetWpBtn\"\n                  onClick={() => {\n                    this.resetWhitepoint();\n                  }}\n                >\n                  Reset Whitepoint\n                </button>\n              </div>\n              <div className=\"blackpoint-slider-container\">\n                <Slider\n                  label=\"Blackpoint\"\n                  width=\"40%\"\n                  min=\"0\"\n                  max=\"255\"\n                  step=\"1\"\n                  initial=\"0\"\n                  multiplier=\"1\"\n                  raw=\"1\"\n                  sliderValue={sliderValueBp.bind(this)}\n                />\n                <button\n                  id=\"resetBpBtn\"\n                  onClick={() => {\n                    this.resetBlackpoint();\n                  }}\n                >\n                  Reset Blackpoint\n                </button>\n              </div>\n            </CardBody>\n          </Card>\n        </UncontrolledCollapse>\n      </div>\n    );\n  }\n}\n\nexport default Channel;\n","import React from 'react';\n\nimport { cardStyle, card } from '../style.js';\nimport { Card, CardTitle, CardBody } from 'reactstrap';\n\nimport Channel from './channel.js';\n\nclass ChannelViewer extends React.Component {\n  render() {\n    return (\n      <div className=\"annotations-channel\" style={cardStyle}>\n        <Card style={card}>\n          <CardBody>\n            <CardTitle> Channel Selection </CardTitle>\n            <Channel ch=\"1\" />\n            <Channel ch=\"2\" />\n            <Channel ch=\"3\" />\n          </CardBody>\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default ChannelViewer;\n","import React from 'react';\nimport { mainStyle, rowStyle, container } from './style.js';\nimport MainViewer from './components/mainViewer.js';\nimport AxesViewer from './components/axesViewer.js';\nimport AnnotatorViewer from './components/annotatorViewer.js';\nimport Thumbnails from './components/thumbnails.js';\nimport Menus from './components/menus.js';\nimport Annotator from './../annotator/index.js';\nimport ChannelViewer from './components/channelViewer.js';\n\nimport { Container, Row, Col } from 'reactstrap';\n\nclass UI extends React.Component {\n  render() {\n    return (\n      <div className=\"main\" style={mainStyle}>\n        <Menus />\n        <br></br>\n        <br></br>\n        <br></br>\n\n        <Container style={container}>\n          <Row style={rowStyle}>\n            <Col xs=\"3\">\n              <AxesViewer />\n            </Col>\n\n            <Col xs=\"6\">\n              <MainViewer />\n            </Col>\n\n            <Col xs=\"3\">\n              <AnnotatorViewer />\n              <ChannelViewer />\n              <Thumbnails />\n            </Col>\n          </Row>\n        </Container>\n        <Annotator />\n      </div>\n    );\n  }\n}\n\nexport default UI;\n","import './styles.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport UI from './ui';\n\nfunction Application() {\n  return (\n    <>\n      <UI />\n    </>\n  );\n}\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<Application />, rootElement);\n"],"sourceRoot":""}