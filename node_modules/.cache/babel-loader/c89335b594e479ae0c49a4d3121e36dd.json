{"ast":null,"code":"var _jsxFileName = \"/Users/ramiroochoa/Desktop/brmlia/src/imagecanvas/custom/TestImage.js\";\nimport React, { useRef, useMemo } from 'react';\nimport { uApi } from '../../components/utils.js';\nimport { useFrame } from 'react-three-fiber';\nimport * as THREE from 'three';\nvar fragmentShader = \"\\n  uniform sampler2D image;\\n\\n  uniform float brightness;\\n  uniform float contrast;\\n  varying vec2 vUv;\\n  void main() {\\n    gl_FragColor = texture2D(image, vUv);\\n    gl_FragColor.rgb += brightness;\\n\\n    if (contrast > 0.0) {\\n      gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - contrast) + 0.5;\\n    } else {\\n      gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + contrast) + 0.5;\\n    }\\n  }\\n\";\nvar vertexShader = \"\\n  varying vec2 vUv;\\n\\n  void main() {\\n    vUv = uv;\\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n  }\\n\";\n\nfunction Image() {\n  console.log(uApi.getState().uniforms.image);\n  var material = useRef();\n  var uniforms = useMemo(function () {\n    return uApi.getState().uniforms;\n  }, []);\n  useFrame(function (state) {\n    material.current.uniforms.brightness.value = uApi.getState().uniforms.brightness.value;\n    material.current.uniforms.contrast.value = uApi.getState().uniforms.contrast.value;\n  });\n  return React.createElement(\"mesh\", {\n    scale: [1.0, 1.0, 1.0],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [5.0, 5.0],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(\"shaderMaterial\", {\n    attach: \"material\",\n    ref: material,\n    fragmentShader: fragmentShader,\n    vertexShader: vertexShader,\n    uniforms: uniforms,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }));\n}\n\nexport default Image;","map":{"version":3,"sources":["/Users/ramiroochoa/Desktop/brmlia/src/imagecanvas/custom/TestImage.js"],"names":["React","useRef","useMemo","uApi","useFrame","THREE","fragmentShader","vertexShader","Image","console","log","getState","uniforms","image","material","state","current","brightness","value","contrast"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,OAAxB,QAAuC,OAAvC;AACA,SAASC,IAAT,QAAqB,2BAArB;AACA,SAAQC,QAAR,QAAuB,mBAAvB;AAEA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AAEA,IAAMC,cAAc,oaAApB;AAkBA,IAAMC,YAAY,kJAAlB;;AASA,SAASC,KAAT,GAAiB;AAKfC,EAAAA,OAAO,CAACC,GAAR,CAAYP,IAAI,CAACQ,QAAL,GAAgBC,QAAhB,CAAyBC,KAArC;AAEA,MAAMC,QAAQ,GAAGb,MAAM,EAAvB;AAEA,MAAIW,QAAQ,GAAGV,OAAO,CACpB;AAAA,WACEC,IAAI,CAACQ,QAAL,GAAgBC,QADlB;AAAA,GADoB,EAGpB,EAHoB,CAAtB;AAMAR,EAAAA,QAAQ,CAAC,UAAAW,KAAK,EAAI;AAChBD,IAAAA,QAAQ,CAACE,OAAT,CAAiBJ,QAAjB,CAA0BK,UAA1B,CAAqCC,KAArC,GAA6Cf,IAAI,CAACQ,QAAL,GAAgBC,QAAhB,CAAyBK,UAAzB,CAAoCC,KAAjF;AACAJ,IAAAA,QAAQ,CAACE,OAAT,CAAiBJ,QAAjB,CAA0BO,QAA1B,CAAmCD,KAAnC,GAA2Cf,IAAI,CAACQ,QAAL,GAAgBC,QAAhB,CAAyBO,QAAzB,CAAkCD,KAA7E;AACD,GAHO,CAAR;AAKA,SACE;AAAM,IAAA,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAqB,IAAA,MAAM,EAAC,UAA5B;AAAuC,IAAA,IAAI,EAAE,CAAC,GAAD,EAAM,GAAN,CAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AACE,IAAA,MAAM,EAAC,UADT;AAEE,IAAA,GAAG,EAAEJ,QAFP;AAGE,IAAA,cAAc,EAAER,cAHlB;AAIE,IAAA,YAAY,EAAEC,YAJhB;AAKE,IAAA,QAAQ,EAAEK,QALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAYD;;AAED,eAAeJ,KAAf","sourcesContent":["import React, { useRef, useMemo } from 'react';\nimport { uApi } from '../../components/utils.js'\nimport {useFrame} from 'react-three-fiber'\n\nimport * as THREE from 'three';\n\nconst fragmentShader = `\n  uniform sampler2D image;\n\n  uniform float brightness;\n  uniform float contrast;\n  varying vec2 vUv;\n  void main() {\n    gl_FragColor = texture2D(image, vUv);\n    gl_FragColor.rgb += brightness;\n\n    if (contrast > 0.0) {\n      gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - contrast) + 0.5;\n    } else {\n      gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + contrast) + 0.5;\n    }\n  }\n`;\n\nconst vertexShader = `\n  varying vec2 vUv;\n\n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }\n`;\n\nfunction Image() {\n\n\n  \n\n  console.log(uApi.getState().uniforms.image);\n\n  const material = useRef()\n\n  var uniforms = useMemo(\n    () =>\n      uApi.getState().uniforms,\n    []\n  )\n\n  useFrame(state => {\n    material.current.uniforms.brightness.value = uApi.getState().uniforms.brightness.value;\n    material.current.uniforms.contrast.value = uApi.getState().uniforms.contrast.value;\n  })\n\n  return (\n    <mesh scale={[1.0, 1.0, 1.0]}>\n      <planeBufferGeometry attach=\"geometry\" args={[5.0, 5.0]} />\n      <shaderMaterial\n        attach=\"material\"\n        ref={material}\n        fragmentShader={fragmentShader}\n        vertexShader={vertexShader}\n        uniforms={uniforms}\n      />\n    </mesh>\n  )\n}\n\nexport default Image;\n"]},"metadata":{},"sourceType":"module"}